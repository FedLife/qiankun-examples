(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-annotate-workSpaceContainer-segmentation-polygon","dataset-annotate-workSpaceContainer-segmentation-polyline","dataset-annotate-workSpaceContainer-segmentation-vertice"],{"7e60":function(t,e,n){"use strict";n.r(e),n.d(e,"MIN_POINT_DISTANCE",(function(){return S}));var r=n("2638"),a=n.n(r),o=n("2b0e"),i=n("5698"),s=n("ed09"),u=n("df78"),c=n("ed08"),d=n("b3f5"),l=n("d2a9");function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function g(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e=y(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function y(t){var e=b(t,"string");return"symbol"===f(e)?e:String(e)}function b(t,e){if("object"!==f(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function v(t,e){return D(t)||j(t,e)||O(t,e)||m()}function m(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function O(t,e){if(t){if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function j(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,a,o,i,s=[],u=!0,c=!1;try{if(o=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=o.call(n)).done)&&(s.push(r.value),s.length!==e);u=!0);}catch(d){c=!0,a=d}finally{try{if(!u&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}function D(t){if(Array.isArray(t))return t}var S=20;e["default"]={name:"PolygonRender",components:{PolylineRender:d["default"],Vertice:l["default"]},props:{guides:Array,stageWidth:Number,stageHeight:Number,currentAnnotationId:String,handleChange:Function,draw:Object,transformer:Object,scale:Number,offset:Function,getZoom:Function,bounds:Object,shape:Object,onDragStart:Function,onDragMove:Function,onDragEnd:Function,setTransformer:Function},setup:function(t){var e=t.onDragStart,n=t.onDragMove,r=t.onDragEnd,a=t.getZoom,i=t.setTransformer,u=Object(s["n"])({drag:void 0}),d=function(t,e){var n=t(u);o["default"].nextTick((function(){Object.assign(u,n),"function"===typeof e&&e(u)}))},l=function(t){var e=t.map((function(e,n){return[e,t[(n+1)%t.length],n]})).filter((function(t){var e=v(t,2),n=e[0],r=e[1];return Object(c["v"])(n,r)>2*S}));return e},f=function(n){var r={x:n.x+n.dx,y:n.y+n.dy},a=g({},r),o={start:r,end:a};"function"===typeof e&&e(o,t.shape)},p=function(e){var r=a(),o=r.zoom;d((function(n){var r=o*t.scale,a=Object(c["W"])(t.shape.data.points),i=a.x0,s=a.x1,u=a.y0,d=a.y1,l=e.dx>0?Math.min(e.dx/r,t.bounds.width-s):Math.max(e.dx/r,-i),f=e.dy>0?Math.min(e.dy/r,t.bounds.height-d):Math.max(e.dy/r,-u);return g(g({},n),{},{drag:g(g({},e),{},{validDx:l,validDy:f})})}),(function(e){"function"===typeof n&&n(e,t.shape)}))},h=function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.prevState;i({isDragging:!1,id:t.shape.id,x:e.x,y:e.y,dx:0,dy:0}),o.isMoving&&d((function(t){return g(g({},t),{},{drag:g(g({},t.drag),e)})}),(function(e){"function"===typeof r&&r(e,t.shape)}))};return{state:u,updateState:d,renderMidPoints:l,selectionDragStart:f,selectionDragMove:p,selectionDragEnd:h}},render:function(){var t,e=this,n=arguments[0],r=this.shape,o=void 0===r?{}:r,s=this.transformer,f=void 0===s?{}:s,p=this.renderMidPoints,g=this.handleChange,h=this.draw,y=this.stageWidth,b=this.stageHeight,m=this.offset,O=null;o.id===f.id&&(O={translate:"translate(".concat(f.dx,", ").concat(f.dy,")"),isDragging:f.isDragging});var x={pointerEvents:h.isDrawing||null!==(t=O)&&void 0!==t&&t.isDragging?"none":"all"},j={props:{resetOnStart:!0,width:y,height:b,onDragStart:this.selectionDragStart,onDragMove:this.selectionDragMove,onDragEnd:this.selectionDragEnd}},D=o.id===this.currentAnnotationId;return n(u["a"],a()([{},j,{key:o.id}]),[function(t){var r;return n("g",[t.state.isDragging&&n("rect",{attrs:{width:y,height:b,fill:"transparent"},on:{mouseup:t.dragEnd,mousemove:t.dragMove,mouseleave:function(e){Object(c["gb"])(e,e.target)||t.dragEnd()}},style:{cursor:"move"}}),D&&e.guides.map((function(t,e){return n(d["default"],{key:e,attrs:{points:t,offset:m,fill:o.data.color,"stroke-opacity":.7,"stroke-dasharray":"5"}})})),n("g",{attrs:{transform:null===(r=O)||void 0===r?void 0:r.translate},style:x},[n(d["default"],{key:o.id,attrs:{points:o.data.points,fill:o.data.color,"stroke-dasharray":D?"10":void 0,"fill-opacity":D?.4:.1,curve:i["k"],offset:m},on:{mousedown:t.dragStart,mousemove:t.dragMove,mouseup:t.dragEnd}}),D&&[o.data.points.map((function(t,e){var r={props:{handlePointClick:function(){return g("REMOVE_POINT",{index:e,shape:o})},fill:o.data.color}};return n(l["default"],a()([{key:e,attrs:{index:e,position:t,shape:o,offset:m,draggable:!0,stageWidth:y,stageHeight:b,handleChange:g}},r]))})),p(o.data.points).map((function(t){var e=v(t,3),r=e[0],i=e[1],s=e[2],u={props:{handlePointClick:function(){return g("ADD_POINT",{point:Object(c["ub"])(r,i),index:s+1,shape:o})}}};return n(l["default"],a()([{key:"".concat(s,"-mid"),attrs:{index:s,position:Object(c["ub"])(r,i),shape:o,offset:m,innerRadius:3,outerRadius:8,fill:"#fff",fillOpacity:.6,className:"add-point"}},u]))}))]])])}])}}},b3f5:function(t,e,n){"use strict";n.r(e);var r=n("2638"),a=n.n(r),o=n("2ef0"),i=n("5698"),s=n("3da5");e["default"]={name:"PolylineRender",functional:!0,props:{points:Array,curve:Function,fill:String,offset:Function},render:function(t,e){var n=e.props,r=n.fill,u=n.points,c=void 0===u?[]:u,d=n.offset;if(Object(o["isNil"])(c))return null;var l=e.data.style,f=Object(i["y"])().x((function(t){return t.x})).y((function(t){return t.y}));n.curve&&f.curve(n.curve);var p=r||s["defaultColor"],g={attrs:e.data.attrs,on:e.data.on},h=Object(o["isFunction"])(d)?c.map(d):c;return t("path",a()([{class:"interactive",attrs:{d:f(h),stroke:p,fill:p,"stroke-width":2}},g,{style:l}]))}}},d2a9:function(t,e,n){"use strict";n.r(e);var r=n("2638"),a=n.n(r),o=n("4d26"),i=n.n(o),s=n("2ef0"),u=n("ed08"),c=n("df78"),d=n("3da5");e["default"]={name:"Vertice",components:{Drag:c["a"]},props:{shape:Object,index:Number,position:Object,className:String,handlePointClick:{type:Function,default:u["xb"]},handleChange:Function,draggable:{type:Boolean,default:!1},outerRadius:{type:Number,default:10},innerRadius:{type:Number,default:4},fill:{type:String,default:d["defaultColor"]},fillOpacity:{type:Number,default:1},stageHeight:Number,stageWidth:Number,offset:Function},setup:function(t){var e=t.handleChange,n=function(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=a.prevState;!o.isMoving||0===o.dx&&0===o.dy||e("UPDATE_POINT",{drag:n,index:t.index,shape:t.shape})},r=function(n){e("MOVE_POINT",{drag:n,index:t.index,shape:t.shape})};return{dragEnd:n,dragMove:r}},render:function(){var t=this,e=arguments[0],n=this.stageWidth,r=this.stageHeight,o=this.className,d=this.draggable,l=this.position,f=void 0===l?{}:l,p=this.outerRadius,g=this.innerRadius,h=this.fill,y=this.fillOpacity,b=this.handlePointClick,v=this.offset,m=function(e){e.stopPropagation(),e.preventDefault(),b(t.index,t.shape,e)},O={props:{onDragMove:this.dragMove,onDragEnd:this.dragEnd,resetOnStart:!0,width:n,height:r}},x=Object(s["isFunction"])(v)?v(f):f;return e("g",{class:i()("vertice-group cp",o)},[e("circle",{attrs:{r:g,cx:x.x,cy:x.y,"fill-rule":"evenodd","fill-opacity":y,fill:h}}),e(c["a"],a()([{},O]),[function(t){return e("circle",{attrs:{r:p,cx:x.x,cy:x.y,"fill-opacity":0,opacity:0},on:{click:m,mousedown:d?t.dragStart:u["xb"],mousemove:d?t.dragMove:u["xb"],mouseup:d?t.dragEnd:u["xb"]}})}])])}}}}]);