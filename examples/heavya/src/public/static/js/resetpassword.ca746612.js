(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["resetpassword"],{"00ad":function(e,t,r){},1614:function(e,t,r){"use strict";r("00ad")},"4d2a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticStyle:{height:"100%"}},[r("login-public",[r("el-form",{ref:"registerForm",staticClass:"register-form",attrs:{model:e.registerForm,rules:e.registerRules,"label-position":"left","label-width":"0px"}},[r("h2",{staticClass:"register-title"},[e._v("heavyA平台")]),e._v(" "),r("el-form-item",{attrs:{prop:"email"}},[r("el-input",{attrs:{"auto-complete":"on",placeholder:"请输入您的邮箱"},model:{value:e.registerForm.email,callback:function(t){e.$set(e.registerForm,"email",t)},expression:"registerForm.email"}},[r("i",{staticClass:"el-input__icon el-icon-message",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",{attrs:{prop:"code"}},[r("el-input",{staticStyle:{width:"57%"},attrs:{placeholder:"请输入邮箱验证码"},model:{value:e.registerForm.code,callback:function(t){e.$set(e.registerForm,"code",t)},expression:"registerForm.code"}},[r("i",{staticClass:"el-input__icon el-icon-circle-check",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),r("el-button",{staticStyle:{width:"41%"},attrs:{loading:e.codeLoading,disabled:e.isDisabled},on:{click:e.sendCode}},[e._v(e._s(e.buttonName))])],1),e._v(" "),r("el-form-item",{attrs:{prop:"password"}},[r("el-input",{attrs:{type:"password",placeholder:"请输入您的新密码"},model:{value:e.registerForm.password,callback:function(t){e.$set(e.registerForm,"password",t)},expression:"registerForm.password"}},[r("i",{staticClass:"el-input__icon el-icon-lock",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",{attrs:{prop:"pass"}},[r("el-input",{attrs:{type:"password",placeholder:"请再次确认新密码"},model:{value:e.registerForm.pass,callback:function(t){e.$set(e.registerForm,"pass",t)},expression:"registerForm.pass"}},[r("i",{staticClass:"el-input__icon el-icon-key",attrs:{slot:"prefix"},slot:"prefix"})])],1),e._v(" "),r("el-form-item",[r("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary",size:"medium"},on:{click:function(t){return e.submitForm("registerForm")}}},[e._v("修改密码")]),e._v(" "),r("el-button",{staticClass:"fr",attrs:{type:"text"},on:{click:function(t){return e.$router.replace({path:"/login"})}}},[e._v("返回登录")])],1)],1)],1)],1)},i=[],o=r("8de4"),a=r("3786"),l=r("93d2"),n={name:"ResetPassword",components:{LoginPublic:l["a"]},data:function(){var e=this,t=function(t,r,s){""===r?s(new Error("请再次输入新密码")):r!==e.registerForm.password?s(new Error("两次输入密码不一致!")):s()};return{buttonName:"发送验证码",isDisabled:!1,time:60,codeLoading:!1,registerForm:{username:"",phone:"",nickName:"",email:"",code:"",password:"",sex:"",pass:""},registerRules:{email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{pattern:/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/,message:"请输入正确的邮箱地址",trigger:["blur","change"]}],code:[{required:!0,trigger:"change",message:"验证码不能为空"}],password:[{required:!0,trigger:"blur",message:"新密码不能为空"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],pass:[{required:!0,message:"请再次验证密码",trigger:"blur"},{validator:t,trigger:"blur"}]},loading:!1}},methods:{sendCode:function(){var e=this;this.codeLoading=!0,this.buttonName="发送中";var t={email:this.registerForm.email,type:4};Object(a["a"])(t).then((function(){e.$message({showClose:!0,message:"发送成功，验证码有效期5分钟",type:"success"}),e.codeLoading=!1,e.isDisabled=!0,e.buttonName="".concat(e.time-=1,"秒"),e.timer=window.setInterval((function(){e.buttonName="".concat(e.time,"秒"),e.time-=1,e.time<0&&(e.buttonName="重新发送",e.time=60,e.isDisabled=!1,window.clearInterval(e.timer))}),1e3)})).catch((function(t){e.resetForm(),e.codeLoading=!1,e.$message({message:t.message,type:"error"})}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(e){var r={email:t.registerForm.email,code:t.registerForm.code,password:Object(o["b"])(t.registerForm.password)};return Object(a["h"])(r).then((function(){t.loading=!1,t.resetForm(),t.$notify({title:"密码修改成功",type:"success",duration:1500}),t.$router.replace({path:"/login"})})).catch((function(e){t.loading=!1,t.$message({message:e.message,type:"error"})})),!0}return!1}))},resetForm:function(){this.dialog=!1,this.$refs.registerForm.resetFields(),window.clearInterval(this.timer),this.time=60,this.buttonName="发送验证码",this.isDisabled=!1,this.registerForm={email:"",code:"",password:"",pass:""}}}},c=n,m=(r("1614"),r("2877")),d=Object(m["a"])(c,s,i,!1,null,"8629703a",null);t["default"]=d.exports}}]);