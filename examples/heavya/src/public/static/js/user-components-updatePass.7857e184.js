(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["user-components-updatePass"],{"8a58":function(e,s,t){"use strict";t.r(s);var o=function(){var e=this,s=e.$createElement,t=e._self._c||s;return t("div",{staticStyle:{display:"inline-block"}},[t("BaseModal",{attrs:{visible:e.dialog,title:e.title,width:"500px"},on:{"update:visible":function(s){e.dialog=s},close:e.resetForm,cancel:function(s){e.dialog=!1},ok:e.doSubmit}},[t("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"88px"}},[t("el-form-item",{attrs:{label:"旧密码",prop:"oldPass"}},[t("el-input",{staticStyle:{width:"370px"},attrs:{type:"password","auto-complete":"on"},model:{value:e.form.oldPass,callback:function(s){e.$set(e.form,"oldPass",s)},expression:"form.oldPass"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"新密码",prop:"newPass"}},[t("el-input",{staticStyle:{width:"370px"},attrs:{type:"password","auto-complete":"on"},model:{value:e.form.newPass,callback:function(s){e.$set(e.form,"newPass",s)},expression:"form.newPass"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"确认密码",prop:"confirmPass"}},[t("el-input",{staticStyle:{width:"370px"},attrs:{type:"password","auto-complete":"on"},model:{value:e.form.confirmPass,callback:function(s){e.$set(e.form,"confirmPass",s)},expression:"form.confirmPass"}})],1)],1)],1)],1)},r=[],a=t("4360"),i=t("c24f"),n=t("8de4"),l=t("f109"),c={components:{BaseModal:l["a"]},data:function(){var e=this,s=function(s,t,o){t?e.form.newPass!==t?o(new Error("两次输入的密码不一致")):o():o(new Error("请再次输入密码"))};return{loading:!1,dialog:!1,title:"修改密码",form:{oldPass:"",newPass:"",confirmPass:""},rules:{oldPass:[{required:!0,message:"请输入旧密码",trigger:"blur"}],newPass:[{required:!0,message:"请输入新密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}],confirmPass:[{required:!0,validator:s,trigger:"blur"}]}}},methods:{doSubmit:function(){var e=this;this.$refs.form.validate((function(s){if(s){e.loading=!0;var t={oldPass:Object(n["b"])(e.form.oldPass),newPass:Object(n["b"])(e.form.newPass)};return Object(i["e"])(t).then((function(){e.resetForm(),e.loading=!1,e.dialog=!1,e.$notify({title:"密码修改成功，请重新登录",type:"success",duration:1500}),setTimeout((function(){a["a"].dispatch("LogOut").then((function(){window.location.reload()}))}),1500)})).catch((function(s){e.loading=!1,e.$message({message:s.message,type:"error"})})),!0}return!1}))},resetForm:function(){this.$refs.form.resetFields(),this.form={oldPass:"",newPass:"",confirmPass:""}}}},m=c,d=t("2877"),u=Object(d["a"])(m,o,r,!1,null,null,null);s["default"]=u.exports}}]);