(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-pointCloud-components-create-dataset","dataset-pointCloud-editor-layout-Header","dataset-pointCloud-util"],{"438a":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("BaseModal",{class:{"el-modal__dark":t.state.dark},attrs:{visible:t.state.modalVisible,title:t.title,loading:t.state.confirmLoading,width:"700px",okText:"提交"},on:{"update:visible":function(e){return t.$set(t.state,"modalVisible",e)},cancel:function(e){t.state.modalVisible=!1},ok:t.onSubmit,close:t.onClose}},[n("el-form",{ref:"formRef",attrs:{model:t.modelState,rules:t.rules,"label-width":"100px"}},[t.state.difficultyCount?[n("el-form-item",{attrs:{label:"难例数量"}},[n("label",{staticStyle:{"font-size":"16px",color:"#abb9f2"}},[t._v(t._s(t.state.difficultyCount))])])]:t._e(),t._v(" "),n("el-form-item",{attrs:{label:"数据集名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入数据集名称","show-word-limit":""},model:{value:t.modelState.name,callback:function(e){t.$set(t.modelState,"name",e)},expression:"modelState.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"标签组",prop:"labelGroupId"}},[n("el-cascader",{staticStyle:{width:"100%","line-height":"32px"},attrs:{clearable:"",placeholder:"请选择标签组",options:t.labelGroupOptions,props:{expandTrigger:"hover"},"show-all-levels":!1,filterable:"",disabled:t.isDisabled},on:{change:t.handleGroupChange},model:{value:t.modelState.labelGroup,callback:function(e){t.$set(t.modelState,"labelGroup",e)},expression:"modelState.labelGroup"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea",placeholder:"数据集描述长度不能超过100字",maxlength:"100",rows:"3","show-word-limit":""},model:{value:t.modelState.remark,callback:function(e){t.$set(t.modelState,"remark",e)},expression:"modelState.remark"}})],1),t._v(" "),n("div",{class:{"border-primary":t.state.isShow,"border-base":!t.state.isShow},staticStyle:{"border-radius":"4px"}},[n("div",{staticClass:"flex flex-vertical-align pointer",staticStyle:{padding:"10px 10px"},on:{click:t.handleShow}},[n("span",[t.state.isShow?n("label",{staticClass:"el-icon-arrow-down"}):n("label",{staticClass:"el-icon-arrow-right"})]),t._v(" "),n("label",{staticClass:"pl-5"},[t._v("高级设置")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.state.isShow,expression:"state.isShow"}],style:{padding:"4px 11px"}},[n("p",[n("span",{staticStyle:{"margin-left":"20px"}},[t._v("标注范围(m)")]),t._v(" "),n("el-tooltip",{attrs:{effect:"dark",placement:"top",content:"标注坐标范围，坐标轴负方向请填写负值"}},[n("i",{staticClass:"el-icon-question"})])],1),t._v(" "),n("el-form-item",{attrs:{"label-width":"10px",error:t.scopeRules}},[n("div",{staticClass:"flex flex-between"},t._l(t.deepPage,(function(e){return n("div",{key:e.key,staticClass:"flex flex-center ml-10"},[n("label",{staticStyle:{width:"110px"}},[t._v(t._s(e.label))]),t._v(" "),n("el-input",{model:{value:t.modelState[e.key],callback:function(n){t.$set(t.modelState,e.key,n)},expression:"modelState[deep.key]"}})],1)})),0)])],1)])],2)],1)},o=[],r=n("ed09"),l=n("5c96"),i=n("2ef0"),u=n("54d4"),c=n("fcbd"),s=n("f109"),d=n("61f7"),p=n("3da5"),f=n("da2d");function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function O(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e=v(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function v(t){var e=y(t,"string");return"symbol"===b(e)?e:String(e)}function y(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==b(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var g={create:{title:"创建",apiFunc:u["d"]},edit:{title:"编辑",apiFunc:u["j"]},publish:{title:"难例发布",apiFunc:u["h"]}},T=f["statusValueMap"].NOT_SAMPLED,j=f["statusValueMap"].IMPORTING,_=f["statusValueMap"].UNLABELLED,C={name:"",remark:"",labelGroupId:void 0,labelGroup:void 0,scopeFront:0,scopeBehind:0,scopeLeft:0,scopeRight:0},L={components:{BaseModal:s["a"]},setup:function(t,e){var n=e.emit,a=[{value:"custom",label:"自定义标签组",disabled:!1,children:[]},{value:"system",label:"预置标签组",disabled:!1,children:[]}],o={0:"custom",1:"system"},u=Object(r["o"])(a),s=Object(r["o"])(null),f=Object(r["n"])({modalVisible:!1,modalTitle:"create",confirmLoading:!1,difficultyCount:0,status:0,isShow:!1,datasetId:null,labelGroupType:void 0,dark:!1}),b=Object(r["n"])(O({},C)),m=Object(r["a"])((function(){return"publish"===f.modalTitle?g[f.modalTitle].title:"".concat(g[f.modalTitle].title,"数据集")})),v=Object(r["a"])((function(){return"publish"===f.modalTitle||!([T,j,_].includes(f.status)||!f.status)})),y=Object(r["a"])((function(){var t=b.scopeFront,e=b.scopeBehind,n=b.scopeLeft,a=b.scopeRight,o=[t,e,n,a],r=o.filter((function(t){return Object(i["isNil"])(t)||""===t})),l=o.filter((function(t){return!Object(i["isNumber"])(Number(t))||!(t>=-999&&t<=999)}));return r.length?"标注范围不能为空":l.length?"标注范围为数值型,区间范围为-999 - 999":""})),L=[{label:"前(maxX)",key:"scopeFront"},{label:"后(minX)",key:"scopeBehind"},{label:"左(maxY)",key:"scopeLeft"},{label:"右(minY)",key:"scopeRight"}],S={name:[{required:!0,message:"请输入数据集名称",trigger:["change","blur"]},{validator:d["p"],trigger:["change","blur"]}],labelGroupId:[{required:!0,message:"请选择标签组",trigger:"change"}]},w=Object.keys(b),I=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(b,O({},Object(i["pick"])(e,w))),Object.assign(f,{modalVisible:!0,modalTitle:t,status:(null===e||void 0===e?void 0:e.status)||0,datasetId:e.id,labelGroupType:o[null===e||void 0===e?void 0:e.labelGroupType],difficultyCount:"publish"===t?e.difficultyCount:0,dark:null===e||void 0===e?void 0:e.dark}),f.labelGroupType&&b.labelGroupId&&(b.labelGroup=[f.labelGroupType,b.labelGroupId])},x=function(){f.isShow=!f.isShow},D=function(t){Object.assign(b,{labelGroupId:null!==t&&void 0!==t&&t.length?t[1]:void 0,labelGroup:null!==t&&void 0!==t&&t.length?t:void 0})},P=function(){s.value.validate((function(t){if(t&&!y.value){var e,a;f.confirmLoading=!0;var o=Object(i["cloneDeep"])(b);Reflect.deleteProperty(o,"labelGroup");var r="create"===f.modalTitle?o:O(O({},o),{},h({},"edit"===f.modalTitle?"id":"datasetId",f.datasetId));null===(e=g[f.modalTitle])||void 0===e||null===(a=e.apiFunc)||void 0===a||a.call(e,r).then((function(){f.modalVisible=!1,l["Message"].success("".concat(g[f.modalTitle].title,"成功")),n("success")})).finally((function(){f.confirmLoading=!1}))}}))},G=function(){f.isShow=!1,s.value.resetFields(),Object.assign(b,C)},k=function(t){return t.map((function(t){return{value:t.id,label:t.name,disabled:!1}}))};return Object(r["k"])((function(){var t=[0,1];t.forEach((function(t){Object(c["g"])({type:t,dataType:p["labelGroupTypeMap"].POINT_CLOUD.value,annotateType:p["annotationMap"].ObjectDetection.code}).then((function(e){var n=k(e);u.value[t].children=n}))}))})),{formRef:s,state:f,modelState:b,title:m,isDisabled:v,labelGroupOptions:u,deepPage:L,rules:S,scopeRules:y,showModal:I,handleShow:x,handleGroupChange:D,onSubmit:P,onClose:G}}},S=L,w=(n("f2733"),n("2877")),I=Object(w["a"])(S,a,o,!1,null,"3acb325c",null);e["default"]=I.exports},"4ea8":function(t,e,n){},"54d4":function(t,e,n){"use strict";n.d(e,"m",(function(){return r})),n.d(e,"d",(function(){return l})),n.d(e,"j",(function(){return i})),n.d(e,"h",(function(){return u})),n.d(e,"e",(function(){return c})),n.d(e,"q",(function(){return s})),n.d(e,"p",(function(){return d})),n.d(e,"b",(function(){return p})),n.d(e,"c",(function(){return f})),n.d(e,"o",(function(){return b})),n.d(e,"n",(function(){return m})),n.d(e,"f",(function(){return O})),n.d(e,"k",(function(){return h})),n.d(e,"a",(function(){return v})),n.d(e,"r",(function(){return y})),n.d(e,"g",(function(){return g})),n.d(e,"i",(function(){return T})),n.d(e,"l",(function(){return j}));var a=n("b775"),o=n("f121");function r(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud"),method:"get",params:t})}function l(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud"),method:"post",data:t})}function i(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud"),method:"put",data:t})}function u(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files/difficult/publish"),method:"post",data:t})}function c(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud"),method:"delete",data:{ids:t}})}function s(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/queryByIds"),method:"get",params:t})}function d(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/publish"),method:"post",data:t})}function p(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/auto"),method:"post",data:t})}function f(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/stop"),method:"post",data:t})}function b(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/logs"),method:"get",params:t})}function m(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/pod/").concat(t),method:"get"})}function O(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/details/").concat(t),method:"get"})}function h(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files"),method:"get",params:t})}function v(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files/info"),method:"get",params:t})}function y(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files/save"),method:"post",data:t})}function g(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files/difficult"),method:"post",data:t})}function T(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/files/done"),method:"post",data:t})}function j(t){return Object(a["a"])({url:"/".concat(o["a"].POINT_CLOUD,"/datasets/pointCloud/list"),method:"get",params:t})}},da2d:function(t,e,n){"use strict";n.r(e),n.d(e,"statusMap",(function(){return a})),n.d(e,"statusValueMap",(function(){return o})),n.d(e,"fileStatusMap",(function(){return r})),n.d(e,"getListColumns",(function(){return i})),n.d(e,"listQueryFormItems",(function(){return u})),n.d(e,"getStatisticsColumns",(function(){return c})),n.d(e,"editorSymbol",(function(){return s}));var a={1001:{text:"未采样",color:"purple"},1002:{text:"导入中",color:"orange"},1003:{text:"未标注",color:"purple"},1004:{text:"自动标注中",color:"orange"},1005:{text:"自动标注停止",color:"default"},1006:{text:"自动标注失败",color:"red"},1007:{text:"标注中",color:"orange"},1008:{text:"自动标注完成",color:"blue"},1009:{text:"难例发布中",color:"orange"},1010:{text:"难例发布失败",color:"red"},1011:{text:"已发布",color:"green"}},o={NOT_SAMPLED:1001,IMPORTING:1002,UNLABELLED:1003,AUTO_LABELING:1004,AUTO_LABEL_STOP:1005,AUTO_LABEL_FAILED:1006,LABELING:1007,AUTO_LABEL_COMPLETE:1008,DIFFICULT_CASE_PUBLISHING:1009,DIFFICULT_CASE_FAILED_TO_PUBLISH:1010,PUBLISHED:1011},r={101:"未标注",102:"自动标注完成",103:"手动标注中",104:"手动标注完成",undefined:"不限"},l=[{label:"全部",value:null}].concat(Object.keys(a).map((function(t){return{label:a[t].text,value:t}}))),i=function(t){return[{prop:"selections",type:"selection",fixed:!0,selectable:function(t){var e=t.status;return![o.AUTO_LABELING,o.DIFFICULT_CASE_PUBLISHING].includes(e)}},{label:"ID",prop:"id",width:80,sortable:"custom",fixed:!0},{label:"名称",prop:"name",minWidth:"150px",type:"link",func:t,fixed:!0},{label:"难例数量",prop:"difficultyCount",minWidth:"100px"},{label:"状态",prop:"status",minWidth:"200px",dropdownList:l},{label:"描述",prop:"remark",minWidth:"150px"},{label:"创建时间",prop:"createTime",type:"time",width:300},{label:"更新时间",prop:"updateTime",type:"time",width:300},{label:"操作",prop:"action",width:300,fixed:"right"}]},u=[{prop:"name",placeholder:"输入名称或ID查询",class:"w-200",change:"query"},{type:"button",btnText:"重置",func:"resetQuery"},{type:"button",btnText:"搜索",btnType:"primary",func:"query"}],c=function(){return[{label:"标签",prop:"label"},{label:"实体数量",prop:"count"}]},s=Symbol("editor")},f2733:function(t,e,n){"use strict";n("4ea8")},fcbd:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"e",(function(){return l})),n.d(e,"c",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"g",(function(){return d})),n.d(e,"f",(function(){return p})),n.d(e,"h",(function(){return f}));var a=n("b775"),o=n("f121");function r(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup"),method:"post",data:t})}function l(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/").concat(t.id),method:"put",data:t})}function i(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup"),method:"delete",data:{ids:t}})}function u(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/copy"),method:"post",data:t})}function c(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/convertPreset"),method:"post",data:t})}function s(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/query"),method:"get",params:t})}function d(t){return new Promise((function(t,e){setTimeout((function(){t([])}),200)}))}function p(t){return Object(a["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/").concat(t),method:"get"})}function f(t){return a["a"].post("/".concat(o["a"].DATA,"/labelGroup/import"),t,{headers:{"Content-Type":"multipart/form-data"}})}e["d"]={list:s,add:r,del:i,edit:l}}}]);