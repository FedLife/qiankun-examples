(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["labelGroup","labelGroup-labelGroupAction","dataset-style-list-scss"],{4965:function(e,t,r){"use strict";r.r(t);var n=r("2638"),o=r.n(n),a=r("806c");r("ed08");function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function u(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t=s(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function s(e){var t=p(e,"string");return"symbol"===l(t)?t:String(t)}function p(e,t){if("object"!==l(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}t["default"]={name:"LabelGroupAction",functional:!0,props:{goDetail:Function,doEdit:Function,doFork:Function,doConvert:Function},render:function(e,t){var r=t.data,n=t.props,l=n.doFork,i=n.goDetail,c=n.doEdit,s=n.doConvert,p=u(u({},r),{},{scopedSlots:{header:function(){return e("span",["操作"])},default:function(t){var r=t.row,n={props:{type:"text",disabled:r.disabledAction},style:{marginLeft:"0px",marginRight:"10px"}},u=e("el-button",o()([{},n,{on:{click:function(){return i(r)}}}]),["查看详情"]),p=!0,d=e("el-button",o()([{},n,{on:{click:function(){return c(r)}}}]),["编辑"]),f=!0,b=e("el-button",o()([{},n,{on:{click:function(){return l(r)}}}]),["复制"]),m=!0,h=e("el-button",o()([{},n,{on:{click:function(){return s(r)}}}]),["设为预置"]),y=Object(a["h"])(["isAdmin"]),g=y.isAdmin;return m=g,1===r.type&&(p=!1,f=!1,m=!1),e("span",[u,p&&d,f&&b,m&&h])}}});return e("el-table-column",p)}}},d744:function(e,t,r){e.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}},d7e2:function(e,t,r){"use strict";r.r(t);var n,o=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"head-container"},[r("cdOperation",{attrs:{addProps:e.operationProps}},[r("el-button",{staticClass:"filter-item",attrs:{slot:"left",type:"primary",icon:"el-icon-plus"},on:{click:e.doCreate},slot:"left"},[e._v("\n        创建标签组\n      ")]),e._v(" "),r("span",{attrs:{slot:"right"},slot:"right"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"输入名称或ID查询标签组"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.crud.toQuery(t)}},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}}),e._v(" "),r("rrOperation",{on:{resetQuery:e.onResetQuery}})],1)],1)],1),e._v(" "),r("div",{staticClass:"mb-10 flex flex-between"},[r("el-tabs",{staticClass:"eltabs-inlineblock",attrs:{value:e.activePanelLabelGroup},on:{"tab-click":e.handlePanelClick}},[r("el-tab-pane",{attrs:{label:"我的标签组",name:"0"}}),e._v(" "),r("el-tab-pane",{attrs:{label:"预置标签组",name:"1"}})],1),e._v(" "),r("div",[r("el-button",{staticClass:"filter-item with-border",staticStyle:{padding:"8px"},attrs:{icon:"el-icon-refresh"},on:{click:e.onResetFresh}})],1)],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.crud.loading,expression:"crud.loading"}],ref:"table",attrs:{data:e.crud.data,"highlight-current-row":""},on:{"selection-change":e.crud.selectionChangeHandler,"sort-change":e.crud.sortChange}},[r("el-table-column",{attrs:{fixed:"",type:"selection","min-width":"40"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"id",width:"70",label:"ID",sortable:"custom",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"name",label:"名称","min-width":"148",align:"left","class-name":"dataset-name-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-link",{staticClass:"mr-10 name-col",attrs:{type:"primary"},on:{click:function(r){return e.goDetail(t.row)}}},[e._v(e._s(t.row.name))])]}}])}),e._v(" "),r("el-table-column",{attrs:{prop:"labelGroupType",formatter:e.parseLabelGroupType,"min-width":"80",align:"left"}},[r("template",{slot:"header"},[r("dropdown-header",{attrs:{title:"类型",list:e.labelGroupTypeList,filtered:!e.isNil(e.labelGroupType)},on:{command:function(t){return e.filter("labelGroupType",t)}}})],1)],2),e._v(" "),r("el-table-column",{attrs:{prop:"count","min-width":"80",label:"标签数量",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"updateTime","min-width":"160",label:"更新时间",formatter:e.formatDate,sortable:"custom",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"createTime","min-width":"160",label:"创建时间",formatter:e.formatDate,sortable:"custom",align:"left"}}),e._v(" "),r("el-table-column",{attrs:{prop:"remark","min-width":"220",label:"标签组描述",align:"left","show-overflow-tooltip":""}}),e._v(" "),r("LabelGroupAction",{attrs:{fixed:"right","min-width":"220",align:"left",goDetail:e.goDetail,doEdit:e.doEdit,doFork:e.showFork,doConvert:e.doConvert}})],1),e._v(" "),r("el-pagination",{staticStyle:{"margin-top":"8px"},style:"text-align:"+e.crud.props.paginationAlign+";",attrs:{"page-size":e.crud.page.size,"page-sizes":[10,20,50],total:e.crud.page.total,"current-page":e.crud.page.current,layout:"total, prev, pager, next, sizes"},on:{"update:pageSize":function(t){return e.$set(e.crud.page,"size",t)},"update:page-size":function(t){return e.$set(e.crud.page,"size",t)},"update:currentPage":function(t){return e.$set(e.crud.page,"current",t)},"update:current-page":function(t){return e.$set(e.crud.page,"current",t)},"size-change":function(t){return e.crud.sizeChangeHandler(t)},"current-change":e.crud.pageChangeHandler}}),e._v(" "),r("BaseModal",{attrs:{visible:e.actionModal.show&&"fork"===e.actionModal.type,loading:e.actionModal.showOkLoading,title:"复制标签组"},on:{change:e.handleCancel,ok:e.handleFork}},[r("el-form",{ref:"form",attrs:{model:e.forkForm,rules:e.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"标签组名称不能超过50字",maxlength:"50"},model:{value:e.forkForm.name,callback:function(t){e.$set(e.forkForm,"name",t)},expression:"forkForm.name"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"类型",prop:"labelGroupType"}},[r("el-input",{attrs:{disabled:""},model:{value:e.forkLabelGroupType,callback:function(t){e.forkLabelGroupType=t},expression:"forkLabelGroupType"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"描述",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"标签组描述长度不能超过100字",maxlength:"100",rows:"3","show-word-limit":""},model:{value:e.forkForm.remark,callback:function(t){e.$set(e.forkForm,"remark",t)},expression:"forkForm.remark"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"标签",prop:"labels"}},[r("el-input",{attrs:{disabled:!0,type:"textarea",placeholder:"JSON5格式",rows:"6"},model:{value:e.forkForm.labels,callback:function(t){e.$set(e.forkForm,"labels",t)},expression:"forkForm.labels"}})],1)],1)],1)],1)},a=[],l=r("2ef0"),i=r("2f62"),u=r("fcbd"),c=r("c6db"),s=r("4f59"),p=r("5897"),d=r("ed08"),f=r("61f7"),b=r("4360"),m=r("3da5"),h=r("aaa4"),y=r("f109"),g=r("4965");r("d744");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function O(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?O(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):O(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function k(e,t,r){return t=j(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j(e){var t=G(e,"string");return"symbol"===v(t)?t:String(t)}function G(e,t){if("object"!==v(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!==v(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var T={id:null,name:null,labels:null,remark:"",type:0},P={name:"LabelGroup",components:{cdOperation:p["a"],rrOperation:s["a"],BaseModal:y["a"],LabelGroupAction:g["default"],DropdownHeader:h["a"]},cruds:function(){return Object(c["b"])({title:"标签组管理",crudMethod:w({},u["d"]),optShow:{add:!1},queryOnPresenterCreated:!1})},mixins:[Object(c["f"])(),Object(c["d"])(),Object(c["c"])(T),Object(c["a"])()],data:function(){return{forkVisible:!1,labelGroupType:null,actionModal:{show:!1,row:void 0,showOkLoading:!1,type:null},forkForm:{id:null,name:null,labels:null,labelGroupType:null,remark:null,type:0},rules:{name:[{required:!0,message:"请输入标签组名称",trigger:["change","blur"]},{validator:f["p"],trigger:["change","blur"]}],labelGroupType:[{required:!0,message:"请选择标签组类型",trigger:["change","blur"]}],remark:[{required:!1,message:"请输入标签组描述信息",trigger:"blur"}]}}},computed:w(w({},Object(i["e"])({activePanelLabelGroup:function(e){return String(e.dataset.activePanelLabelGroup)}})),{},{isNil:function(){return l["isNil"]},localQuery:function(){return{type:this.activePanelLabelGroup||0}},labelGroupTypeList:function(){return[{label:"全部",value:null}].concat(Object.values(m["labelGroupTypeMap"]))},operationProps:function(){return 1===Number(this.activePanelLabelGroup)?{disabled:!0}:void 0},forkLabelGroupType:function(){return this.getLabelGroupLabel(this.forkForm.labelGroupType)}}),created:function(){this.crud.toQuery()},mounted:function(){var e=this;"add"===this.$route.params.type&&setTimeout((function(){e.crud.toAdd()}),500)},methods:(n={},k(n,c["b"].HOOK.beforeRefresh,(function(){this.crud.query=w(w({},this.query),this.localQuery)})),k(n,"getLabelGroupLabel",(function(e){return(Object.values(m["labelGroupTypeMap"]).find((function(t){return t.value===e}))||{}).label})),k(n,"onResetQuery",(function(){this.query={},this.crud.order=null,this.crud.sort=null,this.crud.params={},this.crud.page.current=1,this.labelGroupType=null,this.$refs.table.clearSort()})),k(n,"onResetFresh",(function(){this.onResetQuery(),this.crud.refresh()})),k(n,"handlePanelClick",(function(e){this.onResetQuery(),b["a"].dispatch("dataset/togglePanelLabelGroup",Number(e.name)),Object.assign(this.localQuery,{type:Number(e.name)}),this.crud.refresh()})),k(n,"formatDate",(function(e,t,r){return Object(l["isNil"])(r)?r:Object(d["Q"])(r)})),k(n,"parseLabelGroupType",(function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.getLabelGroupLabel(r)})),k(n,"filter",(function(e,t){this[e]=t,this.crud.params[e]=t,this.crud.page.current=1,this.crud.toQuery()})),k(n,"doCreate",(function(){this.$router.push({path:"/data/labelgroup/create"})})),k(n,"goDetail",(function(e){this.$router.push({path:"/data/labelgroup/detail",query:{id:e.id}})})),k(n,"doEdit",(function(e){this.$router.push({path:"/data/labelgroup/edit",query:{id:e.id}})})),k(n,"doConvert",(function(e){var t=this;Object(u["b"])({labelGroupId:e.id}).then((function(){t.$message({message:"成功转为预置标签组",type:"success"})})).catch((function(e){t.$message({message:e.message||"转为预置标签组失败",type:"error"})})),setTimeout((function(){t.onResetFresh()}),500)})),k(n,"showFork",(function(e){var t=this;this.showActionModal(e,"fork"),Object(u["f"])(e.id).then((function(r){Object.assign(t.forkForm,{name:r.name,remark:r.remark,type:r.type,labels:JSON.stringify(r.labels),labelGroupType:r.labelGroupType,id:e.id})}))})),k(n,"handleCancel",(function(){this.resetActionModal()})),k(n,"handleFork",(function(){var e=this;Object(u["c"])(this.forkForm),this.resetActionModal(),setTimeout((function(){e.onResetFresh()}),500)})),k(n,"showActionModal",(function(e,t){this.actionModal={show:!0,row:e,showOkLoading:!1,type:t}})),k(n,"resetActionModal",(function(){this.actionModal={show:!1,row:void 0,showOkLoading:!1,type:null}})),n)},x=P,A=r("2877"),S=Object(A["a"])(x,o,a,!1,null,null,null);t["default"]=S.exports},fcbd:function(e,t,r){"use strict";r.d(t,"a",(function(){return a})),r.d(t,"e",(function(){return l})),r.d(t,"c",(function(){return u})),r.d(t,"b",(function(){return c})),r.d(t,"g",(function(){return p})),r.d(t,"f",(function(){return d})),r.d(t,"h",(function(){return f}));var n=r("b775"),o=r("f121");function a(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup"),method:"post",data:e})}function l(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/").concat(e.id),method:"put",data:e})}function i(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup"),method:"delete",data:{ids:e}})}function u(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/copy"),method:"post",data:e})}function c(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/convertPreset"),method:"post",data:e})}function s(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/query"),method:"get",params:e})}function p(e){return new Promise((function(e,t){setTimeout((function(){e([])}),200)}))}function d(e){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/labelGroup/").concat(e),method:"get"})}function f(e){return n["a"].post("/".concat(o["a"].DATA,"/labelGroup/import"),e,{headers:{"Content-Type":"multipart/form-data"}})}t["d"]={list:s,add:a,del:i,edit:l}}}]);