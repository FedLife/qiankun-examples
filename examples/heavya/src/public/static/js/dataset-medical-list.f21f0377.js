(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-medical-list","dataset-components-tenant","dataset-medical-auto-annotate-filter","dataset-style-list-scss"],{"179d":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"flex flex-vertical-align"},[r("div",{staticClass:"mr-4 f14"},[t._v("切换场景：")]),t._v(" "),r("InfoSelect",{attrs:{clearable:!1,width:"150px",dataSource:t.datasetListTypeOptions},on:{change:t.handleChange},model:{value:t.state.datasetListType,callback:function(e){t.$set(t.state,"datasetListType",e)},expression:"state.datasetListType"}})],1)},o=[],a=r("ed09"),i=r("ba8f"),l=r("3da5"),s={name:"TenantSelector",components:{InfoSelect:i["a"]},props:{datasetListType:String},setup:function(t,e){var r=e.root.$router,n=[{value:0,label:"视觉/语音/文本"},{value:1,label:"医学影像"},{value:2,label:"点云"}],o=Object(a["n"])({datasetListType:Number(t.datasetListType)}),i=function(t){o.datasetListType=t,localStorage.setItem("datasetListType",o.datasetListType),r.push({path:l["pushUrl"][t]})};return{handleChange:i,datasetListTypeOptions:n,state:o}}},c=s,u=r("2877"),f=Object(u["a"])(c,n,o,!1,null,null,null);e["default"]=f.exports},1853:function(t,e,r){"use strict";r.r(e);var n,o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-container"},[r("CreateDataset",{attrs:{visible:t.importVisible,toggleVisible:t.handleClose,onResetFresh:t.onResetFresh}}),t._v(" "),r("EditDataset",{attrs:{visible:t.editVisible,row:t.editRow,handleCancel:t.handleEditClose,handleOk:t.handleEditDataset}}),t._v(" "),r("AutoAnnotate",{key:t.autoAnnotateKey,attrs:{visible:t.actionModal.show&&"autoAnnotate"===t.actionModal.type,loading:t.actionModal.showOkLoading,row:t.actionModal.row,handleCancel:t.handleCancel},on:{ok:t.startAutoAnnotate}}),t._v(" "),r("div",{staticClass:"head-container"},[r("cdOperation",{attrs:{addProps:t.operationProps,delProps:t.operationProps}},[r("el-button",{staticClass:"filter-item",attrs:{slot:"left",icon:"el-icon-upload",round:""},on:{click:t.toggleImport},slot:"left"},[t._v("\n        创建数据集\n      ")]),t._v(" "),r("span",{attrs:{slot:"right"},slot:"right"},[r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入名称或ID查询"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.crud.toQuery(e)}},model:{value:t.query.name,callback:function(e){t.$set(t.query,"name",e)},expression:"query.name"}}),t._v(" "),r("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{clearable:"",placeholder:"输入PatientID"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.crud.toQuery(e)}},model:{value:t.query.patientID,callback:function(e){t.$set(t.query,"patientID",e)},expression:"query.patientID"}}),t._v(" "),r("rrOperation",{on:{resetQuery:t.onResetQuery}})],1)],1)],1),t._v(" "),r("div",{staticClass:"mb-10 flex flex-between"},[r("el-tabs",{staticClass:"eltabs-inlineblock",attrs:{value:t.activePanel},on:{"tab-click":t.handlePanelClick}},[r("el-tab-pane",{attrs:{label:"我的数据集",name:"0"}}),t._v(" "),r("el-tab-pane",{attrs:{label:"预置数据集",name:"2"}})],1),t._v(" "),r("div",{staticClass:"flex flex-vertical-align"},[r("TenantSelector",{staticClass:"mr-8",attrs:{datasetListType:t.datasetListType}}),t._v(" "),r("el-tooltip",{attrs:{effect:"dark",content:"刷新",placement:"top"}},[r("el-button",{staticClass:"filter-item with-border",staticStyle:{padding:"8px"},attrs:{icon:"el-icon-refresh"},on:{click:t.onResetFresh}})],1)],1)],1),t._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.crud.loading,expression:"crud.loading"}],ref:"table",attrs:{data:t.crud.data,"highlight-current-row":""},on:{"selection-change":t.crud.selectionChangeHandler,"sort-change":t.crud.sortChange}},[r("el-table-column",{attrs:{fixed:"",type:"selection","min-width":"40",selectable:t.canSelect}}),t._v(" "),r("el-table-column",{attrs:{fixed:"",prop:"id",width:"88",label:"ID",sortable:"custom",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v("\n          "+t._s(e.row.id)+"\n        ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{fixed:"","show-overflow-tooltip":"",prop:"name",label:"名称","min-width":"160",align:"left","class-name":"dataset-name-col"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-link",{staticClass:"mr-10 name-col",attrs:{type:"primary"},on:{click:function(r){return t.goDetail(e.row)}}},[t._v(t._s(e.row.name))]),t._v(" "),r("Edit",{staticClass:"edit-icon",attrs:{row:e.row,valueBy:"name",title:"修改数据集名称"},on:{handleOk:t.handleEditDatasetName}})]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"annotateType",formatter:t.parseAnnotateType,align:"left","min-width":"100"}},[r("template",{slot:"header"},[r("dropdown-header",{attrs:{title:"标注类型",list:t.annotateTypeList,filtered:!t.isNil(t.annotateType)},on:{command:function(e){return t.filter("annotateType",e)}}})],1)],2),t._v(" "),r("el-table-column",{attrs:{prop:"progress","min-width":"200",label:"进度",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[null!==e.row.progress?r("div",{staticClass:"flex progress-wrap"},[r("i",{directives:[{name:"show",rawName:"v-show",value:e.row.pollIng,expression:"scope.row.pollIng"}],staticClass:"el-icon-loading"}),t._v(" "),r("el-popover",{attrs:{placement:"top-start",trigger:"hover","popper-class":"f1"}},[r("TableTooltip",{attrs:{className:"progress-tip",keys:t.progressKeys,data:t.getProgressData(e.row.progress),keyAccessor:t.keyAccessor,valueAccessor:t.valueAccessor}}),t._v(" "),r("el-progress",{attrs:{slot:"reference",percentage:t.getProgress(e.row),color:t.progressFill(t.datasetStatusMap[e.row.status].status)},slot:"reference"})],1)],1):r("div",{staticClass:"flex progress-wrap"},[r("i",{staticClass:"el-icon-loading"}),t._v(" "),r("span",[r("el-progress",{attrs:{slot:"reference",percentage:0},slot:"reference"})],1)])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"patientID",width:"160",label:"PatientID",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("span",[t._v("\n          "+t._s(e.row.patientID)+"\n        ")])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"studyInstanceUID","min-width":"150",label:"StudyInstanceUID",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{content:e.row.studyInstanceUID,enterable:"",placement:"top"}},[r("div",{staticClass:"ellipsis",style:{width:"100%"}},[t._v("\n            "+t._s(e.row.studyInstanceUID)+"\n          ")])])]}}])}),t._v(" "),r("el-table-column",{attrs:{prop:"seriesInstanceUID","min-width":"150",label:"SeriesInstanceUID",align:"left"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-tooltip",{attrs:{content:e.row.seriesInstanceUID,enterable:"",placement:"top"}},[r("div",{staticClass:"ellipsis",style:{width:"100%"}},[t._v("\n            "+t._s(e.row.seriesInstanceUID)+"\n          ")])])]}}])}),t._v(" "),r("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"modality",formatter:t.parseModality,"min-width":"104",label:"Modality",align:"left"}},[r("template",{slot:"header"},[r("dropdown-header",{attrs:{title:"Modality",list:t.modalityList,filtered:!t.isNil(t.modality)},on:{command:function(e){return t.filter("modality",e)}}})],1)],2),t._v(" "),r("el-table-column",{attrs:{prop:"bodyPartExamined","min-width":"150",label:"BodyPart",align:"left"}},[r("template",{slot:"header"},[r("dropdown-header",{attrs:{title:"BodyPart",list:t.bodyPartList,filtered:!t.isNil(t.bodyPartExamined)},on:{command:function(e){return t.filter("bodyPartExamined",e)}}})],1)],2),t._v(" "),r("Status",{attrs:{prop:"status","min-width":"115",label:"状态",align:"left",statusList:t.statusList,filterByDatasetStatus:t.filterByDatasetStatus,datasetStatusFilter:t.datasetStatusFilter}}),t._v(" "),r("el-table-column",{attrs:{prop:"remark","min-width":"200",label:"数据集描述",align:"left","show-overflow-tooltip":""}}),t._v(" "),r("Action",{attrs:{fixed:"right","min-width":"200",align:"left",stopRunning:t.stopRunning,goDetail:t.goDetail,autoAnnotate:t.showAutoAnnotate,editDataset:t.toggleEdit}})],1),t._v(" "),r("el-pagination",{staticStyle:{"margin-top":"8px"},style:"text-align:"+t.crud.props.paginationAlign+";",attrs:{"page-size":t.crud.page.size,"page-sizes":[10,20,50],total:t.crud.page.total,"current-page":t.crud.page.current,layout:"total, prev, pager, next, sizes"},on:{"update:pageSize":function(e){return t.$set(t.crud.page,"size",e)},"update:page-size":function(e){return t.$set(t.crud.page,"size",e)},"update:currentPage":function(e){return t.$set(t.crud.page,"current",e)},"update:current-page":function(e){return t.$set(t.crud.page,"current",e)},"size-change":function(e){return t.crud.sizeChangeHandler(e)},"current-change":t.crud.pageChangeHandler}})],1)},a=[],i=r("5c96"),l=r("2f62"),s=r("2ef0"),c=r("0903"),u=r("c6db"),f=r("4f59"),d=r("5897"),p=r("9354"),h=r("aaa4"),m=r("3da5"),y=r("e3a3"),v=r("ed08"),b=r("d294"),g=r("4360"),w=r("63e7"),O=r("9d1f"),j=r("80b3"),S=r("179d"),T=r("bd24"),A=r("9838"),x=r("d304");r("d744");function P(t){return P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P(t)}function _(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */_=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(L){s=function(t,e,r){return t[e]=r}}function c(t,e,r,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),l=new A(o||[]);return n(i,"_invoke",{value:O(t,r,l)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=c;var f={};function d(){}function p(){}function h(){}var m={};s(m,a,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(x([])));v&&v!==e&&r.call(v,a)&&(m=v);var b=h.prototype=d.prototype=Object.create(m);function g(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(n,a,i,l){var s=u(t[n],t,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==P(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,l)}),(function(t){o("throw",t,i,l)})):e.resolve(f).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,l)}))}l(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function O(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=j(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function j(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function T(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function A(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function x(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return p.prototype=h,n(b,"constructor",{value:h,configurable:!0}),n(h,"constructor",{value:p,configurable:!0}),p.displayName=s(h,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===p||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,h):(t.__proto__=h,s(t,l,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},g(w.prototype),s(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new w(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(b),s(b,l,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=x,A.prototype={constructor:A,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),T(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;T(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function k(t,e,r,n,o,a,i){try{var l=t[a](i),s=l.value}catch(c){return void r(c)}l.done?e(s):Promise.resolve(s).then(n,o)}function L(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){k(a,n,o,i,l,"next",t)}function l(t){k(a,n,o,i,l,"throw",t)}i(void 0)}))}}function E(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function N(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?E(Object(r),!0).forEach((function(e){D(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):E(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function D(t,e,r){return e=I(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function I(t){var e=C(t,"string");return"symbol"===P(e)?e:String(e)}function C(t,e){if("object"!==P(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==P(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var M={id:null,patientID:null,studyInstanceUID:null,seriesInstanceUID:null,annotateType:null,modality:null,bodyPartExamined:null,type:0},F={name:"MedicalDataset",components:{cdOperation:d["a"],rrOperation:f["a"],Edit:y["a"],TenantSelector:S["default"],Status:T["default"],Action:A["default"],TableTooltip:b["b"],DropdownHeader:h["a"],CreateDataset:O["default"],EditDataset:x["default"],AutoAnnotate:j["default"]},beforeRouteEnter:function(t,e,r){1!==Object(m["getDatasetType"])()?r("/data/datasets"):(t.meta.activeMenu="/data/datasets",r())},cruds:function(){return Object(u["b"])({title:"BF",crudMethod:N({},c["c"]),optShow:{add:!1},queryOnPresenterCreated:!1})},mixins:[Object(u["f"])(),Object(u["d"])(),Object(u["c"])(M),Object(u["a"])(),p["a"]],data:function(){return{importVisible:!1,editVisible:!1,editRow:null,datasetListType:"1",patientID:null,studyInstanceUID:null,seriesInstanceUID:null,annotateType:null,modality:null,bodyPartExamined:null,datasetStatusFilter:"all",progressKeys:Object.keys(w["medicalProgressMap"]),datasetStatusMap:m["datasetStatusMap"],autoTimer:{},actionModal:{show:!1,row:void 0,showOkLoading:!1,type:null},autoAnnotateKey:1}},computed:N(N({},Object(l["e"])({activePanel:function(t){return String(t.dataset.activePanelMedical)}})),{},{isNil:function(){return s["isNil"]},localQuery:function(){return{type:this.activePanel||0}},operationProps:function(){return Object(m["isPresetDataset"])(this.activePanel)?{disabled:!0}:void 0},annotateTypeList:function(){var t=Object.keys(w["medicalFirstLevelCodeMap"]).map((function(t){return{label:w["medicalFirstLevelCodeMap"][t].name,value:Number(t)}}));return[{label:"全部",value:null}].concat(t)},modalityList:function(){var t=Object.keys(w["modalityMap"]).map((function(t){return{label:w["modalityMap"][t],value:t}}));return[{label:"ALL",value:null}].concat(t)},bodyPartList:function(){var t=Object.keys(w["bodyPartMap"]).map((function(t){return{label:w["bodyPartMap"][t],value:t}}));return[{label:"ALL",value:null}].concat(t)},statusList:function(){var t=Object.keys(w["medicalStatusMap"]).map((function(t){return{label:w["medicalStatusMap"][t].name,value:Number(t)}}));return[{label:"全部",value:"all"}].concat(t)}}),watch:{"crud.data":function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(t.length>0&&(r.length!==t.length||!Object(v["lb"])(r,t,"id")||r.some((function(t){return t.pollIng})))){var n=t.filter((function(t){return Object(m["isStatus"])(t,"AUTO_ANNOTATING")}));Promise.all(n.map((function(t){var r;return e.$set(t,"pollIng",!0),e.poll(t,null===(r=m["datasetStatusMap"][t.status])||void 0===r?void 0:r.status)})))}}},created:function(){this.crud.toQuery()},beforeDestroy:function(){var t=this;Object.keys(this.autoTimer).forEach((function(e){return clearTimeout(t.autoTimer[e])}))},methods:(n={keyAccessor:function(t){return w["medicalProgressMap"][t]},valueAccessor:function(t,e,r){return r[t]}},D(n,u["b"].HOOK.beforeRefresh,(function(){this.crud.query=N(N({},this.query),this.localQuery)})),D(n,u["b"].HOOK.afterRefresh,(function(){var t=this.crud.data;this.queryRowProgress(t.map((function(t){return t.id})))})),D(n,"canSelect",(function(t){return!(t.pollIng||Object(m["isStatus"])(t,"AUTO_ANNOTATING"))})),D(n,"handleEditDatasetName",(function(t,e){var r=this,n={medicalId:e.id,name:t};Object(c["d"])(n).then((function(){var t;(r.crud.status.edit=u["b"].STATUS.NORMAL,r.$set(e,"name",n.name),e.pollIng)&&r.poll(e,null===(t=m["datasetStatusMap"][e.status])||void 0===t?void 0:t.status)}))})),D(n,"handleEditDataset",(function(t,e){var r=this,n={medicalId:e.id,name:t.name,remark:t.remark,type:0};return Object(c["d"])(n).then((function(){r.$message({message:"数据集修改成功",type:"success"})})).finally((function(){r.editRow=null,r.toggleEdit(),r.onResetFresh()}))})),D(n,"stopRunning",(function(t){var e=this;return Object(c["m"])(t.id).then((function(){e.$message({message:"进行中的任务已停止",type:"success"})})).catch((function(t){e.$message({message:t.message||"停止失败",type:"error"})})).finally((function(){return e.crud.refresh()}))})),D(n,"goDetail",function(){var t=L(_().mark((function t(e){return _().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!Object(m["isStatus"])(e,"AUTO_ANNOTATING")){t.next=2;break}return t.abrupt("return",i["Message"].error("数据集当前状态不能进行查看"));case 2:return this.$router.push({path:"/data/datasets/medical/viewer/".concat(e.id)}),t.abrupt("return",null);case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()),D(n,"showActionModal",(function(t,e){this.actionModal={show:!0,row:t,showOkLoading:!1,type:e}})),D(n,"showAutoAnnotate",(function(t){this.showActionModal(t,"autoAnnotate")})),D(n,"startAutoAnnotate",(function(t){var e=this;return Object.assign(this.actionModal,{showOkLoading:!0}),this.$set(this.actionModal.row,"pollIng",!0),Object(c["b"])(this.actionModal.row,t).then((function(){e.$message({message:"自动标注任务开始",type:"success"}),e.poll(e.actionModal.row,"AUTO_ANNOTATING")})).catch((function(t){e.actionModal.row.pollIng=!1,e.$message({message:t.message||"自动标注任务失败",type:"error"})})).finally((function(){e.resetActionModal(),e.crud.refresh()}))})),D(n,"resetActionModal",(function(){"autoAnnotate"===this.actionModal.type&&(this.autoAnnotateKey+=1),this.actionModal={show:!1,row:void 0,showOkLoading:!1,type:null}})),D(n,"handleCancel",(function(){this.resetActionModal()})),D(n,"progressFill",(function(t){var e={AUTO_ANNOTATING:"#52C41A"};return e[t]?e[t]:"#52C41A"})),D(n,"handlePanelClick",(function(t){this.onResetQuery(),g["a"].dispatch("dataset/togglePanelMedical",Number(t.name)),Object.assign(this.localQuery,{type:Number(t.name)}),this.crud.refresh()})),D(n,"toggleImport",(function(){this.importVisible=!this.importVisible})),D(n,"handleClose",(function(){this.importVisible=!1})),D(n,"toggleEdit",(function(t){this.editVisible=!this.editVisible,this.editRow=t})),D(n,"handleEditClose",(function(){this.editVisible=!1})),D(n,"onResetQuery",(function(){this.query={},this.crud.order=null,this.crud.sort=null,this.crud.params={},this.crud.page.current=1,this.modality=null,this.bodyPartExamined=null,this.datasetStatusFilter="all",this.$refs.table.clearSort()})),D(n,"onResetFresh",(function(){this.onResetQuery(),this.crud.refresh()})),D(n,"queryRowProgress",(function(t){var e=this;0!==t.length&&Object(c["h"])({ids:t}).then((function(t){var r=e.crud.data.map((function(e){var r=t[e.id]||null;return N(N({},e),{},{progress:r})}));Object.assign(e.crud,{data:r})}))})),D(n,"getProgress",(function(t){var e=0;if(Object(s["isNil"])(t.progress))Object(m["isIncludeStatus"])(t,["AUTO_ANNOTATED","ANNOTATED"])&&(e=1);else{var r=t.progress.autoFinished+t.progress.finished+t.progress.unfinished+t.progress.manualAnnotating;0!==r&&(e=(t.progress.autoFinished+t.progress.finished)/r)}return Object(v["Qb"])(e,2,0)})),D(n,"getProgressData",(function(t){return Object(s["isNil"])(t)?{unfinished:0,finished:0,autoFinished:0,manualAnnotating:0}:t})),D(n,"filter",(function(t,e){this[t]=e,this.crud.params[t]=e,this.crud.page.current=1,this.crud.toQuery()})),D(n,"datasetStatusFilter2Type",(function(t){return"all"===t?null:t})),D(n,"filterByDatasetStatus",(function(t){t!==this.datasetStatusFilter&&(this.datasetStatusFilter=t,this.crud.params.status=this.datasetStatusFilter2Type(t),this.crud.page.current=1,this.crud.refresh())})),D(n,"parseAnnotateType",(function(t,e,r){return(w["medicalAnnotationMap"][r]||{}).parentName||""})),D(n,"parseModality",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return w["modalityMap"][r]})),D(n,"parseBodyPartExamined",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return w["bodyPartMap"][r]})),D(n,"poll",(function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.setTime(t,0,{type:e,callback:r.callback})})),D(n,"setTime",(function(t,e,r){var n=this,o=r.type,a=r.callback;return e>100?(this.autoTimer[t.id]&&clearTimeout(this.autoTimer[t.id]),t.pollIng=!1,Promise.reject(new Error("更新数据集状态超时"))):this.datasetPoll(t,o).then((function(){t.pollIng&&(n.autoTimer[t.id]&&clearTimeout(n.autoTimer[t.id]),n.autoTimer[t.id]=setTimeout((function(){n.setTime(t,e+1,{type:o,callback:a})}),3e3)),"function"===typeof a&&a(t)}))})),D(n,"datasetPoll",(function(t,e){return"AUTO_ANNOTATING"===e?Object(c["h"])({ids:t.id}).then((function(e){return t.progress=e[t.id],0===e[t.id].unfinished?(t.pollIng=!1,t.status=Object(s["findKey"])(m["datasetStatusMap"],{status:"AUTO_ANNOTATED"}),Promise.resolve(t)):(t.pollIng=!0,t.status=Object(s["findKey"])(m["datasetStatusMap"],{status:"AUTO_ANNOTATING"}),null)})):Promise.reject(new Error("数据集 ".concat(t.id," 查询错误")))})),n)},R=F,$=r("2877"),U=Object($["a"])(R,o,a,!1,null,null,null);e["default"]=U.exports},"64f0":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("collapse-box",{ref:"collapseBoxRef",attrs:{title:"高级设置"},scopedSlots:t._u([{key:"content",fn:function(){return[r("el-form",{ref:"formRef",staticClass:"auto-annotate-filter-form",attrs:{model:t.form,"label-width":"120px"}},[r("el-form-item",{attrs:{label:"文件标注信息",name:"status"}},[r("InfoRadio",{attrs:{value:t.form.status,dataSource:t.fileStatusOptions,labelKey:"name",valueKey:"code"},on:{change:t.handleStatusChange}})],1)],1)]},proxy:!0}])})},o=[],a=r("ed09"),i=r("1020"),l=r("ccc3"),s=r("3da5"),c=Object(a["c"])({name:"AutoAnnotateFilter",components:{CollapseBox:i["a"],InfoRadio:l["a"]},model:{event:"update:value"},props:{value:{type:[String,Number]}},setup:function(t,e){var r=e.emit,n=Object(a["o"])(null),o=Object(a["n"])({status:t.value}),i=Object(a["a"])((function(){return[{code:s["fileCodeMap"].ALL,name:"不限"}].concat([{code:s["fileCodeMap"].NO_ANNOTATION,name:"无标注信息"},{code:s["fileCodeMap"].HAVE_ANNOTATION,name:"有标注信息"}])})),l=function(t){r("update:value",t)};return Object(a["s"])((function(){Object.assign(o,{status:t.value})})),{form:o,formRef:n,fileStatusOptions:i,handleStatusChange:l}}}),u=c,f=(r("c604"),r("2877")),d=Object(f["a"])(u,n,o,!1,null,"30d2b6eb",null);e["default"]=d.exports},"6c99":function(t,e,r){"use strict";r.d(e,"e",(function(){return i})),r.d(e,"g",(function(){return l})),r.d(e,"a",(function(){return s})),r.d(e,"f",(function(){return c})),r.d(e,"c",(function(){return u})),r.d(e,"i",(function(){return d})),r.d(e,"h",(function(){return p})),r.d(e,"d",(function(){return h}));var n=r("b775"),o=r("f121");function a(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/list"),method:"get",params:t})}function i(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/running/list"),method:"get",params:t})}function l(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/files/annotations/auto"),method:"post",data:t})}function s(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service"),method:"post",data:t})}function c(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service"),method:"put",data:t})}function u(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/").concat(t),method:"get"})}function f(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service"),method:"delete",data:{ids:t}})}function d(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/stop/").concat(t),method:"put"})}function p(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/start/").concat(t),method:"put"})}function h(t){return Object(n["a"])({url:"/".concat(o["a"].DATA,"/datasets/label/service/pods/").concat(t),method:"get"})}e["b"]={list:a,add:s,del:f}},"80b3":function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseModal",{attrs:{visible:t.visible,loading:t.loading,title:"自动标注"},on:{change:t.handleCancel,ok:t.handleOk}},[r("el-form",{ref:"form",attrs:{model:t.state.model,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"数据集名称",prop:"name"}},[r("el-input",{attrs:{disabled:""},model:{value:t.state.model.name,callback:function(e){t.$set(t.state.model,"name",e)},expression:"state.model.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"模型类型",prop:"annotateType"}},[r("InfoSelect",{attrs:{dataSource:t.annotationList,disabled:""},model:{value:t.state.model.annotateType,callback:function(e){t.$set(t.state.model,"annotateType",e)},expression:"state.model.annotateType"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"标注服务",prop:"modelServiceId"}},[r("InfoSelect",{attrs:{placeholder:"请选择标注服务",dataSource:t.serviceList,labelKey:"name",valueKey:"id","no-data-text":"暂无可用的标注服务"},model:{value:t.state.model.modelServiceId,callback:function(e){t.$set(t.state.model,"modelServiceId",e)},expression:"state.model.modelServiceId"}})],1),t._v(" "),r("el-form-item",{attrs:{label:" "}},[r("AutoAnnotateFilter",{model:{value:t.state.model.fileStatus,callback:function(e){t.$set(t.state.model,"fileStatus",e)},expression:"state.model.fileStatus"}})],1)],1)],1)},o=[],a=r("ed09"),i=r("2ef0"),l=r("f109"),s=r("ba8f"),c=r("3da5"),u=r("6c99"),f=r("63e7"),d=r("64f0");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function h(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */h=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n=Object.defineProperty||function(t,e,r){t[e]=r.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",l=o.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(L){s=function(t,e,r){return t[e]=r}}function c(t,e,r,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),l=new P(o||[]);return n(i,"_invoke",{value:S(t,r,l)}),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(L){return{type:"throw",arg:L}}}t.wrap=c;var f={};function d(){}function m(){}function y(){}var v={};s(v,a,(function(){return this}));var b=Object.getPrototypeOf,g=b&&b(b(_([])));g&&g!==e&&r.call(g,a)&&(v=g);var w=y.prototype=d.prototype=Object.create(v);function O(t){["next","throw","return"].forEach((function(e){s(t,e,(function(t){return this._invoke(e,t)}))}))}function j(t,e){function o(n,a,i,l){var s=u(t[n],t,a);if("throw"!==s.type){var c=s.arg,f=c.value;return f&&"object"==p(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,l)}),(function(t){o("throw",t,i,l)})):e.resolve(f).then((function(t){c.value=t,i(c)}),(function(t){return o("throw",t,i,l)}))}l(s.arg)}var a;n(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return a=a?a.then(n,n):n()}})}function S(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return k()}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var l=T(i,r);if(l){if(l===f)continue;return l}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var s=u(t,e,r);if("normal"===s.type){if(n=r.done?"completed":"suspendedYield",s.arg===f)continue;return{value:s.arg,done:r.done}}"throw"===s.type&&(n="completed",r.method="throw",r.arg=s.arg)}}}function T(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),f;var o=u(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function A(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function x(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function P(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(A,this),this.reset(!0)}function _(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=y,n(w,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:m,configurable:!0}),m.displayName=s(y,l,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===m||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,s(t,l,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},O(j.prototype),s(j.prototype,i,(function(){return this})),t.AsyncIterator=j,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new j(c(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},O(w),s(w,l,"Generator"),s(w,a,(function(){return this})),s(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=_,P.prototype={constructor:P,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(x),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var l=r.call(a,"catchLoc"),s=r.call(a,"finallyLoc");if(l&&s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(l){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),x(r),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;x(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:_(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),f}},t}function m(t,e,r,n,o,a,i){try{var l=t[a](i),s=l.value}catch(c){return void r(c)}l.done?e(s):Promise.resolve(s).then(n,o)}function y(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){m(a,n,o,i,l,"next",t)}function l(t){m(a,n,o,i,l,"throw",t)}i(void 0)}))}}function v(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function b(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?v(Object(r),!0).forEach((function(e){g(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):v(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function g(t,e,r){return e=w(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function w(t){var e=O(t,"string");return"symbol"===p(e)?e:String(e)}function O(t,e){if("object"!==p(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==p(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var j={name:"AutoAnnotate",components:{BaseModal:l["a"],InfoSelect:s["a"],AutoAnnotateFilter:d["default"]},props:{visible:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},handleCancel:Function,row:{type:Object,default:function(){}}},setup:function(t,e){var r=e.emit,n=Object(a["o"])([]),o={modelServiceId:[{required:!0,message:"请选择标注服务",trigger:["change","blur"]}]},l=["id","name","annotateType"],s=function(t,e){return b(b({},Object(i["pick"])(t,l)),e)},d=Object(a["n"])({model:s(t.row,{modelServiceId:null,fileStatus:c["fileCodeMap"].NO_ANNOTATION})}),p=function(){var t=y(h().mark((function t(){return h().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(u["e"])({modelType:d.model.annotateType});case 3:n.value=t.sent,t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),n.value=[];case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}(),m=function(){r("ok",d.model)};return Object(a["r"])((function(){return t.row}),(function(t){Object.assign(d,{model:b(b({},d.model),Object(i["pick"])(t,l))}),t&&p()})),{rules:o,state:d,annotationList:f["annotationList"],serviceList:n,handleOk:m}}},S=j,T=r("2877"),A=Object(T["a"])(S,n,o,!1,null,null,null);e["default"]=A.exports},9354:function(t,e,r){"use strict";e["a"]={data:function(){return{pickerOptions:{disabledDate:function(t){return t.getTime()>(new Date).setHours(23,59,59,999)}}}}}},9838:function(t,e,r){"use strict";r.r(e);var n=r("2638"),o=r.n(n),a=r("3da5"),i=r("63e7");function l(t){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},l(t)}function s(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function c(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?s(Object(r),!0).forEach((function(e){u(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function u(t,e,r){return e=f(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function f(t){var e=d(t,"string");return"symbol"===l(e)?e:String(e)}function d(t,e){if("object"!==l(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==l(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}e["default"]={name:"DatasetAction",functional:!0,props:{stopRunning:Function,goDetail:Function,autoAnnotate:Function,editDataset:Function},render:function(t,e){var r=e.data,n=e.props,l=n.stopRunning,s=n.goDetail,u=n.autoAnnotate,f=n.editDataset,d=c(c({},r),{},{scopedSlots:{header:function(){return t("span",[t("span",["操作"]),t("el-tooltip",{attrs:{effect:"dark",placement:"top"},style:{marginLeft:"10px"}},[t("div",{slot:"content"},["自动标注仅支持肺部CT影像"]),t("i",{class:"el-icon-question"})])])},default:function(e){var r=e.row,n={props:{type:"text",disabled:r.disabledAction},style:{marginLeft:"0px",marginRight:"10px"}},c=!Object(a["isStatus"])(r,"AUTO_ANNOTATING"),d=t("el-button",o()([{},n,{on:{click:function(){return s(r)}}}]),["查阅影像"]),p=Object(a["isStatus"])(r,"AUTO_ANNOTATING"),h=t("el-button",o()([{},n,{on:{click:function(){return l(r)}}}]),["停止"]),m=Object(a["isIncludeStatus"])(r,["UNANNOTATED","AUTO_ANNOTATED","ANNOTATED","ANNOTATING"])&&"LUNG"===r.bodyPartExamined&&"CT"===r.modality&&r.annotateType===i["medicalAnnotationCodeMap"].OrganSegmentation,y=t("el-button",o()([{},n,{on:{click:function(){return u(r)}}}]),["自动标注"]),v=!0,b=t("el-button",o()([{},n,{on:{click:function(){return f(r)}}}]),["修改"]);return Object(a["isPresetDataset"])(r.type)&&(c=!0,p=!1,m=!1,v=!1),t("span",[c&&d,p&&h,m&&y,v&&b])}}});return t("el-table-column",d)}}},bd24:function(t,e,r){"use strict";r.r(e);var n=r("2638"),o=r.n(n),a=r("63e7");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?l(Object(r),!0).forEach((function(e){c(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function c(t,e,r){return e=u(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function u(t){var e=f(t,"string");return"symbol"===i(e)?e:String(e)}function f(t,e){if("object"!==i(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}e["default"]={name:"DatasetStatus",functional:!0,render:function(t,e){var r=e.data,n=e.props,i=n.statusList,l=n.filterByDatasetStatus,c=n.datasetStatusFilter,u=["el-icon-arrow-down","el-icon--right"],f="all"===c?null:"primary",d=s(s({},r),{},{scopedSlots:{header:function(){return t("el-dropdown",{attrs:{trigger:"click",size:"medium"}},[t("span",[t("span",o()([{},{class:f}]),["状态"]),t("i",o()([{},{class:u}]))]),t("el-dropdown-menu",{slot:"dropdown"},[i.map((function(e){return t("el-dropdown-item",{key:e.value,nativeOn:{click:function(){return l(e.value)}}},[e.label])}))])])},default:function(e){var r=e.row,n=a["medicalStatusMap"][r.status]||{},i=!n.type&&n.bgColor&&{props:{color:n.bgColor},style:{color:n.color,borderColor:n.bgColor}};return t("el-tag",o()([{attrs:{type:n.type}},i]),[n.name])}}});return t("el-table-column",d)}}},c604:function(t,e,r){"use strict";r("cb68")},cb68:function(t,e,r){},d304:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("BaseModal",{attrs:{visible:t.visible,title:"修改数据集"},on:{change:t.handleCancel,ok:t.handleEditDataset}},[r("el-form",{ref:"form",attrs:{model:t.state.model,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"数据集名称",prop:"name"}},[r("el-input",{attrs:{placeholder:"数据集名称不能超过50字",maxlength:"50"},model:{value:t.state.model.name,callback:function(e){t.$set(t.state.model,"name",e)},expression:"state.model.name"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"标注类型",prop:"annotateType"}},[r("InfoSelect",{attrs:{placeholder:"标注类型",dataSource:t.annotationList,disabled:""},model:{value:t.state.model.annotateType,callback:function(e){t.$set(t.state.model,"annotateType",e)},expression:"state.model.annotateType"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"数据集描述",prop:"remark"}},[r("el-input",{attrs:{type:"textarea",placeholder:"数据集描述长度不能超过100字",maxlength:"100",rows:"3","show-word-limit":""},model:{value:t.state.model.remark,callback:function(e){t.$set(t.state.model,"remark",e)},expression:"state.model.remark"}})],1)],1)],1)},o=[],a=r("ed09"),i=r("ba8f"),l=r("f109"),s=r("61f7"),c=r("63e7");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function d(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?f(Object(r),!0).forEach((function(e){p(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):f(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function p(t,e,r){return e=h(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function h(t){var e=m(t,"string");return"symbol"===u(e)?e:String(e)}function m(t,e){if("object"!==u(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var n=r.call(t,e||"default");if("object"!==u(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var y={name:"EditDataset",components:{BaseModal:l["a"],InfoSelect:i["a"]},props:{visible:{type:Boolean,default:!1},handleCancel:Function,handleOk:Function,row:{type:Object,default:function(){}}},setup:function(t,e){var r=e.refs,n=t.handleOk,o={name:[{required:!0,message:"请输入数据集名称",trigger:["change","blur"]},{validator:s["p"],trigger:["change","blur"]}],remark:[{required:!1,message:"请输入数据集描述信息",trigger:"blur"}]},i=function(t,e){return d(d({},t),e)},l=Object(a["n"])({model:i(t.row)}),u=function(){r.form.validate((function(e){return!!e&&(n(l.model,t.row),null)}))};return Object(a["r"])((function(){return t.row}),(function(t){Object.assign(l,{model:d(d({},l.model),t)})})),{rules:o,state:l,annotationList:c["annotationList"],handleEditDataset:u}}},v=y,b=r("2877"),g=Object(b["a"])(v,n,o,!1,null,null,null);e["default"]=g.exports},d744:function(t,e,r){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}}}]);