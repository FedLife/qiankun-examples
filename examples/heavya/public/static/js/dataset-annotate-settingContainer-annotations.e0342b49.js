(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-annotate-settingContainer-annotations","dataset-annotate-settingContainer-editLabel"],{"5a9c":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"annotation-table mb-10"},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"全部标注"}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.notions,fit:"","max-height":"240","row-class-name":t.rowClass},on:{"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{label:"标注 Id","min-width":100},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.name))]),t._v(" "),n("Edit",{attrs:{row:a,title:"修改标注 Id",valueBy:"name",rules:"required",label:"标注 Id "},on:{handleOk:t.handleEdit}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标签类型"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",[t._v(t._s(a.labelName))]),t._v(" "),n("EditLabel",{attrs:{row:a,labels:t.labels,handleEditLabel:t.handleEditLabel(a)}})]}}])}),t._v(" "),t.showScore?n("el-table-column",{attrs:{label:"置信分",width:72},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tooltip",{attrs:{effect:"dark",content:String(a.data.rawScore),placement:"top"}},[n("span",[t._v(t._s(a.data._score||"--"))])])]}}],null,!1,2979384133)}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:48},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-popconfirm",{attrs:{title:"确定删除这个标注吗？"},on:{onConfirm:function(){return t.onConfirm(a)}}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-delete cp"})])])]}}])})],1)],1)},r=[],o=n("2ef0"),i=n("ed09"),l=n("ed08"),c=n("e3a3"),u=n("5cbe");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){b(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function b(t,e,n){return e=p(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){var e=v(t,"string");return"symbol"===s(e)?e:String(e)}function v(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!==s(a))return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m={name:"Annotations",components:{Edit:c["a"],EditLabel:u["default"]},props:{annotations:{type:Array,default:function(){return[]}},annotationType:String,updateState:Function,getColorLabel:Function,deleteAnnotation:Function,findRowIndex:Function,currentAnnotationId:String,labels:{type:Array,default:function(){return[]}}},setup:function(t){var e=t.annotations,n=t.updateState,a=t.getColorLabel,r=t.findRowIndex,c=t.deleteAnnotation,u=t.annotationType,s={},d=Object(i["n"])({annotations:e,visible:!1}),p=Object(i["a"])((function(){return t.labels.reduce((function(t,e){return Object.assign(t,b({},e.id,e.name))}),{})})),v=Object(i["a"])((function(){return"shapes"!==u})),m=function(t){return!Object(o["isNil"])(t)&&-1!==t&&t},y=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.data||{},a=n.categoryId,r=n.track_id,i=p.value[a],c=i?"".concat(i,"_"):"",u=Object(o["isNil"])(s[a])?s[a]=0:s[a]+=1,d=Object(l["ob"])(u+1),b=function(){return t.name?t.name:!1!==m(r)?r:"".concat(c).concat(d)}();return f(f({},t),{},{data:f(f({},t.data),{},{rawScore:Object(l["Qb"])(t.data.score),_score:Object(l["Qb"])(t.data.score,2,0)}),name:b,index:d,labelName:i,edit:e})},w=function(t){return c(t.id)},O=function(t){n({currentAnnotationId:t.id})},g=function(e,a){var o=r(a.id);if(o>-1){var i=t.annotations[o],c=f(f({},i),{},{name:e}),s=Object(l["Kb"])(t.annotations,o,c);n(b({},u,s))}},j=function(e){return function(o){var i=r(e.id);if(i>-1){var c=t.annotations[i],s=f(f({},c),{},{data:f(f({},c.data),{},{categoryId:o,color:a(o)})}),d=Object(l["Kb"])(t.annotations,i,s);n(b({},u,d))}}},h=Object(i["a"])({get:function(){return d.annotations.map((function(t){return y(t,!1)}))}}),_=function(e){var n=e.row;return n.id===t.currentAnnotationId?"activeRow":""};return Object(i["r"])((function(){return t.annotations}),(function(t){s={},Object.assign(d,{annotations:t})})),{state:d,notions:h,rLabels:p,onConfirm:w,handleRowClick:O,handleEdit:g,handleEditLabel:j,rowClass:_,showScore:v}}},y=m,w=(n("78c2"),n("2877")),O=Object(w["a"])(y,a,r,!1,null,null,null);e["default"]=O.exports},"5cbe":function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click",title:"修改标签名称"},model:{value:t.state.visible,callback:function(e){t.$set(t.state,"visible",e)},expression:"state.visible"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleEditLabel},model:{value:t.state.value,callback:function(e){t.$set(t.state,"value",e)},expression:"state.value"}},t._l(t.labels,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),n("i",{staticClass:"el-icon-edit primary cp dib ml-10",attrs:{slot:"reference"},slot:"reference"})],1)},r=[],o=n("ed09"),i={name:"EditLabel",props:{row:{type:Object,default:function(){return{}}},labels:{type:Array,default:function(){return[]}},handleEditLabel:Function},setup:function(t){var e=t.row,n=Object(o["n"])({visible:!1,value:e.data.categoryId});return Object(o["r"])((function(){return t.row}),(function(t){var e;Object.assign(n,{value:null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.categoryId})})),{state:n}}},l=i,c=n("2877"),u=Object(c["a"])(l,a,r,!1,null,null,null);e["default"]=u.exports},"78c2":function(t,e,n){"use strict";n("d698")},d698:function(t,e,n){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}}}]);