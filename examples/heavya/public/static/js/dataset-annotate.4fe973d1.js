(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-annotate","dataset-annotate-settingContainer","dataset-annotate-settingContainer-labelList","dataset-annotate-workSpaceContainer","dataset-annotate-workSpaceContainer-dropdownLabel","dataset-components-labelEditor","dataset-components-searchLabel","dataset-annotate-settingContainer-annotations","dataset-annotate-settingContainer-editLabel","dataset-annotate-settingContainer-enhance","dataset-annotate-settingContainer-enhanceTip","dataset-annotate-settingContainer-footer","dataset-annotate-settingContainer-labelList-edit","dataset-annotate-settingContainer-labelTip","dataset-annotate-settingContainer-selectLabel","dataset-annotate-thumbContainer-listItem","dataset-annotate-workSpaceContainer-annotationId","dataset-annotate-workSpaceContainer-bbox","dataset-annotate-workSpaceContainer-bboxWrapper","dataset-annotate-workSpaceContainer-brushTip","dataset-annotate-workSpaceContainer-score","dataset-annotate-workSpaceContainer-tag","dataset-annotate-workSpaceContainer-toolbar","dataset-annotate-workSpaceContainer-dropdownLabel-style-scss"],{"0196":function(t,e,n){"use strict";n.r(e);var r=n("2638"),o=n.n(r),a=n("4d26"),i=n.n(a),c=n("2ef0"),l=n("ed08"),s=n("3da5"),u=["annotate","currentAnnotationId","dragStart","dragMove","dragEnd","brush","transformer"];function f(t,e){if(null==t)return{};var n,r,o=d(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function d(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}e["default"]={name:"Bbox",functional:!0,props:{annotate:Object,brush:Object,scale:{type:Number,default:1},pos:{type:Object,default:function(){return{}}},dragStart:Function,dragMove:Function,dragEnd:Function,currentAnnotationId:String,transformer:Object,imgRef:HTMLImageElement},render:function(t,e){var n=e.props,r=e.data.style,a=n.annotate,d=void 0===a?{}:a,h=n.currentAnnotationId,p=n.dragStart,v=n.dragMove,m=n.dragEnd,b=(n.brush,n.transformer),y=f(n,u),g=d.data,w=void 0===g?{}:g,x=w.bbox,O=w.color;if(Object(c["isNil"])(x))return null;var j=O||s["defaultFill"],S=h===d.id,_=S?.4:.1,L=Object(l["x"])(j).alpha(_),I=null;return d.id===b.id&&(I="translate(".concat(b.dx,", ").concat(b.dy,")")),t("g",{class:i()("bbox-group",{active:S})},[t("rect",o()([{attrs:{fill:L,stroke:O||s["defaultColor"],strokeWidth:4,x:n.pos.x,y:n.pos.y,width:n.pos.width,height:n.pos.height,transform:I},on:{mousemove:v,mouseup:m,mousedown:p},style:r},y]))])}}},"0442":function(t,e,n){"use strict";n.r(e);var r=function(t,e){var n=e._c;return n("div",{staticClass:"el-form-item__label no-float tl"},[n("label",[e._v("选择系统预置标签")]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"label-tooltip"},[n("div",{staticClass:"flex tips-wrapper f12"},[n("div",[e._v("可以选择系统预置标签，")]),e._v(" "),n("div",[e._v("或者点击下方新建标签")])])])]),e._v(" "),n("i",{staticClass:"el-icon-warning-outline",staticStyle:{color:"#2e4fde"}})])],1)},o=[],a={name:"LabelTip"},i=a,c=(n("d447"),n("2877")),l=Object(c["a"])(i,r,o,!0,null,"3e74b644",null);e["default"]=l.exports},"16c4":function(t,e,n){"use strict";n("bd5a")},"197cc":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace-settings"},[n("el-form",{attrs:{"label-position":"top"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"数据集名称"}},[n("div",{staticStyle:{"margin-top":"-10px"}},[t._v(t._s(t.state.datasetInfo.value.name))])]),t._v(" "),n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"标注类型"}},[n("div",{staticStyle:{"margin-top":"-10px"}},[t._v(t._s(t.annotationTypeName))])]),t._v(" "),t.state.datasetInfo.value.labelGroupId?n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"标签组"}},[n("div",{staticStyle:{"margin-top":"-10px"}},[n("span",{staticClass:"vm"},[t._v(t._s(t.state.datasetInfo.value.labelGroupName)+"  ")]),t._v(" "),n("el-link",{staticClass:"vm",attrs:{target:"_blank",type:"primary",underline:!1,href:(t.__IN_CLOUD__?"/"+t.appName:"#")+"/data/labelgroup/detail?id="+t.state.datasetInfo.value.labelGroupId}},[t._v("\n          查看详情\n        ")])],1)]):t._e(),t._v(" "),t.showAddLabel?n("SelectLabel",{attrs:{dataSource:t.api.systemLabels,handleLabelSelect:t.handleLabelSelect,handleLabelCreate:t.handleLabelCreate}}):t._e(),t._v(" "),n("LabelList",{attrs:{labels:t.labels,editLabel:t.edit,annotations:t.annotations,annotationType:t.annotationType,currentAnnotationId:t.api.currentAnnotationId,updateState:t.updateState,getColorLabel:t.getColorLabel,findRowIndex:t.findRowIndex}}),t._v(" "),n("Annotations",{attrs:{annotations:t.annotations,annotationType:t.annotationType,currentAnnotationId:t.state.currentAnnotationId.value,labels:t.labels,updateState:t.updateState,getColorLabel:t.getColorLabel,findRowIndex:t.findRowIndex,deleteAnnotation:t.deleteAnnotation}}),t._v(" "),!t.isTrack&&t.state.hasEnhanceRecord.value?n("Enhance",{attrs:{fileInfo:t.state.fileInfo.value,fileId:t.state.fileId.value,datasetId:t.state.datasetId.value,annotateType:t.state.datasetInfo.value.annotateType}}):t._e(),t._v(" "),n("Footer",{attrs:{isTrack:t.isTrack,updateState:t.updateState,showScore:t.state.showScore.value,toggleShowScore:t.toggleShowScore,showTag:t.state.showTag.value,toggleShowTag:t.toggleShowTag,showId:t.state.showId.value,toggleShowId:t.toggleShowId,isSegmentation:t.isSegmentation}})],1)],1)},o=[],a=n("5c96"),i=n("ed09"),c=n("4f10"),l=n("3da5"),s=n("1bec"),u=n("fb24"),f=n("5a9c"),d=n("32fa"),h=n("54d2");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(C){l=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),c=new I(o||[]);return r(i,"_invoke",{value:j(t,n,c)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=s;var f={};function d(){}function h(){}function m(){}var b={};l(b,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(b=g);var w=m.prototype=d.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function o(r,a,i,c){var l=u(t[r],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==p(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function j(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),l(O.prototype,i,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new O(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function m(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)}))}}var y=Object(l["annotationBy"])("code"),g={name:"SettingContainer",components:{SelectLabel:s["default"],Annotations:f["default"],Footer:h["default"],LabelList:u["default"],Enhance:d["default"]},props:{createLabel:Function,getColorLabel:Function,updateState:Function,queryLabels:Function,findRowIndex:Function,deleteAnnotation:Function,state:Object,isTrack:Boolean,isSegmentation:Boolean,annotationType:String},setup:function(t){var e=t.createLabel,n=t.updateState,r=t.queryLabels,o=t.annotationType,s=Object(i["n"])({selectedLabel:void 0,newLabel:void 0,newLabelColor:void 0,currentAnnotationId:t.state.currentAnnotationId||void 0}),u=Object(i["e"])(l["labelsSymbol"]),f=Object(i["a"])((function(){return t.state[o].value})),d=Object(i["a"])((function(){return y(t.state.datasetInfo.value.annotateType,"name")})),h=function(){var t=b(v().mark((function t(){var e;return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:e=t.sent,n({labels:e});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),p=function(e,n){return Object(c["c"])(e,n,t.state.datasetId.value).then(h)},m=function(t){var n;if(s.selectedLabel=null===(n=s.systemLabels.find((function(e){return e.value===t})))||void 0===n?void 0:n.label,s.selectedLabel){if(u.value.findIndex((function(t){return t.name===s.selectedLabel}))>-1)return a["Message"].warning("当前数据集已存在标签[".concat(s.selectedLabel,"]")),void(s.selectedLabel=void 0);e({name:s.selectedLabel}).then((function(){a["Message"].success("标签[".concat(s.selectedLabel,"]创建成功")),s.selectedLabel=void 0,h()}))}else a["Message"].warning("请选择标签")},g=function(t,n){if(s.newLabel=n.name,s.newLabelColor=n.color,s.newLabel){if(u.value.findIndex((function(t){return t.name===s.newLabel}))>-1)return void a["Message"].warning("当前数据集已存在标签[".concat(s.newLabel,"]"));e({name:s.newLabel,color:s.newLabelColor}).then((function(){a["Message"].success("标签[".concat(s.newLabel,"]创建成功")),s.newLabel=void 0,s.newLabelColor=void 0,h()}))}else a["Message"].warning("请选择标签")},w=function(){Object(c["d"])(l["labelGroupTypeMap"].VISUAL.value).then((function(t){var e=t.map((function(t){return{value:t.id,label:t.name,color:t.color,chosen:!1}}));Object.assign(s,{systemLabels:e})}))},x=function(t){n({showScore:t})},O=function(e){var r={showTag:e};e&&t.isTrack&&(r.showId=!1),n(r)},j=function(e){var r={showId:e};e&&t.isTrack&&(r.showTag=!1),n(r)},S=Object(i["a"])((function(){return!Object(l["isPresetDataset"])(t.state.datasetInfo.value.type)}));return Object(i["r"])((function(){return t.state.currentAnnotationId}),(function(t){s.currentAnnotationId=t||void 0})),Object(i["k"])((function(){w()})),{api:s,toggleShowScore:x,toggleShowTag:O,toggleShowId:j,labels:u,edit:p,handleLabelSelect:m,handleLabelCreate:g,showAddLabel:S,annotations:f,annotationTypeName:d}}},w=g,x=(n("16c4"),n("2877")),O=Object(x["a"])(w,r,o,!1,null,null,null);e["default"]=O.exports},"1bec":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-form-item",[t._t("label",[n("LabelTip")]),t._v(" "),n("div",{staticClass:"flex flex-between"},[n("InfoSelect",{staticStyle:{width:"80%"},attrs:{innerRef:t.innerRef,placeholder:"选择系统预置标签",dataSource:t.dataSource,"value-key":"value","default-first-option":"",filterable:""},on:{change:t.handleLabelSelect}})],1),t._v(" "),n("LabelEditor",{attrs:{title:"新建标签"},on:{handleOk:t.handleLabelCreate}},[n("span",{staticClass:"cp vm primary f14",attrs:{slot:"trigger"},slot:"trigger"},[t._v("新建标签")])])],2)},o=[],a=n("ed09"),i=n("ba8f"),c=n("4d05"),l=n("0442"),s={name:"SelectLabel",components:{LabelTip:l["default"],InfoSelect:i["a"],LabelEditor:c["default"]},props:{dataSource:{type:Array,default:function(){return[]}},handleLabelSelect:Function,handleLabelCreate:Function},setup:function(){var t=Object(a["o"])(null);return{innerRef:function(){return t}}}},u=s,f=n("2877"),d=Object(f["a"])(u,r,o,!1,null,null,null);e["default"]=d.exports},"290d":function(t,e,n){"use strict";n("adaf")},"2c76":function(t,e,n){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}},"2f37":function(t,e,n){"use strict";n("9d40")},"2fcc":function(t,e,n){},"32fa":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"enhance-section",staticStyle:{"margin-bottom":"20px"}},[n("div",{staticClass:"flex flex-between"},[n("el-form-item",{staticStyle:{"margin-bottom":"10px"}},[t._t("label",[n("EnhanceTip")])],2),t._v(" "),n("div",{staticClass:"primary",staticStyle:{height:"32px","margin-top":"-2px","line-height":"32px"}},[t.state.isEnhanced?n("span",[n("el-link",{attrs:{target:"_blank",type:"primary",underline:!1,href:t.parentImgUrl}},[t._v("\n          查看原图\n        ")]),t._v(" "),n("IconFont",{attrs:{type:"externallink"}})],1):t._e()])],1),t._v(" "),t.state.isOrigin?n("el-link",{attrs:{type:"primary",underline:!1},on:{click:t.showCompare}},[t._v("\n    增强文件对比\n  ")]):t._e(),t._v(" "),t.state.isOrigin||t.state.isEnhanced?t._e():n("div",{staticClass:"f14 g6 flex flex-vertical-align",attrs:{type:"primary"}},[n("span",{staticClass:"vm"},[t._v("暂无数据增强信息")])]),t._v(" "),t.state.isEnhanced?n("el-tag",{attrs:{"disable-transitions":"",type:t.state.enhanceTag.tag}},[t._v("\n    "+t._s(t.state.enhanceTag.label)+"\n  ")]):t._e(),t._v(" "),t.state.isOrigin&&t.fullFileList?n("BaseModal",{key:t.state.dialogKey,staticClass:"carousel-figure-dialog",attrs:{width:"720px",title:"增强文件对比",showCancel:!1,okText:"关闭",visible:t.state.showEnhanceCompare},on:{change:t.hideCompare,ok:t.hideCompare}},[n("el-carousel",{attrs:{arrow:"always",autoplay:!1,"indicator-position":"none",height:"360px"}},t._l(t.fullFileList,(function(e){return n("el-carousel-item",{key:e.id},[n("div",{staticClass:"figure-wrapper carousel-figure-item"},[n("div",{staticClass:"carousel-figure-bg",style:t.buildBackground(e)}),t._v(" "),n("div",{staticClass:"figure-desc"},[t._v(t._s(e.enhance_name))])])])})),1)],1):t._e()],1)},o=[],a=n("2ef0"),i=n("ed09"),c=n("f109"),l=n("3da5"),s=n("141b"),u=n("86f5");function f(t){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f(t)}function d(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */d=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(C){l=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new I(o||[]);return r(i,"_invoke",{value:j(t,n,c)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=s;var h={};function p(){}function v(){}function m(){}var b={};l(b,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(b=g);var w=m.prototype=p.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function o(r,a,i,c){var l=u(t[r],t,a);if("throw"!==l.type){var s=l.arg,d=s.value;return d&&"object"==f(d)&&n.call(d,"__await")?e.resolve(d.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(d).then((function(t){s.value=t,i(s)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function j(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),l(O.prototype,i,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new O(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function h(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){h(a,r,o,i,c,"next",t)}function c(t){h(a,r,o,i,c,"throw",t)}i(void 0)}))}}var v=Object(l["annotationBy"])("code"),m={name:"EnhanceList",components:{BaseModal:c["a"],EnhanceTip:u["default"]},props:{isTrack:Boolean,fileInfo:{type:Object,default:function(){return{}}},fileId:Number,datasetId:Number,annotateType:Number},setup:function(t){var e=Object(i["n"])({showEnhanceCompare:!1,isOrigin:!1,enhanceTag:{},dialogKey:1,enhanceFileList:null,isEnhanced:!1}),n=Object(i["e"])(l["enhanceSymbol"]),r=v(t.annotateType,"urlPrefix"),o=Object(i["a"])((function(){var e;return"/data/datasets/".concat(r,"/").concat(t.datasetId,"/file/").concat(null===(e=t.fileInfo)||void 0===e?void 0:e.pid)})),c=function(t){return n.value.find((function(e){return e.value===t.enhanceType}))||{}},u=Object(i["a"])((function(){var n;if(!e.enhanceFileList||0===(null===(n=e.enhanceFileList)||void 0===n?void 0:n.length))return null;if(Object(a["isNil"])(t.fileInfo))return null;var r=[t.fileInfo].concat(e.enhanceFileList);return Object(l["transformFiles"])(r,(function(t){return{enhance_name:0===t.pid?"原始图片":c(t).label}}))})),f=function(){Object.assign(e,{showEnhanceCompare:!0})},h=function(){e.showEnhanceCompare&&Object.assign(e,{showEnhanceCompare:!1,dialogKey:e.dialogKey+1})},m=function(t){return{backgroundImage:'url("'.concat(t.url,'")')}};return Object(i["r"])((function(){return t.fileId}),function(){var n=p(d().mark((function n(r){var o,a;return d().wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!r){n.next=6;break}return n.next=3,Object(s["m"])(t.datasetId,r);case 3:o=n.sent,a=!!o.length,Object.assign(e,{isOrigin:a,enhanceFileList:a?o:null});case 6:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),{immediate:!0}),Object(i["r"])((function(){return t.fileInfo}),function(){var t=p(d().mark((function t(n){var r,o,i;return d().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n&&(r={isEnhanced:n.pid>0},Object(a["isNil"])(n.enhanceType)||(o=c(n),i={label:o.label,value:o.value,tag:l["dataEnhanceMap"][o.value]},r.enhanceTag=i),Object.assign(e,r));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{immediate:!0}),{state:e,fullFileList:u,showCompare:f,hideCompare:h,buildBackground:m,parentImgUrl:o}}},b=m,y=(n("61f0"),n("2877")),g=Object(y["a"])(b,r,o,!1,null,null,null);e["default"]=g.exports},"3c3d":function(t,e,n){},4723:function(t,e,n){},"4d05":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{key:t.state.dialogKey,attrs:{placement:"top",width:"240",trigger:"click",title:t.props.title},on:{show:t.onShow,hide:t.onHide},model:{value:t.state.visible,callback:function(e){t.$set(t.state,"visible",e)},expression:"state.visible"}},[n("el-form",{ref:"formRef",staticStyle:{"margin-top":"20px"},attrs:{model:t.state.form,rules:t.rules,"label-width":"60px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{ref:"inputRef",attrs:{placeholder:t.props.title},model:{value:t.state.form.name,callback:function(e){t.$set(t.state.form,"name",e)},expression:"state.form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"颜色",prop:"color"}},[n("el-color-picker",{model:{value:t.state.form.color,callback:function(e){t.$set(t.state.form,"color",e)},expression:"state.form.color"}})],1),t._v(" "),n("div",{staticClass:"tc"},[n("el-button",{attrs:{type:"text"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确定")])],1)],1),t._v(" "),n("span",{attrs:{slot:"reference"},slot:"reference"},[t._t("trigger")],2)],1)},o=[],a=n("2b0e"),i=n("ed09"),c=n("61f7"),l=n("2ef0"),s={name:"LabelEditor",props:{getStyle:Function,title:String,labelData:{type:Object,default:function(){return{}}}},setup:function(t,e){var n=Object(i["o"])(null),r=Object(i["o"])(null),o=Object(i["n"])({visible:!1,dialogKey:1,form:{name:t.labelData.name||"",color:t.labelData.color||"#2e4fde"}}),s={name:[{required:!0,message:"请输入标签名称",trigger:["change","blur"]},{validator:c["p"],trigger:["change","blur"]}]},u=function(){Object.assign(o,{visible:!1,form:{name:t.labelData.name||"",color:t.labelData.color||"#2e4fde"}})},f=function(){r.value.validate().then((function(n){n&&(o.form.color===t.labelData.color&&o.form.name===t.labelData.name||e.emit("handleOk",t.labelData.id,o.form),Object(l["isNil"])(t.labelData.name)?u():Object.assign(o,{dialogKey:o.dialogKey+1}))}))},d=function(){a["default"].nextTick((function(){var t=n&&n.value.$refs.input;t&&t.focus()}))},h=function(){Object.assign(o,{dialogKey:o.dialogKey+1})};return{props:t,state:o,rules:s,inputRef:n,formRef:r,handleOk:f,handleCancel:u,onShow:d,onHide:h}}},u=s,f=n("2877"),d=Object(f["a"])(u,r,o,!1,null,null,null);e["default"]=d.exports},"4e0d":function(t,e,n){"use strict";n.r(e);var r=n("4d26"),o=n.n(r);e["default"]={name:"ListItem",functional:!0,render:function(t,e){var n=e.props,r=n.item,a=n.handleClick,i=n.currentImgId,c=o()("thumb-list-item",{active:i===r.id});return t("li",{class:c,style:{backgroundImage:'url("'.concat(r.url,'")')},on:{click:function(){return a(r)}}})}}},"4f10":function(t,e,n){"use strict";n.d(e,"e",(function(){return f})),n.d(e,"a",(function(){return d})),n.d(e,"c",(function(){return h})),n.d(e,"d",(function(){return p})),n.d(e,"b",(function(){return v}));var r=n("b775"),o=n("f121");function a(t){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a(t)}function i(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?i(Object(n),!0).forEach((function(e){l(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function l(t,e,n){return e=s(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){var e=u(t,"string");return"symbol"===a(e)?e:String(e)}function u(t,e){if("object"!==a(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function f(t){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(t,"/labels"),method:"get"})}function d(t,e){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(t,"/labels"),method:"post",data:e})}function h(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return e.labelId=t,Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/labels"),method:"put",data:c(c({},e),{},{datasetId:n})})}function p(t){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/labels/auto/").concat(t),method:"get"})}function v(t,e){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/labels"),method:"delete",data:{datasetId:t,labelId:e}})}},"504a":function(t,e,n){"use strict";n("9262")},"54d2":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"setting-container-footer"},[n("el-form-item",{attrs:{label:"标注类型标签"}},[n("el-switch",{attrs:{value:t.showTag},on:{change:t.toggleShowTag}})],1),t._v(" "),t.isSegmentation?t._e():n("el-form-item",{attrs:{label:"智能评分"}},[n("el-switch",{attrs:{value:t.showScore},on:{change:t.toggleShowScore}})],1)],1)},o=[],a={name:"Footer",props:{updateState:Function,showScore:Boolean,showTag:Boolean,showId:Boolean,toggleShowTag:Function,toggleShowScore:Function,toggleShowId:Function,isTrack:Boolean,isSegmentation:Boolean}},i=a,c=n("2877"),l=Object(c["a"])(i,r,o,!1,null,null,null);e["default"]=l.exports},"5a9c":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"annotation-table mb-10"},[n("el-form-item",{staticStyle:{"margin-bottom":"0"},attrs:{label:"全部标注"}}),t._v(" "),n("el-table",{staticStyle:{width:"100%"},attrs:{data:t.notions,fit:"","max-height":"240","row-class-name":t.rowClass},on:{"row-click":t.handleRowClick}},[n("el-table-column",{attrs:{label:"标注 Id","min-width":100},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.name))]),t._v(" "),n("Edit",{attrs:{row:r,title:"修改标注 Id",valueBy:"name",rules:"required",label:"标注 Id "},on:{handleOk:t.handleEdit}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标签类型"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("span",[t._v(t._s(r.labelName))]),t._v(" "),n("EditLabel",{attrs:{row:r,labels:t.labels,handleEditLabel:t.handleEditLabel(r)}})]}}])}),t._v(" "),t.showScore?n("el-table-column",{attrs:{label:"置信分",width:72},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-tooltip",{attrs:{effect:"dark",content:String(r.data.rawScore),placement:"top"}},[n("span",[t._v(t._s(r.data._score||"--"))])])]}}],null,!1,2979384133)}):t._e(),t._v(" "),n("el-table-column",{attrs:{label:"操作",width:48},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.row;return[n("el-popconfirm",{attrs:{title:"确定删除这个标注吗？"},on:{onConfirm:function(){return t.onConfirm(r)}}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-delete cp"})])])]}}])})],1)],1)},o=[],a=n("2ef0"),i=n("ed09"),c=n("ed08"),l=n("e3a3"),s=n("5cbe");function u(t){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},u(t)}function f(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function d(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?f(Object(n),!0).forEach((function(e){h(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function h(t,e,n){return e=p(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t){var e=v(t,"string");return"symbol"===u(e)?e:String(e)}function v(t,e){if("object"!==u(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==u(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var m={name:"Annotations",components:{Edit:l["a"],EditLabel:s["default"]},props:{annotations:{type:Array,default:function(){return[]}},annotationType:String,updateState:Function,getColorLabel:Function,deleteAnnotation:Function,findRowIndex:Function,currentAnnotationId:String,labels:{type:Array,default:function(){return[]}}},setup:function(t){var e=t.annotations,n=t.updateState,r=t.getColorLabel,o=t.findRowIndex,l=t.deleteAnnotation,s=t.annotationType,u={},f=Object(i["n"])({annotations:e,visible:!1}),p=Object(i["a"])((function(){return t.labels.reduce((function(t,e){return Object.assign(t,h({},e.id,e.name))}),{})})),v=Object(i["a"])((function(){return"shapes"!==s})),m=function(t){return!Object(a["isNil"])(t)&&-1!==t&&t},b=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t.data||{},r=n.categoryId,o=n.track_id,i=p.value[r],l=i?"".concat(i,"_"):"",s=Object(a["isNil"])(u[r])?u[r]=0:u[r]+=1,f=Object(c["ob"])(s+1),h=function(){return t.name?t.name:!1!==m(o)?o:"".concat(l).concat(f)}();return d(d({},t),{},{data:d(d({},t.data),{},{rawScore:Object(c["Qb"])(t.data.score),_score:Object(c["Qb"])(t.data.score,2,0)}),name:h,index:f,labelName:i,edit:e})},y=function(t){return l(t.id)},g=function(t){n({currentAnnotationId:t.id})},w=function(e,r){var a=o(r.id);if(a>-1){var i=t.annotations[a],l=d(d({},i),{},{name:e}),u=Object(c["Kb"])(t.annotations,a,l);n(h({},s,u))}},x=function(e){return function(a){var i=o(e.id);if(i>-1){var l=t.annotations[i],u=d(d({},l),{},{data:d(d({},l.data),{},{categoryId:a,color:r(a)})}),f=Object(c["Kb"])(t.annotations,i,u);n(h({},s,f))}}},O=Object(i["a"])({get:function(){return f.annotations.map((function(t){return b(t,!1)}))}}),j=function(e){var n=e.row;return n.id===t.currentAnnotationId?"activeRow":""};return Object(i["r"])((function(){return t.annotations}),(function(t){u={},Object.assign(f,{annotations:t})})),{state:f,notions:O,rLabels:p,onConfirm:y,handleRowClick:g,handleEdit:w,handleEditLabel:x,rowClass:j,showScore:v}}},b=m,y=(n("78c2"),n("2877")),g=Object(y["a"])(b,r,o,!1,null,null,null);e["default"]=g.exports},"5cbe":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click",title:"修改标签名称"},model:{value:t.state.visible,callback:function(e){t.$set(t.state,"visible",e)},expression:"state.visible"}},[n("el-select",{attrs:{placeholder:"请选择"},on:{change:t.handleEditLabel},model:{value:t.state.value,callback:function(e){t.$set(t.state,"value",e)},expression:"state.value"}},t._l(t.labels,(function(t){return n("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1),t._v(" "),n("i",{staticClass:"el-icon-edit primary cp dib ml-10",attrs:{slot:"reference"},slot:"reference"})],1)},o=[],a=n("ed09"),i={name:"EditLabel",props:{row:{type:Object,default:function(){return{}}},labels:{type:Array,default:function(){return[]}},handleEditLabel:Function},setup:function(t){var e=t.row,n=Object(a["n"])({visible:!1,value:e.data.categoryId});return Object(a["r"])((function(){return t.row}),(function(t){var e;Object.assign(n,{value:null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.categoryId})})),{state:n}}},c=i,l=n("2877"),s=Object(l["a"])(c,r,o,!1,null,null,null);e["default"]=s.exports},"61f0":function(t,e,n){"use strict";n("eaaf")},"6cd3":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"listWrapper",staticClass:"infinite-list-wrapper",staticStyle:{overflow:"auto"}},[n("ul",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:t.loadMore,expression:"loadMore"}],attrs:{"infinite-scroll-distance":"100","infinite-scroll-disabled":"disabled","infinite-scroll-immediate":"false"}},t._l(t.list,(function(e){return n("ListItem",{key:e.id,attrs:{item:e,handleClick:t.handleClick,currentImgId:t.currentImg.id}})})),1),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:t.state.loading,expression:"state.loading"}],attrs:{"element-loading-spinner":"el-icon-loading"}}),t._v(" "),t.hasMore?t._e():n("p",{staticClass:"f14 g6"},[t._v("没有更多了")])])},o=[],a=n("ed09"),i=n("e281"),c=n("4e0d"),l={name:"Scroller",components:{ListItem:c["default"]},props:{list:{type:Array,default:function(){return[]}},type:{type:Array,default:function(){return[]}},labelId:{type:Array,default:function(){return[]}},addList:{type:Array,default:function(){return[]}},hasMore:Boolean,history:{type:Array,default:function(){return[]}},total:Number,offset:Number,currentImg:{type:Object,default:function(){return null}},queryNextPage:Function,updateState:Function},setup:function(t,e){var n=t.updateState,r=t.queryNextPage,o=Object(a["o"])(null),c=Object(a["n"])({loading:!1});Object(a["r"])((function(){return t.addList}),(function(e){n({offset:t.offset+Math.min(i["limit"],e.length),hasMore:e.length>=i["limit"]})}));var l=Object(a["a"])((function(){return c.loading||!t.hasMore})),s=function(n){n.id!==t.currentImg.id&&e.emit("changeImg",n)},u=function(){Object.assign(c,{loading:!0}),r({offset:t.offset,type:t.type,labelId:t.labelId}).then((function(){Object.assign(c,{loading:!1})}))};return{state:c,disabled:l,loadMore:u,handleClick:s,listWrapper:o}}},s=l,u=(n("c19b"),n("2877")),f=Object(u["a"])(s,r,o,!1,null,"93a1e0be",null);e["default"]=f.exports},"707c":function(t,e,n){"use strict";n.r(e);var r=n("2ef0"),o=n("ed08");e["default"]={name:"BrushTip",props:{annotate:Object,dimension:Object,brush:Object},setup:function(t){var e=function(){var e=t.brush.extent;return Object(r["isNil"])(e)?0:e.x1-e.x0},n=function(){var e=t.brush.extent;return Object(r["isNil"])(e)?0:e.y1-e.y0},o=function(){var e=t.brush.extent,n=void 0===e?{}:e;return{x:n.x1,y:n.y1}};return{getWidth:e,getHeight:n,getEndPoint:o}},render:function(){var t,e,n,r,a,i,c=arguments[0],l=this.getWidth(),s=this.getHeight(),u=this.getEndPoint(),f=this.dimension.svg,d={left:Object(o["t"])(null===(t=this.brush.extent)||void 0===t?void 0:t.x0),top:Object(o["t"])((null===(e=this.brush.extent)||void 0===e?void 0:e.y0)-30)},h={right:Object(o["t"])(f.width-(null===(n=this.brush.extent)||void 0===n?void 0:n.x1)),top:Object(o["t"])((null===(r=this.brush.extent)||void 0===r?void 0:r.y1)+6)};(null===(a=this.brush.extent)||void 0===a?void 0:a.y0)<30&&(d.top=Object(o["t"])((null===(i=this.brush.extent)||void 0===i?void 0:i.y0)+6));return c("div",{class:"usn"},[c("div",{class:"brush-tooltip size-tipper",style:d},[l>0&&s>0&&c("div",{class:"tooltip-item-row"},[Object(o["Qb"])(l,0,0)," * ",Object(o["Qb"])(s,0,0)])]),c("div",{class:"brush-tooltip dimension-tipper",style:h},[u&&c("div",{class:"tooltip-item-row"},["(",Object(o["Qb"])(u.x,0,0),", ",Object(o["Qb"])(u.y,0,0),")"])])])}}},"72ee":function(t,e,n){},"78c2":function(t,e,n){"use strict";n("d698")},"80a3":function(t,e,n){"use strict";n.r(e);var r=n("2ef0"),o=n("ed08"),a=n("3da5"),i=function(t){return!Object(r["isNil"])(t)&&-1!==t&&t};e["default"]={name:"Tag",functional:!0,props:{annotate:Object,offset:Function,currentAnnotationId:String,brush:Object,transformer:Object,scale:{type:Number},imgBounding:{type:Array},getLabelName:Function},render:function(t,e){var n=e.props,c=n.annotate,l=void 0===c?{}:c,s=n.offset,u=n.brush,f=n.transformer,d=l.data,h=void 0===d?{}:d,p=l.id,v=h.bbox,m=h.color,b=void 0===m?a["defaultColor"]:m;if(n.currentAnnotationId===p&&u.isBrushing)return null;if(Object(r["isNil"])(v))return null;var y=s(n.annotate),g={width:Object(o["t"])(y.width),left:Object(o["t"])(y.x),top:Object(o["t"])(y.y),color:Object(o["z"])(b)};l.id===f.id&&(g.transform="translate(".concat(f.dx,"px, ").concat(f.dy,"px)"));var w=Object(o["x"])(b).alpha(.8).toString(),x=function(){return l.name?l.name:!1!==i(h.track_id)?h.track_id:null}();return x?t("div",{class:"annotation-label image-tag",style:g},[t("el-tag",{attrs:{color:w},style:{color:"inherit",border:"none"}},[x])]):null}}},"86f5":function(t,e,n){"use strict";n.r(e);var r=function(t,e){var n=e._c;return n("div",{staticClass:"el-form-item__label no-float tl"},[n("label",[e._v("数据增强")]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",placement:"top"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"label-tooltip"},[n("div",{staticClass:"flex tips-wrapper f12"},[n("div",[e._v("标注完成，或自动标注完成的数据集，可以执行数据增强")])])])]),e._v(" "),n("i",{staticClass:"el-icon-warning-outline",staticStyle:{color:"#2e4fde"}})])],1)},o=[],a={name:"EnhanceTip"},i=a,c=(n("c2fa"),n("2877")),l=Object(c["a"])(i,r,o,!0,null,"52a69369",null);e["default"]=l.exports},"8e3a":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"thumb-wrapper"},[n("div",[0===t.state.datasetInfo.value.dataType?n("el-button",{staticStyle:{"margin-bottom":"8px"},attrs:{type:"primary",icon:"el-icon-plus",round:""},on:{click:t.handleUpload}},[t._v("\n      添加图片\n    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"file-infobar flex flex-wrap"},[n("SearchBox",{ref:"searchBoxRef",attrs:{formItems:t.thumbState.formItems,handleFilter:t.handleFilter,initialValue:t.initialValue,popperAttrs:t.popperAttrs,klass:"annotate-search-box"}},[n("el-button",{staticClass:"mx-10",staticStyle:{"margin-top":"-4px"},attrs:{slot:"trigger",type:"text"},slot:"trigger"},[t._v("筛选"),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})])],1),t._v(" "),n("div",[n("span",{staticClass:"f14"},[t._v("共 "+t._s(t.state.total.value)+" 张")])]),t._v(" "),n("el-checkbox",{staticClass:"pl-16 primary normal",on:{change:t.handleStatusChange},model:{value:t.thumbState.filterUnfinished,callback:function(e){t.$set(t.thumbState,"filterUnfinished",e)},expression:"thumbState.filterUnfinished"}},[t._v("\n      只看无标注文件\n    ")])],1),t._v(" "),n("List",t._g(t._b({ref:"listRef",attrs:{updateState:t.updateState,list:t.state.files.value,addList:t.state.addFiles.value,hasMore:t.state.hasMore.value,total:t.state.total.value,offset:t.state.offset.value,type:t.thumbState.type,labelId:t.thumbState.labelId,history:t.state.history.value}},"List",t.$attrs,!1),t.$listeners)),t._v(" "),t.state.total.value>0?n("div",{staticClass:"el-pagination annotate-pagination"},[n("span",{staticClass:"mb-10 el-pagination__jump"},[t._v("\n      前往\n      "),n("el-input",{staticClass:"el-pagination__editor",attrs:{type:"number",min:1,max:t.state.total.value},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleKeyup(e)}},model:{value:t.thumbState.gotoNumber,callback:function(e){t.$set(t.thumbState,"gotoNumber",e)},expression:"thumbState.gotoNumber"}}),t._v("\n      张\n    ")],1),t._v(" "),n("el-tooltip",{attrs:{content:"跳转位置为图片在数据集列表中的位置",placement:"top"}},[n("i",{staticClass:"el-icon-question"})])],1):t._e(),t._v(" "),n("UploadForm",{ref:"uploaderRef",attrs:{action:"fakeApi",title:"导入图片",hash:!0,visible:t.thumbState.showDialog,transformFile:t.withDimensionFile,toggleVisible:t.handleClose,params:t.uploadParams},on:{uploadSuccess:t.uploadSuccess,uploadError:t.uploadError}})],1)},o=[],a=n("ed09"),i=n("5c96"),c=n("2ef0"),l=n("bce1"),s=n("739c"),u=n("3da5"),f=n("c623"),d=n("141b"),h=n("6cd3");function p(t){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},p(t)}function v(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */v=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(C){l=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),c=new I(o||[]);return r(i,"_invoke",{value:j(t,n,c)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=s;var f={};function d(){}function h(){}function m(){}var b={};l(b,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(b=g);var w=m.prototype=d.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function o(r,a,i,c){var l=u(t[r],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==p(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function j(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return h.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:h,configurable:!0}),h.displayName=l(m,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,l(t,c,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),l(O.prototype,i,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new O(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),l(w,c,"Generator"),l(w,a,(function(){return this})),l(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function m(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function b(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){m(a,r,o,i,c,"next",t)}function c(t){m(a,r,o,i,c,"throw",t)}i(void 0)}))}}var y={name:"ThumbContainer",components:{List:h["default"],UploadForm:l["a"],SearchBox:s["a"]},inheritAttrs:!1,props:{state:Object,updateList:Function,updateState:Function,isTrack:Boolean},setup:function(t,e){var n=e.root.$route,r=Object(a["o"])(null),o=Object(a["o"])(null),l=Object(a["o"])(null),s=t.updateList,h=t.state,p=t.updateState,m=t.isTrack,y=h.datasetId,g=[{label:"不限",value:""},{label:"未标注",value:101},{label:"手动标注中",value:102},{label:"自动标注完成",value:103},{label:"手动标注完成",value:104},{label:"未识别",value:105}],w=g.concat({label:"目标跟踪完成",value:201}),x=[{label:"标注状态:",prop:"annotateStatus",type:"checkboxGroup",options:m?w:g},{label:"标签:",prop:"labelId",type:"select",attrs:{multiple:!0,clearable:!0,filterable:!0},options:[]}],O={placement:"bottom-start"},j=Object(a["n"])({type:t.state.fileFilterType.value,labelId:t.state.filterLabelId,showDialog:!1,gotoNumber:1,formItems:x,filterUnfinished:t.state.filterUnfinished}),S={annotateStatus:[""],labelId:[]},_=function(t){var e;j.filterUnfinished=Object(c["isEqual"])(t.annotateStatus.sort(),[u["fileCodeMap"].UNANNOTATED,u["fileCodeMap"].UNRECOGNIZED].sort()),Object.assign(j,{type:t.annotateStatus,labelId:t.labelId,gotoNumber:1}),p({annotations:[],fileFilterType:t.annotateStatus,filterLabelId:t.labelId}),s({type:t.annotateStatus,labelId:t.labelId,offset:0});var n=null===(e=o.value.$refs)||void 0===e?void 0:e.listWrapper;n.scrollTo({top:0})},L=function(t){l.value.changeOption("annotateStatus",t?[u["fileCodeMap"].UNANNOTATED,u["fileCodeMap"].UNRECOGNIZED]:[""]),l.value.handleOk(),p({filterUnfinished:t})},I=function(){j.showDialog=!1},E=function(){var t=b(v().mark((function t(e){var n;return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=Object(u["getFileFromMinIO"])(e),Object(f["f"])(y.value,n).then((function(){i["Message"].success("上传成功"),s({type:j.type})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),k=function(t){i["Message"].error("上传失败",t)},C=function(){j.showDialog=!0},T={datasetId:y.value,objectPath:"dataset/".concat(y.value,"/origin")},A=function(){var t=b(v().mark((function t(e){var r,o,a,i,c,l;return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(r=e.target,o=e.keyCode,a=r.value,13!==o){t.next=14;break}return parseInt(r.value,10)<parseInt(r.min,10)&&(j.gotoNumber=r.min,a=r.min),parseInt(r.value,10)>parseInt(r.max,10)&&(j.gotoNumber=r.max,a=r.max),t.next=7,Object(d["h"])(y.value,{offset:a-1,limit:1});case 7:if(i=t.sent,c=/(\/file\/)(\d+)$/,!(i.result.length>0)){t.next=14;break}if(h.currentImgId.value!==i.result[0].id){t.next=12;break}return t.abrupt("return");case 12:l=n.path.replace(c,"$1".concat(i.result[0].id)),window.location.replace(l);case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(a["r"])((function(){return h.labels.value}),(function(t){var e=j.formItems.findIndex((function(t){return"labelId"===t.prop}));j.formItems[e].options=t.map((function(t){return{label:t.name,value:t.id}}))}),{immediate:!0}),Object(a["r"])((function(){return h.currentImgId.value}),function(){var t=b(v().mark((function t(e){var n,r;return v().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n={type:j.type,labelId:j.labelId},e){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,Object(d["v"])(y.value,e,n);case 5:r=t.sent,j.gotoNumber=r+1;case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),{immediate:!0}),Object(a["r"])((function(){return h.filterUnfinished.value}),(function(t){Object.assign(j,{filterUnfinished:t})})),{listRef:o,searchBoxRef:l,thumbState:j,withDimensionFile:u["withDimensionFile"],uploadParams:T,handleUpload:C,handleClose:I,uploadSuccess:E,uploadError:k,uploaderRef:r,handleKeyup:A,initialValue:S,handleFilter:_,popperAttrs:O,handleStatusChange:L}}},g=y,w=(n("9de6"),n("2877")),x=Object(w["a"])(g,r,o,!1,null,null,null);e["default"]=x.exports},9235:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",{attrs:{placement:"top",width:"240",trigger:"click",title:"编辑标签"},on:{show:t.onShow},model:{value:t.state.visible,callback:function(e){t.$set(t.state,"visible",e)},expression:"state.visible"}},[n("el-form",{ref:"formRef",staticStyle:{"margin-top":"20px"},attrs:{model:t.state.form,rules:t.rules,"label-width":"60px"}},[n("el-form-item",{attrs:{label:"名称",prop:"name"}},[n("el-input",{ref:"inputRef",attrs:{placeholder:"修改标签名称"},model:{value:t.state.form.name,callback:function(e){t.$set(t.state.form,"name",e)},expression:"state.form.name"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"颜色",prop:"color"}},[n("el-color-picker",{model:{value:t.state.form.color,callback:function(e){t.$set(t.state.form,"color",e)},expression:"state.form.color"}})],1),t._v(" "),n("div",{staticClass:"tc"},[n("el-button",{attrs:{type:"text"},on:{click:t.handleCancel}},[t._v("取消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.handleOk}},[t._v("确定")])],1)],1),t._v(" "),n("i",{staticClass:"el-icon-edit",staticStyle:{"margin-left":"4px"},style:t.getStyle(t.item),attrs:{slot:"reference"},slot:"reference"})],1)},o=[],a=n("2b0e"),i=n("ed09"),c=n("61f7"),l={name:"EditLabel",props:{item:{type:Object,default:function(){return{}}},getStyle:Function,title:String},setup:function(t,e){var n=Object(i["o"])(null),r=Object(i["o"])(null),o=Object(i["n"])({visible:!1,form:{name:t.item.name||"",color:t.item.color||"#2e4fde"}}),l={name:[{required:!0,message:"请输入标签名称",trigger:["change","blur"]},{validator:c["p"],trigger:["change","blur"]}]},s=function(){Object.assign(o,{visible:!1,form:{name:t.item.name||"",color:t.item.color||"#2e4fde"}})},u=function(){r.value.validate().then((function(n){n&&(e.emit("handleOk",o.form,t.item),s())}))},f=function(){a["default"].nextTick((function(){var t=n&&n.value.$refs.input;t&&t.focus()}))};return Object(i["r"])((function(){return t.item}),(function(t){t&&(o.form={name:t.name||"",color:t.color||"#2e4fde"})})),{props:t,state:o,rules:l,inputRef:n,formRef:r,handleOk:u,handleCancel:s,onShow:f}}},s=l,u=n("2877"),f=Object(u["a"])(s,r,o,!1,null,null,null);e["default"]=f.exports},9262:function(t,e,n){},9313:function(t,e,n){},"99a2":function(t,e,n){"use strict";n("3c3d")},"9d40":function(t,e,n){},"9de6":function(t,e,n){"use strict";n("2c76")},a07a:function(t,e,n){"use strict";n("bd9e8")},a291:function(t,e,n){"use strict";n.r(e);var r=n("2ef0"),o=n("ed08"),a=n("3da5"),i=48;e["default"]={name:"Score",functional:!0,props:{annotate:Object,offset:Function,transformer:Object,brush:Object,currentAnnotationId:String},render:function(t,e){var n=e.props,c=n.annotate,l=void 0===c?{}:c,s=n.offset,u=n.transformer,f=n.brush,d=l.data,h=void 0===d?{}:d,p=l.id,v=h.bbox,m=h.color,b=void 0===m?a["defaultColor"]:m,y=h.score,g=void 0===y?1:y;if(n.currentAnnotationId===p&&f.isBrushing)return null;if(Object(r["isNil"])(v))return null;var w=s(n.annotate),x={width:Object(o["t"])(w.width),left:Object(o["t"])(w.x+Math.min((w.width-i)/2,0)),top:Object(o["t"])(Math.max(w.y-30,0)),minWidth:Object(o["t"])(i)};l.id===u.id&&(x.transform="translate(".concat(u.dx,"px, ").concat(u.dy,"px)"));var O={backgroundColor:Object(o["x"])(b).alpha(.8),color:Object(o["z"])(b)};return t("div",{class:"annotation-score-row tc",style:x},[t("span",{class:"score",style:O},[Math.floor(100*g),t("span",{class:"unit"},["分"])])])}}},adaf:function(t,e,n){},b86f:function(t,e,n){"use strict";n.r(e);var r=n("2ef0"),o=n("ed08"),a=n("3da5");e["default"]={name:"Tag",functional:!0,props:{annotate:Object,offset:Function,transformer:Object,getLabelName:Function,isMoving:{type:Boolean,default:!1},currentAnnotationId:String,annotationType:String},render:function(t,e){var n=e.props,i=n.annotate,c=void 0===i?{}:i,l=n.getLabelName,s=n.offset,u=n.transformer,f=n.annotationType,d=c.data,h=void 0===d?{}:d,p=c.id,v="shapes"===f?h.points:h.bbox,m=h.color,b=void 0===m?a["defaultColor"]:m;if(n.currentAnnotationId===p&&n.isMoving)return null;if(Object(r["isNil"])(v))return null;var y=s(n.annotate),g={left:Object(o["t"])(y.x),top:Object(o["t"])(y.y),color:Object(o["z"])(b)};c.id===u.id&&(g.transform="translate(".concat(u.dx,"px, ").concat(u.dy,"px)"));var w=Object(o["x"])(b).alpha(.8).toString(),x=l(h.categoryId);return x?t("div",{class:"annotation-label image-tag usn",style:g},[t("el-tag",{attrs:{color:w,"disable-transitions":!0},style:{color:"inherit",border:"none"}},[x])]):null}}},b9c0:function(t,e,n){"use strict";n.r(e);var r=n("2638"),o=n.n(r),a=n("2b0e"),i=n("2ef0"),c=n("ed09"),l=n("ed08"),s=n("df78"),u=n("9f9df"),f=n("0196");function d(t){return d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d(t)}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function v(t,e,n){return e=m(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function m(t){var e=b(t,"string");return"symbol"===d(e)?e:String(e)}function b(t,e){if("object"!==d(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==d(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}e["default"]={name:"BboxWrapper",inheritAttrs:!1,props:{annotate:Object,brush:{type:Object,default:function(){return{}}},onDragStart:Function,onDragMove:Function,onDragEnd:Function,onBrushHandleChange:Function,onBrushHandleEnd:Function,transformer:Object,currentAnnotationId:String,setCurAnnotation:Function,getZoom:Function,handleSize:{type:Number,default:6},offset:Function,scale:{type:Number,default:1},bounds:{type:Object},svg:{type:Object,default:function(){return{}}}},components:{h:c["d"],Drag:s["a"],Bbox:f["default"]},setup:function(t){var e=t.offset,n=t.scale,r=t.onDragStart,o=t.onDragMove,l=t.onDragEnd,s=t.onBrushHandleChange,u=t.bounds,f=void 0===u?{}:u,d=t.onBrushHandleEnd,h=t.setCurAnnotation,v=t.getZoom;function m(){var e=t.annotate.data,n=void 0===e?{}:e,r=n.extent,o=void 0===r?{}:r;return{extent:o,start:{x:o.x0,y:o.y0},end:{x:o.x1,y:o.y1}}}var b=Object(c["n"])(p({activeHandle:void 0,drag:void 0,bounds:{x0:0,x1:f.width,y0:0,y1:f.height}},m())),y=function(t,e){var n=t(b);a["default"].nextTick((function(){Object.assign(b,n),"function"===typeof e&&e(b)}))},g=function(e){y(e,(function(e){"function"===typeof s&&s(e,t.annotate)}))},w=function(e){y(e,(function(e){"function"===typeof d&&d(e,t.annotate)}))},x=function(){var n=t.handleSize,r=e(t.annotate),o=r.x,a=r.y,i=r.width,c=r.height,l=n/2;return{top:{x:o-l,y:a-l,height:n,width:i+n},bottom:{x:o-l,y:a+c-l,height:n,width:i+n},right:{x:o+i-l,y:a-l,height:c+n,width:n},left:{x:o-l,y:a-l,height:c+n,width:n}}},O=function(){var n=t.handleSize,r=e(t.annotate),o=r.x,a=r.y,i=r.width,c=r.height,l=n/2;return{topLeft:{x:o-l,y:a-l},bottomLeft:{x:o-l,y:a+c-l},topRight:{x:o+i-l,y:a-l},bottomRight:{x:o+i-l,y:a+c-l}}},j=function(){h(t.annotate)},S=function(e){var n={x:e.x+e.dx,y:e.y+e.dy},o=p({},n),a={start:n,end:o};"function"===typeof r&&r(a,t.annotate)},_=function(e){var r=v(),a=r.zoom;y((function(t){var r=t.start,o=r.x,i=r.y,c=t.end,l=c.x,s=c.y,u=a*n,f=e.dx>0?Math.min(e.dx/u,t.bounds.x1-l):Math.max(e.dx/u,t.bounds.x0-o),d=e.dy>0?Math.min(e.dy/u,t.bounds.y1-s):Math.max(e.dy/u,t.bounds.y0-i);return p(p({},t),{},{isBrushing:!0,extent:p(p({},t.extent),{},{x0:o+f,x1:l+f,y0:i+d,y1:s+d}),drag:p(p({},e),{},{validDx:f,validDy:d})})}),(function(e){"function"===typeof o&&o(e,t.annotate)}))},L=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.prevState;o.isMoving&&y((function(t){var e=p(p({},t),{},{isBrushing:!1,start:p(p({},t.start),{},{x:Math.min(t.extent.x0,t.extent.x1),y:Math.min(t.extent.y0,t.extent.y1)}),end:p(p({},t.end),{},{x:Math.max(t.extent.x0,t.extent.x1),y:Math.max(t.extent.y0,t.extent.y1)})});return e}),(function(e){"function"===typeof l&&l(e,t.annotate)}))};return Object(c["r"])((function(){return t.bounds}),(function(t){Object(i["isEmpty"])(t)||Object.assign(b,{bounds:{x0:0,x1:f.width,y0:0,y1:f.height}})})),{state:b,updateBrush:y,updateBrushHandler:g,updateBrushHandlerEnd:w,brushHandlerStart:j,handles:x,corners:O,getExtent:m,selectionDragStart:S,selectionDragMove:_,selectionDragEnd:L}},render:function(t){var e=this,n=this.annotate,r=void 0===n?{}:n,a=this.scale,i=this.brush,c=this.handleSize,d=this.transformer,h=this.currentAnnotationId,v=this.handles(),m=this.corners(),b=this.offset(r),y={props:p(p({},this.$attrs),{},{annotate:r,pos:b,transformer:d,currentAnnotationId:h})},g={props:{onDragStart:this.selectionDragStart,onDragMove:this.selectionDragMove,onDragEnd:this.selectionDragEnd,resetOnStart:!0,width:this.svg.width,height:this.svg.height}};return t(s["a"],o()([{},g,{key:r.id}]),[function(n){var o={pointerEvents:i.isBrushing||e.state.activeHandle?"none":"all"},s=Object(l["tb"])(y,{props:p(p({},n),{},{brush:e.state}),style:o}),b=Object.keys(v).map((function(n){var r=v[n];return t(u["c"],{key:"handle-".concat(n),attrs:{type:n,handle:r,scale:a,stageWidth:e.svg.width,stageHeight:e.svg.height,handleBrushStart:e.brushHandlerStart,updateBrush:e.updateBrushHandler,updateBrushEnd:e.updateBrushHandlerEnd,getZoom:e.getZoom}})})),g=Object.keys(m).map((function(n){var o=m[n];return t(u["b"],{attrs:{annotate:r,transformer:d,currentAnnotationId:h,type:n,x:o.x,y:o.y,width:c,height:c,scale:a,stageWidth:e.svg.width,stageHeight:e.svg.height,handleBrushStart:e.brushHandlerStart,updateBrush:e.updateBrushHandler,updateBrushEnd:e.updateBrushHandlerEnd,getZoom:e.getZoom},key:"corner-".concat(n)})}));return t("g",[n.state.isDragging&&t("rect",{attrs:{width:e.svg.width,height:e.svg.height,fill:"transparent"},on:{mouseup:n.dragEnd,mousemove:n.dragMove,mouseleave:function(t){Object(l["gb"])(t,t.target)||n.dragEnd()}},style:{cursor:"move"}}),t(f["default"],s),t("g",{class:"bbox-handles-group"},[b]),t("g",{class:"bbox-corners-group"},[g])])}])}}},bd5a:function(t,e,n){},bd9e8:function(t,e,n){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}},beb6:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],staticClass:"dataset-searchLabel tr"},[t.state.open?n("div",[n("el-input",{ref:"inputRef",staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},on:{change:t.search,input:t.search},model:{value:t.state.value,callback:function(e){t.$set(t.state,"value",e)},expression:"state.value"}},[n("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1):n("i",{staticClass:"el-icon-search cp",on:{click:t.handleOpen}})])},o=[],a=n("2b0e"),i=n("ed09"),c=n("c28b"),l=n.n(c),s={name:"SearchLabel",directives:{clickOutside:l.a.directive},props:{handleSearch:Function},setup:function(t,e){var n=Object(i["o"])(null),r=Object(i["n"])({open:!1,prevValue:"",value:""}),o=function(){r.open=!0,a["default"].nextTick((function(){n.value.focus()}))},c=function(){Object.assign(r,{open:!1,value:""})},l=function(t){!t.target.closest(".dataset-searchLabel")&&r.open&&(c(),e.emit("change",""))},s=function(){r.value!==r.prevValue&&e.emit("change",r.value),a["default"].nextTick((function(){Object.assign(r,{prevValue:r.value})}))};return{state:r,handleOpen:o,onClickOutside:l,search:s,inputRef:n}}},u=s,f=(n("504a"),n("2877")),d=Object(f["a"])(u,r,o,!1,null,null,null);e["default"]=d.exports},c199:function(t,e,n){},c19b:function(t,e,n){"use strict";n("72ee")},c2fa:function(t,e,n){"use strict";n("f4fd")},c623:function(t,e,n){"use strict";n.d(e,"e",(function(){return v})),n.d(e,"b",(function(){return m})),n.d(e,"f",(function(){return b})),n.d(e,"g",(function(){return y})),n.d(e,"h",(function(){return g})),n.d(e,"c",(function(){return w})),n.d(e,"d",(function(){return x}));var r=n("b775"),o=n("f121"),a=n("88be");function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */c=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",l=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function u(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{u({},"")}catch(C){u=function(t,e,n){return t[e]=n}}function f(t,e,n,o){var a=e&&e.prototype instanceof p?e:p,i=Object.create(a.prototype),c=new I(o||[]);return r(i,"_invoke",{value:j(t,n,c)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=f;var h={};function p(){}function v(){}function m(){}var b={};u(b,a,(function(){return this}));var y=Object.getPrototypeOf,g=y&&y(y(E([])));g&&g!==e&&n.call(g,a)&&(b=g);var w=m.prototype=p.prototype=Object.create(b);function x(t){["next","throw","return"].forEach((function(e){u(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){function o(r,a,c,l){var s=d(t[r],t,a);if("throw"!==s.type){var u=s.arg,f=u.value;return f&&"object"==i(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,c,l)}),(function(t){o("throw",t,c,l)})):e.resolve(f).then((function(t){u.value=t,c(u)}),(function(t){return o("throw",t,c,l)}))}l(s.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function j(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return k()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=S(i,n);if(c){if(c===h)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=d(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===h)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function S(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,S(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),h;var o=d(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function E(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return v.prototype=m,r(w,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:v,configurable:!0}),v.displayName=u(m,s,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,m):(t.__proto__=m,u(t,s,"GeneratorFunction")),t.prototype=Object.create(w),t},t.awrap=function(t){return{__await:t}},x(O.prototype),u(O.prototype,l,(function(){return this})),t.AsyncIterator=O,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new O(f(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(w),u(w,s,"Generator"),u(w,a,(function(){return this})),u(w,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),L(n),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;L(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:E(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),h}},t}function l(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?l(Object(n),!0).forEach((function(e){u(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function u(t,e,n){return e=f(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function f(t){var e=d(t,"string");return"symbol"===i(e)?e:String(e)}function d(t,e){if("object"!==i(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function h(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function p(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){h(a,r,o,i,c,"next",t)}function c(t){h(a,r,o,i,c,"throw",t)}i(void 0)}))}}function v(t){var e=t.datasetId;return delete t.datasetId,Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(e,"/files"),method:"get",params:t}).then(function(){var t=p(c().mark((function t(e){return c().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=s,t.t1=s({},e),t.t2={},t.next=5,Promise.all(e.result.map(function(){var t=p(c().mark((function t(e){return c().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=s,t.t1=s({},e),t.t2={},t.next=5,window.minioClient.presignedGetObject(e.url.replace(a["b"].bucketName+"/",""));case 5:return t.t3=t.sent,t.t4={url:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return t.t3=t.sent,t.t4={result:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function m(t){var e=t.datasetIds;return delete t.datasetIds,t.datasetIds=[e],Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/files"),method:"delete",data:t})}function b(t,e){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(t,"/files"),method:"post",data:{files:e}})}function y(t,e){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(t,"/video"),method:"post",data:e})}function g(t){return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/tableImport"),method:"post",data:t})}function w(t){var e=t.datasetId;return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(e,"/files/audio"),method:"get",params:t}).then(function(){var t=p(c().mark((function t(e){return c().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=s,t.t1=s({},e),t.t2={},t.next=5,Promise.all(e.result.map(function(){var t=p(c().mark((function t(e){return c().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.t0=s,t.t1=s({},e),t.t2={},t.next=5,window.minioClient.presignedGetObject(e.url.replace(a["b"].bucketName+"/",""));case 5:return t.t3=t.sent,t.t4={url:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()));case 5:return t.t3=t.sent,t.t4={result:t.t3},t.abrupt("return",(0,t.t0)(t.t1,t.t2,t.t4));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}function x(t){var e=t.datasetId;return Object(r["a"])({url:"/".concat(o["a"].DATA,"/datasets/").concat(e,"/files/filePage"),method:"post",data:s({},t)})}e["a"]={list:v,del:m}},ca0c:function(t,e,n){"use strict";n("c199")},d447:function(t,e,n){"use strict";n("2fcc")},d698:function(t,e,n){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}},ded6:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace-container flex flex-col"},[t.state.error.value?n("Exception",[n("template",{slot:"desc"},[t._v("\n      "+t._s((t.state.error.value||{}).message||"error")+"\n    ")])],2):n("div",{directives:[{name:"hotkey",rawName:"v-hotkey.stop",value:t.keymap,expression:"keymap",modifiers:{stop:!0}}],staticClass:"workspace-stage flex flex-col f1"},[n("ToolBar",t._g({attrs:{zoomIn:t.zoomIn,zoomOut:t.zoomOut,zoomReset:t.resetZoom,clearSelection:t.clearSelection,api:t.api,setApi:t.setApi,confirm:t.confirm,isSegmentation:t.isSegmentation}},t.listeners)),t._v(" "),n("div",{directives:[{name:"loading",rawName:"v-loading",value:!t.imgInfo.loaded,expression:"!imgInfo.loaded"}],ref:"imgWrapperRef",staticClass:"f1 rel",attrs:{id:"stage"}},[n("ZoomContainer",t._b({ref:"zoomRef",attrs:{controlled:!0,filter:t.filter,onZoom:t.handleZoom}},"ZoomContainer",t.zoom,!1),[n("div",{staticClass:"zoom-content"},[n("div",{staticClass:"zoom-content-bound rel",style:t.dimension.marginStyle},[n("div",{staticClass:"imgWrapper",class:t.dimension.scale<1?"imgScale":"",style:t.dimension.imgScaleStyle},[n("img",{ref:"imgRef",staticClass:"usn",attrs:{src:t.currentImg.url}})]),t._v(" "),n("div",{staticClass:"annotation-element-group abs",style:t.dimension.annotationGroupStyle},[n("svg",{ref:"svgRef",staticClass:"canvas",style:t.dimension.svg},[t.isSegmentation?n("Segmentation",{ref:"segmentationRef",attrs:{stageWidth:t.dimension.svg.width,stageHeight:t.dimension.svg.height,shapes:t.api.shapes,offset:t.offsetBbox,currentAnnotationId:t.state.currentAnnotationId.value,setCurAnnotation:t.setCurAnnotation,updateState:t.updateState,transformZoom:t.transformZoom,scale:t.dimension.scale,getZoom:t.getZoom,bounds:t.dimension.img},on:{change:t.handleShapesChange}}):n("g",[n("Brush",{attrs:{stageWidth:t.dimension.svg.width,stageHeight:t.dimension.svg.height,onBrushStart:t.handleBrushStart,onBrushMove:t.handleBrushMove,onBrushEnd:t.handleBrushEnd,transformZoom:t.transformZoom}}),t._v(" "),n("g",{staticClass:"annotation-group"},t._l(t.api.annotations,(function(e){return n("BboxWrapper",{key:e.id,attrs:{annotate:e,brush:t.brush,offset:t.offset,transformer:t.transformer,svg:t.dimension.svg,scale:t.dimension.scale,bounds:t.dimension.img,onDragStart:t.onDragStart,onDragMove:t.onDragMove,onDragEnd:t.onDragEnd,onBrushHandleChange:t.onBrushHandleChange,onBrushHandleEnd:t.onBrushHandleEnd,currentAnnotationId:t.state.currentAnnotationId.value,setCurAnnotation:t.setCurAnnotation,getZoom:t.getZoom}})})),1)],1)],1),t._v(" "),n("div",{staticClass:"annotation-extra"},[t.state.showScore.value&&!t.isSegmentation?n("div",{staticClass:"annotation-score-group"},t._l(t.api.annotations,(function(e){return n("Score",{key:e.id,attrs:{annotate:e,currentAnnotationId:t.state.currentAnnotationId.value,brush:t.brush,offset:t.offset,transformer:t.transformer}})})),1):t._e(),t._v(" "),t.state.showTag.value?n("div",{staticClass:"annotation-tag-group"},t._l(t.annotations,(function(e){return n("Tag",{key:e.id,attrs:{annotate:e,currentAnnotationId:t.state.currentAnnotationId.value,isMoving:t.isSegmentation?t.transformer.isDragging:t.brush.isBrushing,offset:t.offset,transformer:t.transformer,getLabelName:t.getLabelName,annotationType:t.annotationType}})})),1):t._e(),t._v(" "),t.state.showId.value&&t.isTrack?n("div",{staticClass:"annotation-tag-group"},t._l(t.api.annotations,(function(e){return n("AnnotationId",{key:e.id,attrs:{annotate:e,currentAnnotationId:t.state.currentAnnotationId.value,brush:t.brush,offset:t.offset,transformer:t.transformer,scale:t.dimension.scale,getLabelName:t.getLabelName,imgBounding:t.api.imgBounding}})})),1):t._e(),t._v(" "),t.brush.isBrushing&&t.brush.extent?n("BrushTip",{attrs:{brush:t.brush,dimension:t.dimension}}):t._e()],1)])])])]),t._v(" "),n("DropDownLabel",t._b({attrs:{visible:t.tooltipData.visible,hideTooltip:t.hideTooltip,value:t.api.label.value,handleChange:t.handleSelectChange,labels:t.labels}},"DropDownLabel",t.tooltipData,!1))],1)],1)],1)},o=[],a=n("ed09"),i=n("2ef0"),c=n("0165"),l=n("5c96"),s=n("3da5"),u=n("806c"),f=n("ed08"),d=n("9f9df"),h=n("00a5"),p=n("d934");function v(t){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v(t)}function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){y(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function y(t,e,n){return e=g(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function g(t){var e=w(t,"string");return"symbol"===v(e)?e:String(e)}function w(t,e){if("object"!==v(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==v(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function x(t){var e=t.zoom,n=t.zoomX,r=t.zoomY;return p["b"].translate(n||0,r||0).scale(e||1)}var O,j,S={name:"ZoomContainer",props:{controlled:{type:Boolean,default:!1},disableMouseWheelZoom:{type:Boolean,default:!1},zoomX:{type:Number,default:0},zoomY:{type:Number,default:0},zoom:{type:Number,default:1},minZoom:{type:Number,default:.1},maxZoom:{type:Number,default:8},filter:Function,onZoom:Function},setup:function(t){var e=t.controlled,n=t.minZoom,r=t.maxZoom,o=t.disableMouseWheelZoom,l=t.onZoom,s=t.filter,u=Object(a["o"])(null),f=null,d=Object(a["n"])({lastZoomTransform:null,selection:null,zoomKey:Math.random()}),v=function t(){var n=c["c"].transform;if(e){var r=d.selection,o=d.lastZoomTransform;f.on("zoom",null),f.transform(r,o),f.on("zoom",t)}else Object.assign(d,{zoomKey:Math.random()});for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];"function"===typeof l&&l.apply(void 0,[n].concat(i))},m=function(){Object(i["isFunction"])(s)&&f.filter(s)};return Object(a["k"])((function(){var e=x(t),a=u.value,i=Object(h["a"])(a);f=Object(p["a"])().scaleExtent([n,r]),i.call(f),o?i.call(f).on("wheel.zoom",null):i.call(f),f.transform(i,e),m(),f.on("zoom",v),Object.assign(d,{selection:i,lastZoomTransform:e})})),Object(a["r"])((function(){return[t.zoom,t.zoomX,t.zoomY]}),(function(t,e){var n=!Object(i["isEqual"])(t,e),r={zoom:t[0],zoomX:t[1],zoomY:t[2]};if(n){f.on("zoom",null);var o=x(r);f.transform(d.selection,o),f.on("zoom",v),d.lastZoomTransform=o,d.zoomKey=Math.random()}m()})),b({wrapperRef:u},Object(a["q"])(d))},render:function(){var t=arguments[0],e=this.wrapperRef?Object(p["c"])(this.wrapperRef):{},n=e.x,r=e.y,o=e.k,a={transform:"translate(".concat(n||0,"px, ").concat(r||0,"px) scale(").concat(o||1,")")};return t("div",{ref:"wrapperRef",class:"zoom-wrapper"},[t("span",{class:"dn"},[this.zoomKey]),t("div",{class:"zoom-inner",style:a},[this.$slots.default])])}},_=S,L=(n("ca0c"),n("2877")),I=Object(L["a"])(_,O,j,!1,null,"7290eb4a",null),E=I.exports,k=n("46b1"),C=n("f51d"),T=n("b9c0"),A=n("a291"),P=n("b86f"),N=n("80a3"),F=n("ff81"),D=n("707c"),B=n("0393");function M(t){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},M(t)}function z(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */z=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(E){l=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),c=new _(o||[]);return r(i,"_invoke",{value:x(t,n,c)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(E){return{type:"throw",arg:E}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};l(v,a,(function(){return this}));var m=Object.getPrototypeOf,b=m&&m(m(L([])));b&&b!==e&&n.call(b,a)&&(v=b);var y=p.prototype=d.prototype=Object.create(v);function g(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function w(t,e){function o(r,a,i,c){var l=u(t[r],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==M(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function x(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return I()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=O(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function O(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,O(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function j(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function S(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function _(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function L(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:I}}function I(){return{value:void 0,done:!0}}return h.prototype=p,r(y,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,c,"GeneratorFunction")),t.prototype=Object.create(y),t},t.awrap=function(t){return{__await:t}},g(w.prototype),l(w.prototype,i,(function(){return this})),t.AsyncIterator=w,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new w(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},g(y),l(y,c,"Generator"),l(y,a,(function(){return this})),l(y,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=L,_.prototype={constructor:_,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(S),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),S(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;S(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:L(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function R(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function G(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){R(a,r,o,i,c,"next",t)}function c(t){R(a,r,o,i,c,"throw",t)}i(void 0)}))}}function Z(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function $(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Z(Object(n),!0).forEach((function(e){H(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Z(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function H(t,e,n){return e=U(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function U(t){var e=W(t,"string");return"symbol"===M(e)?e:String(e)}function W(t,e){if("object"!==M(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==M(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var q=n("2c80"),K=0,Y=160,V={name:"WorkSpaceContainer",components:{ZoomContainer:E,Segmentation:B["default"],Exception:k["a"],Brush:d["a"],ToolBar:C["default"],DropDownLabel:F["default"],Score:A["default"],Tag:P["default"],AnnotationId:N["default"],BboxWrapper:T["default"],BrushTip:D["default"]},props:{state:Object,currentImg:{type:Object,default:function(){return null}},drawShapeEnd:Function,createLabel:Function,queryLabels:Function,getLabelName:Function,updateState:Function,handleConfirm:Function,deleteAnnotation:Function,isTrack:Boolean,isSegmentation:Boolean,annotationType:String,handlePrev:Function,handleNext:Function},setup:function(t,e){var n=t.drawShapeEnd,r=t.state,o=t.createLabel,d=t.queryLabels,h=t.updateState,p=t.deleteAnnotation,v=t.handleConfirm,m=t.isSegmentation,b=t.annotationType,y=Object(a["o"])(null),g=Object(a["o"])(null),w=Object(a["o"])(null),x=Object(a["o"])(null),O=Object(a["o"])(null),j=Object(a["e"])(s["labelsSymbol"]),S=Object(a["n"])({annotations:t.state.annotations,shapes:t.state.shapes,label:{},bounding:null,isCenter:!1,imgBounding:null,active:""}),_=Object(a["a"])((function(){return S[b]})),L=Object(a["n"])({id:void 0,dx:0,dy:0,x:void 0,y:void 0}),I=e.listeners,E=Object(u["c"])(),k=E.brush,C=E.onBrushStart,T=E.onBrushMove,A=E.updateBrush,P=E.getExtent,N=E.onBrushReset,F={zoom:Object(u["b"])(r.zoom),zoomX:Object(u["b"])(r.zoomX),zoomY:Object(u["b"])(r.zoomY)},D=Object(u["l"])(F,y),B=D.zoomIn,M=D.zoomOut,R=D.setZoom,Z=D.reset,U=D.zoom,W=D.getZoom,Y=Object(u["k"])(),V=Y.tooltipData,X=Y.showTooltip,Q=Y.hideTooltip,J=Object(u["e"])(),tt=J.imgInfo,et=void 0===tt?{}:tt,nt=J.setImg,rt=function(){return"mousedown"!==c["c"].type},ot=function(t){Object.assign(S,t)},at=function(t){Object.assign(L,t)},it=function(t){return Object(f["db"])(e.refs.zoomRef.wrapperRef,t)},ct={svg:{},img:{},wrapper:{},margin:{},scale:1},lt=Object(a["a"])((function(){if(!Object(i["isNil"])(S.bounding)&&et.loaded&&g.value){var t=S.bounding,e=t.width,n=t.height,r=t.left,o=t.top,a=et.width,c=et.height,l={width:e,height:n-K,left:r,top:o},s=Math.min(l.width/et.width,l.height/et.height,1),u={width:s<1?e:Math.min(a,e),height:s<1?n-K:Math.min(c,n)},f={left:1===s?"".concat((e-a)/2,"px"):0,top:1===s?"".concat((n-K-c)/2,"px"):0,width:"".concat(1===s?a:e,"px"),height:"".concat(1===s?c:n-K,"px")},d=Math.max(l.width-a*s,0)/2,h=Math.max(l.height-c*s,0)/2,p={};d>0&&(p["padding-left"]="".concat(d,"px"),p["padding-right"]="".concat(d,"px")),h>0&&(p["padding-top"]="".concat(h,"px"),p["padding-bottom"]="".concat(h,"px"));var v={left:d,top:h},m={width:a,height:c},b=s<1?{width:"".concat(et.width*s,"px"),height:"".concat(et.height*s,"px"),transition:"opacity 0.4s",opacity:1}:{};return S.isCenter=!0,{svg:u,img:m,wrapper:l,margin:v,marginStyle:p,scale:s,imgScaleStyle:b,annotationGroupStyle:f}}return!et.loaded||0===et.width&&0===et.height?$($({},ct),{},{imgScaleStyle:{opacity:0}}):ct})),st=function(){Q();var t=r.currentAnnotationId.value;t&&p(t)},ut=function(){var t;null===(t=O.value)||void 0===t||t.reset()},ft=function(){var t;null===(t=O.value)||void 0===t||t.finishDraw()},dt=function(){ot({active:"selection"}),Q(),I.selection(!0)};Object(a["r"])((function(){return S.isCenter}),(function(t){if(t){var e=S.bounding,n=e.width,r=e.height,o=Object(f["U"])(x.value),a=o.width,i=o.height,c=lt.value.scale<1?n:lt.value.img.width,l=lt.value.scale<1?r-K:lt.value.img.height;Object.assign(S,{imgBounding:[(c-a)/2,(l-i)/2]})}}));var ht=Object(a["a"])((function(){return{left:{keyup:t.handlePrev},right:{keyup:t.handleNext},backspace:st,delete:st,n:dt,esc:ut,f:ft}})),pt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h({currentAnnotationId:t.id||""})},vt=function(t){Q();var e=t.x,n=t.y;C({x:e,y:n}),pt(void 0)},mt=function(t){var e=t.end||{},n=e.x,r=e.y;T({x:n,y:r})},bt=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r.prevState,a=void 0===o?{}:o;if(t.end&&a.isDragging)return X({},e,{el:y.value}),n&&n(t,e),void N();N()},yt=function(){return I.selection(!1)},gt=function(t){return!!(j.value||[]).find((function(e){return e.id===Number(t)}))},wt=function(t){var e=lt.value.scale<1&&!Object(i["isNil"])(S.imgBounding)?S.imgBounding[0]:0,n=lt.value.scale<1&&!Object(i["isNil"])(S.imgBounding)?S.imgBounding[1]:0,r={x:t.x*lt.value.scale+e,y:t.y*lt.value.scale+n};return t.width&&t.height&&Object.assign(r,{width:t.width*lt.value.scale,height:t.height*lt.value.scale}),r},xt=function(t){var e=t.data,n=void 0===e?{}:e,r=m?Object(f["Ab"])(n.points):Object(f["M"])(n.extent);return wt(r)},Ot=function(t,e){var n=xt(e);h((function(n){var r=n.annotations.findIndex((function(t){return t.id===e.id}));if(r>-1){var o=n.annotations[r],a=$($({},o),{},{data:$($({},o.data),{},{extent:t.extent})}),i=Object(f["Kb"])(n.annotations,r,a);return $($({},n),{},{annotations:i})}return n})),A((function(t){return $($({},t),{},{isBrushing:!0,extent:{x0:n.x,x1:n.x+n.width,y0:n.y,y1:n.y+n.height}})}))},jt=function(t,e){var n=xt(e);A((function(t){return $($({},t),{},{isBrushing:!1,extent:{x0:n.x,x1:n.x+n.width,y0:n.y,y1:n.y+n.height}})}))},St=function(){v().then((function(){l["Message"].success({message:"人工确认成功",duration:400,onClose:t.handleNext})}))},_t=function(){var t=G(z().mark((function t(n){var a,i,c,l,s,u;return z().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n,gt(n)){t.next=9;break}return t.next=4,o({name:n});case 4:return a=t.sent,t.next=7,d();case 7:i=t.sent,h({labels:i});case 9:c=r.currentAnnotationId,l=m?r.shapes:r.annotations,s=$($({},S.label),{},{value:a}),Object.assign(S,{label:s}),u=l.value.find((function(t){return t.id===c.value}))||{},e.emit("selectLabel",{selectedLabel:s,curAnnotation:u}),Q();case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Lt=function(t){t&&R({zoomX:t.x,zoomY:t.y,zoom:t.k})},It=function(t,e){var n=S.annotations.findIndex((function(t){return t.id===e.id}));if(n>-1){var r=Object(f["Gb"])(S.annotations,n);Object.assign(S,{annotations:r})}pt(e);var o=xt(e);A((function(t){var e={x:o.x,y:o.y},n={x:o.x+o.width,y:o.y+o.height};return $($({},t),{},{start:e,end:n,extent:P(e,n)})}))},Et=function(t,e){var n=xt(e),r=t.drag,o=void 0===r?{}:r,a=W(),i=a.zoom,c=o.dx>0?Math.min(o.dx/i,lt.value.svg.width-n.x-n.width):Math.max(o.dx/i,-n.x),l=o.dy>0?Math.min(o.dy/i,lt.value.svg.height-n.y-n.height):Math.max(o.dy/i,-n.y);A((function(t){var e=t.start,n=e.x,r=e.y,o=t.end,a=o.x,i=o.y;return $($({},t),{},{isBrushing:!0,extent:$($({},t.extent),{},{x0:n+c,x1:a+c,y0:r+l,y1:i+l})})})),at({isDragging:!0,id:e.id,x:o.x,y:o.y,dx:c,dy:l})},kt=function(t,e){var n=t.drag,r=void 0===n?{}:n;at({isDragging:!1,id:e.id,x:r.x,y:r.y,dx:0,dy:0}),h((function(t){var n=t.annotations.findIndex((function(t){return t.id===e.id}));if(n>-1){var o=t.annotations[n],a=$($({},o),{},{data:$($({},o.data),{},{extent:{x0:o.data.extent.x0+(r.validDx||0),y0:o.data.extent.y0+(r.validDy||0),x1:o.data.extent.x1+(r.validDx||0),y1:o.data.extent.y1+(r.validDy||0)}})}),i=Object(f["Kb"])(t.annotations,n,a);return $($({},t),{},{annotations:i})}return t})),A((function(t){return $($({},t),{},{isBrushing:!1,start:$($({},t.start),{},{x:Math.min(t.extent.x0,t.extent.x1),y:Math.min(t.extent.y0,t.extent.y1)}),end:$($({},t.end),{},{x:Math.max(t.extent.x0,t.extent.x1),y:Math.max(t.extent.y0,t.extent.y1)})})}))},Ct=function(t){var e=t.type,r=t.state,o=t.options,a=void 0===o?{}:o,i=a.shape,c=a.event;switch(e){case"DRAW_END":c&&X(i,c,{el:y.value}),n(i);break;default:var l=O.value.transformer;at(l),h({shapes:r.shapes})}};return Object(a["k"])((function(){q(document.body,"click",(function(t){var e=t.target;e.closest(".annotation-table")||e.closest("#stage")||e.closest(".label-list")||h({currentAnnotationId:""})})),S.bounding=Object(f["U"])(y.value)})),Object(a["j"])((function(){w.value&&w.value.remove(),w.value=null})),Object(a["r"])((function(){return t.currentImg}),(function(t){Z(),Object.assign(S,{label:{},isCenter:!1,imgBounding:null}),null!==t&&void 0!==t&&t.url&&nt(t.url),ot(H({},b,[])),ut()})),Object(a["r"])((function(){return t.state}),(function(t){b in t&&(S[b]=t[b]||[])})),{listeners:I,imgWrapperRef:y,labels:j,brush:k,clearSelection:yt,filter:rt,zoom:U,zoomIn:B,zoomOut:M,resetZoom:Z,handleZoom:Lt,tooltipData:V,hideTooltip:Q,imgInfo:et,dimension:lt,svgRef:g,imgRef:x,api:S,setApi:ot,handleSelectChange:_t,confirm:St,onDragStart:It,onDragMove:Et,onDragEnd:kt,keymap:ht,handleBrushStart:vt,handleBrushMove:mt,handleBrushEnd:bt,offset:xt,offsetBbox:wt,transformer:L,setTransformer:at,onBrushHandleChange:Ot,onBrushHandleEnd:jt,transformZoom:it,getZoom:W,setCurAnnotation:pt,segmentationRef:O,handleShapesChange:Ct,annotations:_}}},X=V;n("a07a");n.d(e,"ThumbWidth",(function(){return Y}));var Q=Object(L["a"])(X,r,o,!1,null,null,null);e["default"]=Q.exports},e281:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"annotate-container"},[n("ThumbContainer",{ref:"thumbRef",attrs:{state:t.state,currentImg:t.currentImg,updateList:t.updateList,updateState:t.updateState,queryNextPage:t.queryNextPage,isTrack:t.isTrack},on:{changeImg:t.handleChangeImg}}),t._v(" "),n("WorkSpaceContainer",{ref:"workspaceRef",attrs:{isTrack:t.isTrack,isSegmentation:t.isSegmentation,state:t.state,currentImg:t.currentImg,drawShapeEnd:t.drawShapeEnd,createLabel:t.createLabel,queryLabels:t.queryLabels,updateState:t.updateState,getLabelName:t.getLabelName,deleteAnnotation:t.deleteAnnotation,handleConfirm:t.handleConfirm,handlePrev:t.handlePrev,handleNext:t.handleNext,annotationType:t.annotationType},on:{selection:t.handleSelection,brushStart:t.handleBrushStart,save:t.handleSave,remove:t.handleRemoveFile,selectLabel:t.handleSelectLabel}}),t._v(" "),n("SettingContainer",{attrs:{isTrack:t.isTrack,isSegmentation:t.isSegmentation,createLabel:t.createLabel,queryLabels:t.queryLabels,state:t.state,updateState:t.updateState,getColorLabel:t.getColorLabel,deleteAnnotation:t.deleteAnnotation,findRowIndex:t.findRowIndex,annotationType:t.annotationType}})],1)},o=[],a=n("ed09"),i=n("5c96"),c=n("2ef0"),l=n("141b"),s=n("c623"),u=n("b775"),f=n("f121"),d=n("ed08"),h=n("3da5"),p=n("8e3a"),v=n("ded6"),m=n("197cc");function b(t){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b(t)}function y(t,e){return j(t)||O(t,e)||w(t,e)||g()}function g(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(t,e){if(t){if("string"===typeof t)return x(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(t,e):void 0}}function x(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,o,a,i,c=[],l=!0,s=!1;try{if(a=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=a.call(n)).done)&&(c.push(r.value),c.length!==e);l=!0);}catch(u){s=!0,o=u}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return c}}function j(t){if(Array.isArray(t))return t}function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function _(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){L(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function L(t,e,n){return e=I(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I(t){var e=E(t,"string");return"symbol"===b(e)?e:String(e)}function E(t,e){if("object"!==b(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function k(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */k=function(){return t};var t={},e=Object.prototype,n=e.hasOwnProperty,r=Object.defineProperty||function(t,e,n){t[e]=n.value},o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function l(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(C){l=function(t,e,n){return t[e]=n}}function s(t,e,n,o){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),c=new L(o||[]);return r(i,"_invoke",{value:O(t,n,c)}),i}function u(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(C){return{type:"throw",arg:C}}}t.wrap=s;var f={};function d(){}function h(){}function p(){}var v={};l(v,a,(function(){return this}));var m=Object.getPrototypeOf,y=m&&m(m(I([])));y&&y!==e&&n.call(y,a)&&(v=y);var g=p.prototype=d.prototype=Object.create(v);function w(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){function o(r,a,i,c){var l=u(t[r],t,a);if("throw"!==l.type){var s=l.arg,f=s.value;return f&&"object"==b(f)&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,i,c)}),(function(t){o("throw",t,i,c)})):e.resolve(f).then((function(t){s.value=t,i(s)}),(function(t){return o("throw",t,i,c)}))}c(l.arg)}var a;r(this,"_invoke",{value:function(t,n){function r(){return new e((function(e,r){o(t,n,e,r)}))}return a=a?a.then(r,r):r()}})}function O(t,e,n){var r="suspendedStart";return function(o,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw a;return E()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var c=j(i,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=u(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===f)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}function j(t,e){var n=e.method,r=t.iterator[n];if(void 0===r)return e.delegate=null,"throw"===n&&t.iterator.return&&(e.method="return",e.arg=void 0,j(t,e),"throw"===e.method)||"return"!==n&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=u(r,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,f;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,f):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,f)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function _(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function I(t){if(t){var e=t[a];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,o=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:E}}function E(){return{value:void 0,done:!0}}return h.prototype=p,r(g,"constructor",{value:p,configurable:!0}),r(p,"constructor",{value:h,configurable:!0}),h.displayName=l(p,c,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,l(t,c,"GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},w(x.prototype),l(x.prototype,i,(function(){return this})),t.AsyncIterator=x,t.async=function(e,n,r,o,a){void 0===a&&(a=Promise);var i=new x(s(e,n,r,o),a);return t.isGeneratorFunction(n)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},w(g),l(g,c,"Generator"),l(g,a,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},t.values=I,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(_),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return i.type="throw",i.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var c=n.call(a,"catchLoc"),l=n.call(a,"finallyLoc");if(c&&l){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,f):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),f},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),_(n),f}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;_(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:I(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},t}function C(t,e,n,r,o,a,i){try{var c=t[a](i),l=c.value}catch(s){return void n(s)}c.done?e(l):Promise.resolve(l).then(r,o)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function i(t){C(a,r,o,i,c,"next",t)}function c(t){C(a,r,o,i,c,"throw",t)}i(void 0)}))}}var A=20,P=n("df7c"),N=Object(h["annotationBy"])("code"),F={name:"Annotate",components:{ThumbContainer:p["default"],WorkSpaceContainer:v["default"],SettingContainer:m["default"]},setup:function(t,e){var n,r=e.root,o=r.$route,p=r.$router,v=o.params,m=void 0===v?{}:v,b=Object(a["o"])(null),g=Object(a["o"])(null),w=m.datasetId,x=m.fileId,O=(null===(n=sessionStorage.getItem("__current_file"))||void 0===n?void 0:n.split(","))||[];if(!O[0]&&x)sessionStorage.setItem("__current_file","".concat(x,",").concat(w));else if(O[0]&&x&&x!==O[0]){w===O[1]?x=O[0]:sessionStorage.setItem("__current_file","".concat(x,",").concat(w));var j=/(\/file\/)(\d+)$/;window.__IN_CLOUD__&&Object(d["K"])(window.location.pathname,j)&&window.history.replaceState(null,null,window.location.pathname.replace(j,"$1".concat(x)))}else O[0]&&!x&&sessionStorage.setItem("__current_file","");var S=Object(a["o"])(!1),I=o.name.startsWith("TrackDataset"),E=o.name.startsWith("SegmentationDataset"),C=o.name.startsWith("AnnotateDataset"),F=Object(a["n"])({error:null,files:[],addFiles:[],fileFilterType:[""],filterLabelId:[],total:0,offset:0,hasMore:!0,datasetId:Number(w),currentImgId:Number(x)||void 0,rawAnnotations:[],annotations:[],fileInfo:null,fileId:Number(x),currentAnnotationId:"",labels:[],enhanceList:[],lastSelectedLabel:void 0,showScore:!0,showTag:!I,showId:I,zoom:1,zoomX:0,zoomY:0,selection:!1,timestamp:Date.now(),datasetInfo:{},hasEnhanceRecord:!1,history:[],shapes:[],annotateStatus:[""],filterUnfinished:!1});Object(a["m"])(h["labelsSymbol"],Object(a["q"])(F).labels),Object(a["m"])(h["enhanceSymbol"],Object(a["q"])(F).enhanceList);var D=E?"shapes":"annotations",B=E?"points":"bbox",M=function(){var t=T(k().mark((function t(e){var n,r,o=arguments;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:{},t.prev=1,t.next=4,Object(l["v"])(m.datasetId,e,n);case 4:return r=t.sent,t.abrupt("return",r);case 8:throw t.prev=8,t.t0=t["catch"](1),Object.assign(F,{error:new Error("当前文件不不存在")}),new d["e"]("当前文件不存在");case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),z=function(){var t=T(k().mark((function t(){var e,n,r,o,a,i=arguments;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=i.length>0&&void 0!==i[0]?i[0]:{},n=0,Object(c["isNil"])(e.offset)){t.next=6;break}n=e.offset,t.next=11;break;case 6:if(!m.fileId){t.next=11;break}return r=e.type?{type:e.type}:{},t.next=10,M(m.fileId,r);case 10:n=t.sent;case 11:return o=_({limit:A,offset:n},e),t.next=14,Object(l["h"])(m.datasetId,o);case 14:return a=t.sent,Object(c["isEmpty"])(e)&&(a.__offset__=n),t.abrupt("return",a);case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),R=function(){var t=T(k().mark((function t(){var e,n,r=arguments;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,Object(l["w"])(m.datasetId,e);case 3:return n=t.sent,t.abrupt("return",n||[]);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),G=function(){var t=T(k().mark((function t(){var e,n,r=arguments;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=r.length>0&&void 0!==r[0]?r[0]:{},t.next=3,Object(l["d"])(m.datasetId,e);case 3:return n=t.sent,t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),Z=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d["xb"];if("function"===typeof t){var n=t(F);return Object.assign(F,n),void e(F)}Object.assign(F,t),e(F)},$=function(){return E?F.shapes:F.annotations},H=function(t){return(F.labels.find((function(e){return e.id===t}))||{}).color||"#000"},U=function(t){return(F.labels.find((function(e){return e.id===t}))||{}).name||""},W=function(t){var e=t.selectedLabel,n=t.curAnnotation,r=_(_({},n),{},{data:_(_({},n.data),{},{categoryId:e.value,color:H(e.value)})}),o=F[D].findIndex((function(t){return t.id===n.id}));if(-1!==o){var a,i=Object(d["Kb"])(F[D],o,r);Z((a={},L(a,D,i),L(a,"lastSelectedLabel",e.value),a))}},q=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return z(t).then((function(t){var e=t.result,n=void 0===e?[]:e,r=Object(h["transformFiles"])(n),o={addFiles:r,files:F.files.concat(r),hasMore:n.length===A};return Z(o),_(_({},o),{},{raw:n})}))},K=function(t){Object.assign(F,{currentImgId:t})},Y=function(){Z({history:[],rawAnnotations:[],annotations:[],fileInfo:null,lastSelectedLabel:void 0,error:null})},V=function(t){t.id!==F.currentImgId&&(K(t.id),Y())},X=function(t,e,n){e+2>=n.length&&F.hasMore&&!1===S.value&&(S.value=!0,q({offset:F.offset,type:F.fileFilterType,labelId:F.filterLabelId}).then((function(){S.value=!1})))},Q=function(t,e){return F.history.length?(i["MessageBox"].confirm("你还没有保存, 是否确认离开?","提示",{type:"warning",closeOnClickModal:!1}).then((function(){(null===t||void 0===t?void 0:t.id)&&V(t),Object(c["isFunction"])(e)&&e(t)})).catch((function(t){})),"你还没有保存, 是否确认离开"):((null===t||void 0===t?void 0:t.id)&&V(t),Object(c["isFunction"])(e)&&e(t),null)},J=null,tt=function(){J=null},et=function(){var t=F.files,e=F.currentImgId,n=t.findIndex((function(t){return t.id===e}));return{currentImgIndex:n,files:t}},nt=function(){var t=et(),e=t.files,n=t.currentImgIndex;n>0?Q(e[n-1]):J||(J=i["Message"].warning({message:"当前图片不存在或图片已经到顶了",onClose:tt}))},rt=function(){if(!F.filterUnfinished){var t=et(),e=t.files,n=t.currentImgIndex;n>-1&&n<e.length-1?(Q(e[n+1]),X(e[n+1],n+1,e)):J||(J=i["Message"].warning({message:"当前图片不存在或图片已经到底了",onClose:tt}))}},ot=function(){var t=T(k().mark((function t(e){var n;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])("/".concat(f["a"].DATA,"/datasets/files/").concat(m.datasetId,"/").concat(e,"/info"));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return n=t.t0,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),at=function(){var t=T(k().mark((function t(){var e;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(u["a"])("/".concat(f["a"].DATA,"/datasets/").concat(m.datasetId,"/files/first"));case 2:if(t.t0=t.sent,t.t0){t.next=5;break}t.t0={};case 5:return e=t.t0,t.abrupt("return",e);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),it=function(){var t=T(k().mark((function t(e){var n,r,o,a,i,c,l;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,z(e);case 2:n=t.sent,r=n.result,o=n.page,a=void 0===o?{}:o,i=Object(h["transformFiles"])(r),c=i.length?i[0].id:void 0,l={files:Object(h["transformFiles"])(r),error:c?null:new Error("图片不存在"),total:a.total,currentImgId:c,timestamp:Date.now(),hasMore:i.length>=A,offset:i.length},Z(l);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),ct=function(){var t=T(k().mark((function t(e){return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("/".concat(f["a"].DATA,"/datasets/files/").concat(m.datasetId,"/").concat(F.currentImgId,"/annotations"),e).then((function(){Object.assign(F,{history:[]}),i["Message"].success({message:"保存成功",duration:800})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),lt=function(){var t=T(k().mark((function t(e){return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["a"].post("/".concat(f["a"].DATA,"/datasets/files/").concat(m.datasetId,"/").concat(F.currentImgId,"/annotations/finish"),e).then((function(){Object.assign(F,{history:[]}),F.filterUnfinished&&it({type:F.fileFilterType,labelId:F.filterLabelId,offset:0})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),st=function(){var t=T(k().mark((function t(){var e;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e={fileIds:[F.currentImgId],datasetIds:F.datasetId},t.next=3,Object(s["b"])(e).then((function(){i["Message"].success("文件删除成功"),it({type:F.fileFilterType,labelId:F.filterLabelId,offset:0})})).catch((function(t){i["Message"].error(t.message||"删除失败")}));case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),ut=function(t){F.selection=t},ft=function(){Object.assign(F,{currentAnnotationId:""})},dt=function(t){var e=t.data.points,n=g.value.dimension,r=[];if(n.scale<1){var o={width:n.svg.width-n.img.width*n.scale,height:n.svg.height-n.img.height*n.scale};r=e.map((function(t){return _(_({},t),{},{x:t.x-o.width/2,y:t.y-o.height/2})}))}else r=e.slice(0);var a=r.map((function(t){var e={};for(var r in t)e[r]=t[r]/(n.scale||1);return e})),i=_(_({},t),{},{data:_(_({},t.data),{},{points:a})});return i},ht=function(t){var e=t.data.bbox,n=g.value.dimension,r={},o={};if(n.scale<1){var a={width:n.svg.width-n.img.width*n.scale,height:n.svg.height-n.img.height*n.scale};Object.assign(r,_(_({},e),{},{x:e.x-a.width/2,y:e.y-a.height/2}))}else r=e;for(var i in r)o[i]=r[i]/(n.scale||1);var c=_(_({},t),{},{data:_(_({},t.data),{},{bbox:o,extent:Object(d["u"])(o)})});return c},pt=function(t){var e=t.data,n=e.extent,r=e.points,o=E?r:Object(d["M"])(n),a=_(_({},t),{},{data:_(_({},t.data),{},L({},B,o))});return Object(c["omit"])(a,["__type"])},vt=function(t){return E?dt(t):ht(t)},mt=function(t){var e,n=E?{points:t.points}:{bbox:Object(d["R"])(t)},r=F.lastSelectedLabel?{categoryId:F.lastSelectedLabel,color:H(F.lastSelectedLabel)}:{},o={id:Object(d["T"])(),shapeType:E?"polygon":"rect",__type:0,data:_(_({score:1},n),r)},a=vt(o),i=(F[D]||[]).concat(a);Object.assign(F,(e={},L(e,D,i),L(e,"history",F.history.concat(a)),L(e,"currentAnnotationId",a.id),e))},bt=function(t){var e=t.data;return!(!e[B]||!e.categoryId)},yt=function(){if(E){var t=g.value.segmentationRef.validate();if(!t)return"当前标注未完成，不可保存"}var e=F[D].find((function(t){return!bt(t)}));return e?"标注格式异常，请检查字段":""},gt=function(){var t=yt();return t?i["Message"].warning(t||"标注格式异常"):(ct({id:F.currentImgId,annotation:Object(h["stringifyAnnotations"])(F[D].map(pt))}),null)},wt=function(){var t=yt();return t?Promise.reject(new Error(t||"标注格式异常")):lt({annotation:Object(h["stringifyAnnotations"])(F[D].map(pt))})},xt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.length?t[0]:{}},Ot=function(t,e){return t.find((function(t){return t.id===e}))||{}},jt=function(t){var e="",n=/(\/file\/)(\d+)$/;if(Object(d["K"])(window.location.pathname,n))e=window.location.pathname.replace(n,"$1".concat(t)),window.history.replaceState({},"",e);else if(Object(d["K"])(window.location.hash,n))e=window.location.hash.replace(n,"$1".concat(t)),window.history.replaceState({},"",e);else{var r=o.path.split("/file")[0];e=P.join(r,"/file",String(t)),p.history.replace(e)}},St=function(t){var e=$();return(e||[]).findIndex((function(e){return e.id===t}))},_t=function(t){var e=$(),n=St(t);if(n>-1){var r,o=Object(d["Ib"])(e,n);Z((r={},L(r,D,o),L(r,"currentAnnotationId",""),r))}},Lt=function(t){Object.assign(F,{error:new Error(t)})},It=function(){var t=T(k().mark((function t(e,n){var r,o;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e||Lt("文件不存在"),t.next=3,ot(e);case 3:return r=t.sent,r&&!Object(c["isEmpty"])(r)||Lt("图片不存在"),o=r.annotation?Object(h["parseAnnotation"])(r.annotation,n):[],t.abrupt("return",{file:r,annotations:o});case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();Object(a["k"])(T(k().mark((function t(){var e,n,r,a,i,s,u,f,d,v,b,g,w,x,O,j,S,_,I,E,C,T,B,M,G,$,H,U,W,q,K,Y,V;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n={},t.prev=1,t.next=4,Object(l["g"])(m.datasetId);case 4:n=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t["catch"](1),Object.assign(F,{error:new Error("当前数据集不存在，请重新输入")}),t.abrupt("return");case 11:if(r=N(n.annotateType,"component"),o.name.startsWith(r)){t.next=15;break}throw p.push({path:"/data/datasets"}),new Error("不支持该标注类型");case 15:return Object.assign(F,{datasetInfo:n}),t.next=18,R();case 18:if(a=t.sent,m.fileId){t.next=29;break}return t.next=22,at();case 22:if(i=t.sent,"number"!==typeof i){t.next=27;break}return Object.assign(F,{currentImgId:i}),window.__IN_CLOUD__&&(s=window.location.pathname.split("/file")[0],u=P.join(s,"/file",String(i)),window.history.replaceState({},"",u)),t.abrupt("return");case 27:return Object.assign(F,{error:new Error("请检查当前数据集是否存在文件"),labels:a}),t.abrupt("return");case 29:return Object.assign(F,{labels:a}),t.next=32,Promise.allSettled([z()]);case 32:return f=t.sent,d=y(f,1),v=d[0],b=void 0===v?{}:v,t.next=38,Object(l["r"])();case 38:if(g=t.sent,w=g||{},x=w.dictDetails,O=void 0===x?[]:x,j=O.map((function(t){return{label:t.label,value:Number(t.value)}})),"rejected"!==b.status){t.next=44;break}throw Object.assign(F,{error:b.reason}),b.reason;case 44:if(S=b.value.result,_=b.value,I=_.__offset__,E=_.page,C=void 0===E?{}:E,F.offset=I,T=Math.min(C.size,C.total),!(S.length<T&&I>0)){t.next=56;break}return B=I-T+S.length,M={limit:A,offset:B},t.next=53,Object(l["h"])(m.datasetId,M);case 53:G=t.sent,S=G.result,F.offset=B;case 56:return $=Object(h["transformFiles"])(S),H={files:$,addFiles:$,enhanceList:j,total:C.total},U=xt(S),W=Number(m.fileId)||U.id,H.currentImgId=W,Z(H),t.next=64,Object(l["m"])(m.datasetId,U.id);case 64:return q=t.sent,t.next=67,It(W,a);case 67:K=t.sent,Y=K.file,V=K.annotations,Z((e={currentImgId:Y.id,fileInfo:Y,rawAnnotations:V},L(e,D,V),L(e,"hasEnhanceRecord",!Object(c["isNil"])(q)),e));case 71:case"end":return t.stop()}}),t,null,[[1,7]])})))),Object(a["l"])((function(){sessionStorage.setItem("__current_file","")})),Object(a["r"])((function(){return[F.currentImgId,F.timestamp]}),T(k().mark((function t(){var e,n,r,o,a;return k().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e=F.currentImgId,Z({rawAnnotations:[],annotations:[],fileInfo:null}),!e){t.next=11;break}return Z({error:null,fileId:e}),t.next=6,It(e,F.labels);case 6:r=t.sent,o=r.annotations,a=r.file,window.__IN_CLOUD__?sessionStorage.setItem("__current_file","".concat(e,",").concat(F.datasetId)):jt(e),Z((n={rawAnnotations:o},L(n,D,o),L(n,"fileInfo",a),n));case 11:case"end":return t.stop()}}),t)}))));var Et=Object(a["a"])((function(){return Ot(F.files,F.currentImgId)}));return{state:Object(a["q"])(F),thumbRef:b,workspaceRef:g,currentImg:Et,handleSelection:ut,handleBrushStart:ft,drawShapeEnd:mt,handleSave:gt,handleConfirm:wt,gotoFileDetail:jt,updateCurImgId:K,queryFiles:z,queryNextPage:q,updateState:Z,transformFiles:h["transformFiles"],updateList:it,handleSelectLabel:W,changeCurrentImg:V,handleRemoveFile:st,handleChangeImg:Q,handleNextPage:X,handlePrev:nt,handleNext:rt,createLabel:G,queryLabels:R,getColorLabel:H,deleteAnnotation:_t,findRowIndex:St,getLabelName:U,isTrack:I,isSegmentation:E,isDetection:C,annotationType:D}}},D=F,B=(n("fb82"),n("99a2"),n("2877"));n.d(e,"limit",(function(){return A}));var M=Object(B["a"])(D,r,o,!1,null,null,null);e["default"]=M.exports},eaaf:function(t,e,n){t.exports={menuBg:"#f3f7ff",menuText:"#666",menuActiveText:"#1890ff"}},f4fd:function(t,e,n){},f51d:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"workspace-toolbar flex flex-between"},[n("div",{staticClass:"toolbar-left"},[n("el-tooltip",{attrs:{content:t.isSegmentation?"自定义绘制":"绘制选框",placement:"top","open-delay":400}},[n("IconFont",{directives:[{name:"click-outside",rawName:"v-click-outside",value:t.onClickOutside,expression:"onClickOutside"}],class:"selection"===t.api.active?"active":"",attrs:{type:t.isSegmentation?"draw":"SELECTION"},on:{click:t.onSelection}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"放大",placement:"top","open-delay":400}},[n("IconFont",{class:"zoomIn"===t.api.active?"active":"",attrs:{type:"fangda1"},on:{click:t.handleZoomIn}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"缩小",placement:"top","open-delay":400}},[n("IconFont",{class:"zoomOut"===t.api.active?"active":"",attrs:{type:"suoxiao1"},on:{click:t.handleZoomOut}})],1),t._v(" "),n("el-tooltip",{attrs:{content:"重置",placement:"top","open-delay":400}},[n("IconFont",{class:"reset"===t.api.active?"active":"",attrs:{type:"reset"},on:{click:t.handleZoomReset}})],1)],1),t._v(" "),n("div",{staticClass:"toolbar-right"},[n("div",{staticClass:"action-item",on:{click:t.save}},[n("IconFont",{attrs:{type:"baocun"}}),t._v(" "),n("span",[t._v("保存")])],1),t._v(" "),n("div",{staticClass:"action-item",on:{click:t.confirm}},[n("IconFont",{attrs:{type:"finish"}}),t._v(" "),n("span",[t._v("完成")])],1),t._v(" "),n("div",{staticClass:"action-item"},[n("el-popconfirm",{attrs:{title:"确定删除该文件吗？"},on:{onConfirm:t.remove}},[n("span",{attrs:{slot:"reference"},slot:"reference"},[n("i",{staticClass:"el-icon-delete mr-4"}),t._v("删除")])])],1),t._v(" "),n("div",{staticClass:"action-item"},[n("el-tooltip",{attrs:{effect:"dark",placement:"bottom-start"}},[n("div",{attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"label-tooltip"},[n("div",{staticClass:"f14 label-title"},[t._v("快捷键说明：")]),t._v(" "),n("div",{staticClass:"flex tips-wrapper f12"},[n("div",[t._v("上一张：Left")]),t._v(" "),n("div",[t._v("下一张：Right")]),t._v(" "),n("div",[t._v("确认提交：Enter")]),t._v(" "),n("div",[t._v("手动标注: N")]),t._v(" "),n("div",[t._v("删除标注：Backspace")]),t._v(" "),t.isSegmentation?n("div",[t._v("完成绘制：F")]):t._e(),t._v(" "),t.isSegmentation?n("div",[t._v("放弃绘制：ESC")]):t._e(),t._v(" "),t.isSegmentation?n("div",[t._v("连续绘制：SHIFT")]):t._e()])])]),t._v(" "),n("div",[n("IconFont",{attrs:{type:"help"}}),t._v(" "),n("span",[t._v("帮助")])],1)])],1)])])},o=[],a=n("c28b"),i=n.n(a),c={name:"ToolBar",directives:{clickOutside:i.a.directive},props:{api:{type:Object,default:function(){return{}}},zoomIn:Function,zoomOut:Function,zoomReset:Function,clearSelection:Function,confirm:Function,setApi:Function,isSegmentation:Boolean},setup:function(t,e){var n=t.clearSelection,r=t.zoomIn,o=t.zoomOut,a=t.zoomReset,i=t.setApi,c=function(){i({active:"selection"}),e.emit("selection",!0)},l=function(t){t.target.closest(".toolbar-left")||i({active:""}),n()},s=function(){e.emit("save")},u=function(){e.emit("remove")},f=function(){i({active:"zoomIn"}),r()},d=function(){i({active:"zoomOut"}),o()},h=function(){i({active:"reset"}),a()};return{onClickOutside:l,onSelection:c,handleZoomIn:f,handleZoomOut:d,handleZoomReset:h,save:s,remove:u}}},l=c,s=(n("2f37"),n("2877")),u=Object(s["a"])(l,r,o,!1,null,"d14218f4",null);e["default"]=u.exports},fb24:function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.labels.length?n("div",{staticClass:"mb-10"},[n("div",{staticClass:"flex flex-between flex-wrap flex-vertical-align"},[n("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.showLabel,expression:"showLabel"}],staticStyle:{"max-width":"39.9%",padding:"0","margin-bottom":"0"},attrs:{label:t.labelsTitle}}),t._v(" "),n("SearchLabel",{ref:"searchRef",staticStyle:{"padding-bottom":"10px"},on:{change:t.handleSearch}})],1),t._v(" "),n("div",{staticClass:"label-list",staticStyle:{"max-height":"200px",padding:"0 2.5px",overflow:"auto"}},[n("el-row",{staticStyle:{clear:"both"},attrs:{gutter:5}},t._l(t.state.labelData,(function(e){return n("el-col",{key:e.id,attrs:{span:8}},[n("el-tag",{staticClass:"tag-item",style:t.getStyle(e),attrs:{title:e.name,color:e.color},on:{click:function(n){return t.handleEditAnnotation(e,n)}}},[t._v("\n          "+t._s(e.name)+"\n          "),e.labelGroupId?t._e():n("Edit",{attrs:{getStyle:t.getStyle,item:e},on:{handleOk:t.handleEditLabel}})],1)],1)})),1)],1)]):t._e()},o=[],a=n("ed09"),i=n("ed08"),c=n("beb6"),l=n("9235");function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function u(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?u(Object(n),!0).forEach((function(e){d(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(t,e,n){return e=h(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function h(t){var e=p(t,"string");return"symbol"===s(e)?e:String(e)}function p(t,e){if("object"!==s(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!==s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}var v={name:"LabelList",components:{SearchLabel:c["default"],Edit:l["default"]},props:{labels:{type:Array,default:function(){return[]}},currentAnnotationId:{type:String,default:void 0},editLabel:Function,annotations:Array,annotationType:String,updateState:Function,getColorLabel:Function,findRowIndex:Function},setup:function(t){var e=t.annotations,n=t.updateState,r=t.getColorLabel,o=t.findRowIndex,c=t.editLabel,l=t.annotationType,s=Object(a["o"])(null),u=Object(a["n"])({annotations:e,labelData:t.labels,currentAnnotationId:t.currentAnnotationId}),h=function(t){var e=Object(i["z"])(t.color);return{color:e}},p=function(e){u.labelData=e?t.labels.filter((function(t){return t.name.includes(e)})):t.labels},v=Object(a["a"])((function(){return"全部标签(".concat(t.labels.length,")")})),m=Object(a["a"])((function(){return!s.value||!s.value.state.open})),b=function(e,a){if(!a.target.classList.contains("el-icon-edit")){var c=o(u.currentAnnotationId);if(c>-1){var s=t.annotations[c],h=f(f({},s),{},{data:f(f({},s.data),{},{categoryId:e.id,color:r(e.id)})}),p=Object(i["Kb"])(t.annotations,c,h);n(d({},l,p))}}},y=function(t,e){c(e.id,t)};return Object(a["r"])((function(){return t.labels}),(function(t){u.labelData=t})),Object(a["r"])((function(){return t.currentAnnotationId}),(function(t){u.currentAnnotationId=t})),{state:u,searchRef:s,labelsTitle:v,handleEditAnnotation:b,handleEditLabel:y,getStyle:h,showLabel:m,handleSearch:p}}},m=v,b=(n("290d"),n("2877")),y=Object(b["a"])(m,r,o,!1,null,"76be787f",null);e["default"]=y.exports},fb82:function(t,e,n){"use strict";n("9313")},ff81:function(t,e,n){"use strict";n.r(e);var r=n("806c"),o=(n("4723"),{name:"DropDownLabel",functional:!0,render:function(t,e){var n=e.props,o=n.visible,a=n.position,i=n.hideTooltip,c=n.value,l=n.handleChange,s=n.labels,u=void 0===s?[]:s;return t(r["a"],{class:"dropdown-label",attrs:{visible:o,position:a,hideTooltip:i}},[t("el-select",{attrs:{value:c,filterable:!0,"allow-create":!0,"default-first-option":!0,placeholder:"请选择标签"},key:c,on:{change:l}},[u.map((function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}))])])}});e["default"]=o}}]);