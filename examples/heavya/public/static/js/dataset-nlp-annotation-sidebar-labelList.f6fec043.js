(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-nlp-annotation-sidebar-labelList","dataset-components-labelEditor","dataset-components-searchLabel"],{"4d05":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-popover",{key:e.state.dialogKey,attrs:{placement:"top",width:"240",trigger:"click",title:e.props.title},on:{show:e.onShow,hide:e.onHide},model:{value:e.state.visible,callback:function(t){e.$set(e.state,"visible",t)},expression:"state.visible"}},[a("el-form",{ref:"formRef",staticStyle:{"margin-top":"20px"},attrs:{model:e.state.form,rules:e.rules,"label-width":"60px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{ref:"inputRef",attrs:{placeholder:e.props.title},model:{value:e.state.form.name,callback:function(t){e.$set(e.state.form,"name",t)},expression:"state.form.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"颜色",prop:"color"}},[a("el-color-picker",{model:{value:e.state.form.color,callback:function(t){e.$set(e.state.form,"color",t)},expression:"state.form.color"}})],1),e._v(" "),a("div",{staticClass:"tc"},[a("el-button",{attrs:{type:"text"},on:{click:e.handleCancel}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.handleOk}},[e._v("确定")])],1)],1),e._v(" "),a("span",{attrs:{slot:"reference"},slot:"reference"},[e._t("trigger")],2)],1)},l=[],r=a("2b0e"),i=a("ed09"),o=a("61f7"),c=a("2ef0"),s={name:"LabelEditor",props:{getStyle:Function,title:String,labelData:{type:Object,default:function(){return{}}}},setup:function(e,t){var a=Object(i["o"])(null),n=Object(i["o"])(null),l=Object(i["n"])({visible:!1,dialogKey:1,form:{name:e.labelData.name||"",color:e.labelData.color||"#2e4fde"}}),s={name:[{required:!0,message:"请输入标签名称",trigger:["change","blur"]},{validator:o["p"],trigger:["change","blur"]}]},u=function(){Object.assign(l,{visible:!1,form:{name:e.labelData.name||"",color:e.labelData.color||"#2e4fde"}})},d=function(){n.value.validate().then((function(a){a&&(l.form.color===e.labelData.color&&l.form.name===e.labelData.name||t.emit("handleOk",e.labelData.id,l.form),Object(c["isNil"])(e.labelData.name)?u():Object.assign(l,{dialogKey:l.dialogKey+1}))}))},b=function(){r["default"].nextTick((function(){var e=a&&a.value.$refs.input;e&&e.focus()}))},f=function(){Object.assign(l,{dialogKey:l.dialogKey+1})};return{props:e,state:l,rules:s,inputRef:a,formRef:n,handleOk:d,handleCancel:u,onShow:b,onHide:f}}},u=s,d=a("2877"),b=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=b.exports},"4f10":function(e,t,a){"use strict";a.d(t,"e",(function(){return d})),a.d(t,"a",(function(){return b})),a.d(t,"c",(function(){return f})),a.d(t,"d",(function(){return p})),a.d(t,"b",(function(){return m}));var n=a("b775"),l=a("f121");function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function o(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){c(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t,a){return t=s(t),t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function s(e){var t=u(e,"string");return"symbol"===r(t)?t:String(t)}function u(e,t){if("object"!==r(e)||null===e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var n=a.call(e,t||"default");if("object"!==r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function d(e){return Object(n["a"])({url:"/".concat(l["a"].DATA,"/datasets/").concat(e,"/labels"),method:"get"})}function b(e,t){return Object(n["a"])({url:"/".concat(l["a"].DATA,"/datasets/").concat(e,"/labels"),method:"post",data:t})}function f(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return t.labelId=e,Object(n["a"])({url:"/".concat(l["a"].DATA,"/datasets/labels"),method:"put",data:o(o({},t),{},{datasetId:a})})}function p(e){return Object(n["a"])({url:"/".concat(l["a"].DATA,"/datasets/labels/auto/").concat(e),method:"get"})}function m(e,t){return Object(n["a"])({url:"/".concat(l["a"].DATA,"/datasets/labels"),method:"delete",data:{datasetId:e,labelId:t}})}},"504a":function(e,t,a){"use strict";a("9262")},6925:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"mb-10"},[a("div",{staticClass:"flex flex-between flex-wrap flex-vertical-align"},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:e.showLabel,expression:"showLabel"}],staticStyle:{padding:"0","margin-bottom":"0"}},[a("label",{staticClass:"el-form-item__label"},[a("span",{staticClass:"vm"},[e._v(e._s(e.labelsTitle))]),e._v(" "),a("LabelEditor",{attrs:{title:"创建标签"},on:{handleOk:e.handleCreateLabel}},[a("i",{staticClass:"el-icon-circle-plus cp vm primary ml-4",staticStyle:{"font-size":"18px"},attrs:{slot:"trigger"},slot:"trigger"})])],1)]),e._v(" "),a("SearchLabel",{ref:"searchRef",staticStyle:{"padding-bottom":"10px"},on:{change:e.handleSearch}})],1),e._v(" "),a("div",{staticStyle:{"max-height":"200px",padding:"0 2.5px",overflow:"auto"}},[e.state.labelData.length?a("div",[e.labelClickable?a("el-radio-group",{staticStyle:{width:"100%"},attrs:{disabled:!e.fileId},on:{change:e.handleLabelChange},model:{value:e.state.selectedLabel,callback:function(t){e.$set(e.state,"selectedLabel",t)},expression:"state.selectedLabel"}},e._l(e.state.labelData,(function(t){return a("div",{key:t.id,staticClass:"flex flex-between flex-vertical-align label-container"},[a("el-radio",{staticClass:"flex flex-vertical-align",attrs:{label:t.name}},[a("el-tag",{staticClass:"tag-item",style:e.getStyle(t),attrs:{title:t.name,color:t.color}},[e._v("\n              "+e._s(t.name)+"\n            ")])],1),e._v(" "),!e.isPresetDataset(e.type)&&e.isNil(t.labelGroupId)?a("div",{staticClass:"hover-show fr f14 g6"},[a("LabelEditor",{attrs:{title:"修改标签",labelData:t},on:{handleOk:e.handleEdit}},[a("i",{staticClass:"el-icon-edit cp vm ml-4",attrs:{slot:"trigger"},slot:"trigger"})]),e._v(" "),a("i",{staticClass:"el-icon-delete cp vm",on:{click:function(a){return e.handleDelete(e.datasetId,t)}}})],1):e._e()],1)})),0):e._l(e.state.labelData,(function(t){return a("div",{key:t.id,staticClass:"label-container"},[a("el-tag",{staticClass:"tag-item",style:e.getStyle(t),attrs:{title:t.name,color:t.color}},[e._v("\n          "+e._s(t.name)+"\n        ")])],1)}))],2):a("div",{staticClass:"g6 f14"},[e._v("\n      暂无标签，请添加\n    ")])])])},l=[],r=a("5c96"),i=a("ed09"),o=a("ed08"),c=a("beb6"),s=a("2ef0"),u=a("4f10"),d=a("4d05"),b=a("3da5"),f={name:"LabelList",components:{SearchLabel:c["default"],LabelEditor:d["default"]},props:{labels:{type:Array,default:function(){return[]}},currentAnnotationId:{type:String,default:void 0},handleLabel:Function,annotations:Array,createLabel:Function,updateLabels:{type:Function,default:function(){return{}}},labelClickable:{type:Boolean,default:!0},datasetId:Number,type:Number,availLabel:Object,fileId:[String,Number]},setup:function(e,t){var a,n=e.annotations,l=e.labelClickable,c=e.handleLabel,d=e.datasetId,f=Object(i["o"])(null),p=Object(i["n"])({annotations:n,labelData:e.labels,currentAnnotationId:e.currentAnnotationId,selectedLabel:null===(a=e.availLabel)||void 0===a?void 0:a.name}),m=function(e){var t=Object(o["z"])(e.color);return{color:t,display:"inline-block",width:"120px",cursor:l?"pointer":"unset"}},v=function(e){var t=p.labelData.find((function(t){return t.name===e}));t&&l&&c(t)},h=function(t,a){return Object(u["c"])(t,a,d).then((function(){e.updateLabels(d),r["Message"].success({message:"标签修改成功"})}))},g=function(a,n){return Object(u["b"])(a,n.id).then((function(){e.updateLabels(a),t.emit("deleteLabel",n.id),r["Message"].success({message:"标签删除成功"})}))},y=function(t){p.labelData=t?e.labels.filter((function(e){return e.name.includes(t)})):e.labels},O=Object(i["a"])((function(){return"全部标签(".concat(e.labels.length,")")})),j=Object(i["a"])((function(){return!f.value||!f.value.state.open})),w=function(t,a){p.labelData.findIndex((function(e){return e.name===a.name}))>-1?r["Message"].warning("当前标签已存在"):e.createLabel(a)};return Object(i["r"])((function(){return e.labels}),(function(e){p.labelData=e})),Object(i["r"])((function(){return e.availLabel}),(function(e){p.selectedLabel=null===e||void 0===e?void 0:e.name})),Object(i["r"])((function(){return e.currentAnnotationId}),(function(e){p.currentAnnotationId=e})),{state:p,searchRef:f,isNil:s["isNil"],isPresetDataset:b["isPresetDataset"],labelsTitle:O,getStyle:m,handleLabelChange:v,handleEdit:h,handleDelete:g,showLabel:j,handleCreateLabel:w,handleSearch:y}}},p=f,m=(a("9a74"),a("2877")),v=Object(m["a"])(p,n,l,!1,null,"09cdeb8c",null);t["default"]=v.exports},9262:function(e,t,a){},"9a74":function(e,t,a){"use strict";a("d564")},beb6:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.onClickOutside,expression:"onClickOutside"}],staticClass:"dataset-searchLabel tr"},[e.state.open?a("div",[a("el-input",{ref:"inputRef",staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},on:{change:e.search,input:e.search},model:{value:e.state.value,callback:function(t){e.$set(e.state,"value",t)},expression:"state.value"}},[a("el-button",{attrs:{slot:"append",size:"mini",icon:"el-icon-search"},on:{click:e.search},slot:"append"})],1)],1):a("i",{staticClass:"el-icon-search cp",on:{click:e.handleOpen}})])},l=[],r=a("2b0e"),i=a("ed09"),o=a("c28b"),c=a.n(o),s={name:"SearchLabel",directives:{clickOutside:c.a.directive},props:{handleSearch:Function},setup:function(e,t){var a=Object(i["o"])(null),n=Object(i["n"])({open:!1,prevValue:"",value:""}),l=function(){n.open=!0,r["default"].nextTick((function(){a.value.focus()}))},o=function(){Object.assign(n,{open:!1,value:""})},c=function(e){!e.target.closest(".dataset-searchLabel")&&n.open&&(o(),t.emit("change",""))},s=function(){n.value!==n.prevValue&&t.emit("change",n.value),r["default"].nextTick((function(){Object.assign(n,{prevValue:n.value})}))};return{state:n,handleOpen:l,onClickOutside:c,search:s,inputRef:a}}},u=s,d=(a("504a"),a("2877")),b=Object(d["a"])(u,n,l,!1,null,null,null);t["default"]=b.exports},d564:function(e,t,a){}}]);