(window["webpackJsonp_dubhe_web"]=window["webpackJsonp_dubhe_web"]||[]).push([["dataset-pointCloud-editor","dataset-pointCloud-editor-layout~dataset-pointCloud-editor-layout-Header","dataset-pointCloud-editor-core-boundingBox","dataset-pointCloud-editor-core-consts","dataset-pointCloud-editor-core-editor","dataset-pointCloud-editor-core-pointCloudView","dataset-pointCloud-editor-layout-ItemBar-annotation-item","dataset-pointCloud-editor-style-scss"],{"05be":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"itembar",style:e.isOpen.style},[e.collapsed?[n("el-radio-group",{model:{value:e.itemType,callback:function(t){e.itemType=t},expression:"itemType"}},[n("el-radio-button",{attrs:{label:0}},[n("div",{staticClass:"flex button",class:0===e.itemType?"flex-between is-active":"flex-center"},[n("span",[e._v("标注物体")]),e._v(" "),0===e.itemType?n("span",{on:{click:function(t){return t.stopPropagation(),e.handleAllVisible(e.isAllVisible)}}},[e.isAllVisible?n("IconFont",{attrs:{type:"bukejian"}}):n("IconFont",{attrs:{type:"yincang"}})],1):e._e()])]),e._v(" "),n("el-radio-button",{attrs:{label:1}},[n("div",{staticClass:"flex button",class:1===e.itemType?"flex-between is-active":"flex-center"},[n("span",[e._v("标签")]),e._v(" "),1===e.itemType?n("span",{on:{click:function(t){return t.stopPropagation(),e.handleAllVisible(e.isAllVisible)}}},[e.isAllVisible?n("IconFont",{attrs:{type:"bukejian"}}):n("IconFont",{attrs:{type:"yincang"}})],1):e._e()])])],1),e._v(" "),n("div",{staticClass:"item-content"},[e.itemType?e._l(e.labelList,(function(t,i){return n("AnnotationItem",{key:t.name+i,attrs:{"radio-type":e.itemType,record:t,"item-id":i+1},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconFont",{staticClass:"mr-10",attrs:{type:e.isVisible(t.name)?"yincang":"bukejian"},on:{click:function(n){e.handleLabelVisible(!e.isVisible(t.name),t.name)}}})]},proxy:!0}],null,!0)})})):e._l(e.markList,(function(t,i){return n("AnnotationItem",{key:t.nameKey,attrs:{"radio-type":e.itemType,border:t.nameKey===e.selectItem,record:t,"item-id":i+1,options:e.labelList,"handle-edit-label":e.handleEditLabel,"on-click-item":e.onClickItem},scopedSlots:e._u([{key:"icon",fn:function(){return[n("IconFont",{staticClass:"mr-10",attrs:{type:t.visible?"yincang":"bukejian"},on:{click:function(n){return n.stopPropagation(),e.handleVisible(t.nameKey)}}}),e._v(" "),n("el-popconfirm",{attrs:{title:"是否要删除该物体标注?"},on:{onConfirm:function(){return e.handleDelete(t.nameKey)}}},[e.isCheck?e._e():n("IconFont",{attrs:{slot:"reference",type:"shanchu1"},on:{click:function(e){e.stopPropagation()}},slot:"reference"})],1)]},proxy:!0}],null,!0)})}))],2)]:e._e(),e._v(" "),n("div",{staticClass:"icon pointer",on:{click:e.onCollapsed}},[n("i",{class:e.isOpen.icon})])],2)},r=[],o=n("ed09"),a=n("da2d"),s=n("be27"),c={name:"ItemBar",components:{AnnotationItem:s["default"]},props:{labelId:Number},setup:function(e){var t=e.labelId,n=Object(o["e"])(a["editorSymbol"]),i=n.value,r=i.data,s=i.view,c=Object(o["o"])(0),l=Object(o["o"])(!0),u=function(){l.value=!l.value},f=Object(o["a"])((function(){return n.value.isAllVisible})),d=Object(o["a"])((function(){return{icon:l.value?"el-icon-s-unfold":"el-icon-s-fold",style:{width:l.value?"324px":"56px"}}})),v=Object(o["a"])((function(){return r.labelGroup})),h=Object(o["a"])((function(){return r.markList})),p=Object(o["a"])((function(){return n.value.selectObject})),m=Object(o["a"])((function(){return r.isCheck})),y=function(e){n.value.setAllVisible(e)},b=function(e){n.value.setVisibleObject(e)},w=function(e,t){n.value.setVisibleLabel(e,t)},g=function(e){n.value.deleteObject(e)},O=function(e,t){var i=v.value.find((function(t){return t.name===e}));n.value.onSaveObject(i,t)},x=function(e){return Boolean(n.value.getVisible(e))},j=function(e){s.changeSelected(e,!0)};return Object(o["k"])((function(){r.getLabelGroupInfo(t)})),{itemType:c,collapsed:l,isOpen:d,isAllVisible:f,labelList:v,markList:h,selectItem:p,isCheck:m,onCollapsed:u,handleAllVisible:y,handleVisible:b,handleLabelVisible:w,handleDelete:g,handleEditLabel:O,isVisible:x,onClickItem:j}}},l=c,u=(n("c9c4"),n("2877")),f=Object(u["a"])(l,i,r,!1,null,"4ea419d3",null);t["default"]=f.exports},"07c4":function(e,t,n){"use strict";n.r(t);var i=n("39f0");n.d(t,"EditorHeader",(function(){return i["default"]}));var r=n("8047");n.d(t,"ToolBar",(function(){return r["default"]}));var o=n("05be");n.d(t,"ItemBar",(function(){return o["default"]}));var a=n("1f90");n.d(t,"MenuBar",(function(){return a["default"]}));var s=n("b8a2");n.d(t,"PointCloudView",(function(){return s["default"]}))},1333:function(e,t,n){},1583:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{staticClass:"header",staticStyle:{height:"64px"}},[n("EditorHeader",{attrs:{disabled:e.diffDisabled,datasetInfo:e.state}})],1),e._v(" "),n("el-main",{staticClass:"full flex over-hidden",staticStyle:{background:"red"}},[n("div",{staticClass:"toolbar flex flex-col"},[n("ToolBar")],1),e._v(" "),n("div",{staticClass:"flex f1"},[n("div",{staticClass:"flex flex-col flex-auto"},[n("MenuBar",{attrs:{datasetId:e.state.datasetId}}),e._v(" "),n("PointCloudView")],1),e._v(" "),n("ItemBar",{attrs:{labelId:e.state.labelGroupId}})],1)])],1)},r=[],o=n("ed09"),a=n("54d4"),s=n("07c4"),c=n("66e9"),l=n("da2d");function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function f(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */f=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(V){c=function(e,t,n){return e[t]=n}}function l(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new E(r||[]);return i(a,"_invoke",{value:j(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(V){return{type:"throw",arg:V}}}e.wrap=l;var v={};function h(){}function p(){}function m(){}var y={};c(y,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==t&&n.call(w,o)&&(y=w);var g=m.prototype=h.prototype=Object.create(y);function O(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,a,s){var c=d(e[i],e,o);if("throw"!==c.type){var l=c.arg,f=l.value;return f&&"object"==u(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return r("throw",e,a,s)}))}s(c.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function j(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return P()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,i(g,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:p,configurable:!0}),p.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},O(x.prototype),c(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new x(l(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(g),c(g,s,"Generator"),c(g,o,(function(){return this})),c(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},e}function d(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(i,r)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){d(o,i,r,a,s,"next",e)}function s(e){d(o,i,r,a,s,"throw",e)}a(void 0)}))}}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t=y(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=b(e,"string");return"symbol"===u(t)?t:String(t)}function b(e,t){if("object"!==u(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==u(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var w={name:"PointCloudEditor",components:p({},s),setup:function(e,t){var n=t.root.$route,i=Object(o["n"])({datasetId:parseInt(n.query.id,10),labelGroupId:parseInt(n.query.labelGroupId,10),labelGroupType:null}),r=Object(o["o"])(),s=Object(o["o"])(new c["default"]);Object(o["m"])(l["editorSymbol"],s);var u=function(){var e=v(f().mark((function e(){var t,n,r,o,c,l,u,d,v;return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(a["q"])({ids:[i.datasetId]});case 2:t=e.sent,n=t[0],r=n.status,o=n.difficultyCount,c=n.scopeBehind,l=n.scopeFront,u=n.scopeLeft,d=n.scopeRight,v=n.labelGroupType,s.value.data.check=r,s.value.data.setDiffCount(o||0),i.labelGroupType=v,Object.assign(s.value.data.distanceRange,{front:l,behind:c,left:u,right:d});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=Object(o["a"])((function(){return 0===s.value.data.diffCount}));return Object(o["k"])(v(f().mark((function e(){return f().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return s.value.data.datasetId=i.datasetId,u(),e.prev=2,e.next=5,s.value.data.getFilesList({datasetId:i.datasetId});case 5:return e.next=7,s.value.data.getAnnotatedInfo();case 7:s.value.loadPcd(),e.next=12;break;case 10:e.prev=10,e.t0=e["catch"](2);case 12:case"end":return e.stop()}}),e,null,[[2,10]])})))),{state:i,editor:s,diffDisabled:d,itembarRef:r}}},g=w,O=(n("3f7a"),n("2877")),x=Object(O["a"])(g,i,r,!1,null,"c2f555a8",null);t["default"]=x.exports},1596:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flex flex-center flex-col usn"},[n("span",[e._v(e._s(e.fileName))]),e._v(" "),n("div",{staticClass:"flex flex-center flex-row annotation__pagination"},[n("IconFont",{directives:[{name:"click-once",rawName:"v-click-once"}],class:e.className("isFirst"),attrs:{type:"diyizhen"},on:{click:e.toFirst}}),e._v(" "),n("IconFont",{directives:[{name:"click-once",rawName:"v-click-once"}],class:e.className("isPrev"),attrs:{type:"shangyizhen"},on:{click:e.toPrev}}),e._v(" "),n("IconFont",{directives:[{name:"click-once",rawName:"v-click-once"}],class:e.className("isNext"),attrs:{type:"xiayizhen"},on:{click:e.toNext}}),e._v(" "),n("IconFont",{directives:[{name:"click-once",rawName:"v-click-once"}],class:e.className("isLast"),attrs:{type:"zuihouyizhen"},on:{click:e.toLast}}),e._v(" "),e.total?n("el-pagination",{staticClass:"pag",attrs:{"current-page":e.currentModel,"page-size":1,layout:"jumper",total:e.total},on:{"update:currentPage":function(t){e.currentModel=t},"update:current-page":function(t){e.currentModel=t}}}):n("span",[e._v("0")]),e._v("\n    /\n    "+e._s(e.total)+"\n  ")],1)])},r=[],o=n("ed09"),a=n("da2d"),s={name:"FilesAction",setup:function(){var e=Object(o["e"])(a["editorSymbol"]),t=e.value.data,n=Object(o["a"])({get:function(){return t.filesListLength?t.currentIndex+1:(t.setCurrentIndex(0),0)},set:function(n){n!==t.currentIndex+1&&(t.setCurrentIndex(n-1),e.value.resetEditor())}}),i=Object(o["a"])((function(){var e;return null===(e=t.currentFile)||void 0===e?void 0:e.name})),r=Object(o["a"])((function(){return t.filesListLength})),s=Object(o["a"])((function(){return{isFirst:0===t.currentIndex,isPrev:t.currentIndex<1,isNext:t.currentIndex+1>=t.filesListLength,isLast:!t.filesListLength||t.currentIndex+1===t.filesListLength}})),c=function(){s.value.isFirst||(t.setCurrentIndex(0),e.value.resetEditor())},l=function(){s.value.isPrev||(t.setCurrentIndex(t.currentIndex-1),e.value.resetEditor())},u=function(){s.value.isNext||(t.setCurrentIndex(t.currentIndex+1),e.value.resetEditor())},f=function(){s.value.isLast||(t.setCurrentIndex(t.filesListLength-1),e.value.resetEditor())},d=function(e){return{"mr-20 pointer":!0,"icon-disabled":s.value[e]}};return{currentModel:n,fileName:i,total:r,isDisabled:s,toFirst:c,toPrev:l,toNext:u,toLast:f,className:d}}},c=s,l=(n("e382"),n("2877")),u=Object(l["a"])(c,i,r,!1,null,"292f5874",null);t["default"]=u.exports},"18ac":function(e,t,n){},"1f90":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"menubar flex flex-between usn"},[n("div",{staticClass:"left-tool flex flex-vertical-align"},[n("IconFont",{class:e.saveDisable||e.isCheck?"icon-disabled":"cursor-pointer",attrs:{type:"baocun1"},on:{click:e.onSave}})],1),e._v(" "),n("div",{staticClass:"right-tool flex flex-vertical-align"},[n("div",{staticClass:"flex flex-vertical-align pr-20"},[n("span",{staticClass:"pr-5"},[e._v("标注填充不透明度")]),e._v(" "),n("el-popover",{attrs:{title:void 0,placement:"bottom",trigger:"click"}},[n("el-slider",{staticStyle:{width:"200px"},attrs:{"show-tooltip":!1},model:{value:e.opacity,callback:function(t){e.opacity=t},expression:"opacity"}}),e._v(" "),n("div",{staticClass:"slider",attrs:{slot:"reference"},slot:"reference"},[e._v(e._s(e.opacity)+"%")])],1)],1),e._v(" "),n("span",[e._v("多视角 "),n("el-switch",{model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}})],1),e._v(" "),n("el-divider",{staticClass:"divider",attrs:{type:"vertical"}}),e._v(" "),n("span",{staticClass:"f20"},[n("el-tooltip",{attrs:{content:"标注完成"}},[n("IconFont",{class:{pointer:!0,"icon-focus":104===e.isDone,"icon-disabled":e.isCheck},staticStyle:{"padding-right":"10px"},attrs:{type:"biaojiwancheng"},on:{click:e.finish}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"标记为难例"}},[n("IconFont",{class:{pointer:!0,"icon-focus":e.isdifficulty,"icon-disabled":e.isCheck},attrs:{type:"biaojiweinanli"},on:{click:e.onMarkerDifficult}})],1)],1)],1)])},r=[],o=n("ed09"),a=n("2ef0"),s=n("da2d"),c={name:"MenuBar",props:{datasetId:Number},setup:function(e){var t=Object(o["e"])(s["editorSymbol"]),n=t.value.data,i=Object(o["o"])(null),r=Object(o["o"])(!1),c=Object(o["a"])((function(){return n.isCheck})),l=Object(o["a"])({get:function(){return n.multiView},set:function(e){n.setMultiView(e)}}),u=Object(o["a"])({get:function(){return n.meshOpacity},set:function(e){return t.value.setMeshOpacity(e)}}),f=Object(o["a"])((function(){return n.isSave})),d=function(){f.value||c.value||n.onSave()},v=function(){c.value||n.onMarkerDifficult(parseInt(e.datasetId,10))},h=function(){c.value||n.finish()};return Object(o["r"])((function(){return Object(a["cloneDeep"])(n.currentFile)}),(function(e){var t=[null===e||void 0===e?void 0:e.markStatus,null===e||void 0===e?void 0:e.difficulty];i.value=t[0],r.value=t[1]})),{checked:l,opacity:u,saveDisable:f,isDone:i,isCheck:c,isdifficulty:r,onSave:d,onMarkerDifficult:v,finish:h}}},l=c,u=(n("eb3f"),n("2877")),f=Object(u["a"])(l,i,r,!1,null,"368493e3",null);t["default"]=f.exports},"2e5b":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseModal",{staticClass:"el-modal__dark",attrs:{visible:e.visibleValue,title:"文件筛选",width:"700px"},on:{"update:visible":function(t){e.visibleValue=t},cancel:function(t){e.visibleValue=!1},close:function(t){e.checkList=[]},ok:e.handleOk}},[n("div",{staticClass:"flex"},[n("label",{staticClass:"mr-10",staticStyle:{color:"#dbdbdb"}},[e._v("标注状态:")]),e._v(" "),n("el-checkbox-group",{model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},e._l(e.stateMap,(function(t){return n("el-checkbox",{key:t.key,attrs:{label:t.key}},[e._v(e._s(t.val))])})),1)],1)])},r=[],o=n("ed09"),a=n("f109"),s=n("da2d");function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(V){u=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new E(r||[]);return i(a,"_invoke",{value:j(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(V){return{type:"throw",arg:V}}}e.wrap=f;var v={};function h(){}function p(){}function m(){}var y={};u(y,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==t&&n.call(w,o)&&(y=w);var g=m.prototype=h.prototype=Object.create(y);function O(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,a,s){var l=d(e[i],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,s)}),(function(e){r("throw",e,a,s)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,s)}))}s(l.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function j(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return P()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,i(g,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:p,configurable:!0}),p.displayName=u(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,u(e,s,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},O(x.prototype),u(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new x(f(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(g),u(g,s,"Generator"),u(g,o,(function(){return this})),u(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},e}function u(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(i,r)}function f(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){u(o,i,r,a,s,"next",e)}function s(e){u(o,i,r,a,s,"throw",e)}a(void 0)}))}}function d(e,t){return y(e)||m(e,t)||h(e,t)||v()}function v(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function h(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function m(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}function y(e){if(Array.isArray(e))return e}var b={name:"FilterModal",components:{BaseModal:a["a"]},setup:function(){var e=Object(o["o"])(!1),t=Object(o["o"])([]),n=Object(o["o"])(null),i=Object(o["a"])((function(){return Object.entries(s["fileStatusMap"]).map((function(e){var t=d(e,2),n=t[0],i=t[1];return{key:n,val:i}}))})),r=function(t){e.value=!0,n.value=t},a=function(){var i=f(l().mark((function i(){var r;return l().wrap((function(i){while(1)switch(i.prev=i.next){case 0:return r=t.value.some((function(e){return"undefined"===e}))?{datasetId:n.value.data.datasetId}:{datasetId:n.value.data.datasetId,markStatus:t.value},i.next=3,n.value.data.getFilesList(r);case 3:n.value.resetEditor(),n.value.data.setCurrentIndex(0),e.value=!1;case 6:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();return{visibleValue:e,checkList:t,stateMap:i,showModal:r,handleOk:a}}},w=b,g=(n("ea8b"),n("2877")),O=Object(g["a"])(w,i,r,!1,null,"5c47e6c4",null);t["default"]=O.exports},"39f0":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"editor-header flex flex-between flex-vertical-align"},[n("div",{staticClass:"back"},[n("span",{staticClass:"pointer",on:{click:e.goDataset}},[n("i",{staticClass:"el-icon-back"}),e._v("\n      返回\n    ")])]),e._v(" "),n("FilesAction"),e._v(" "),n("div",{staticClass:"flex flex-vertical-align"},[n("el-button",{staticClass:"mr-10",attrs:{type:"primary",disabled:e.isCheck},on:{click:e.onPublish}},[e._v("\n      确认发布\n    ")]),e._v(" "),n("el-button",{attrs:{type:"primary",disabled:e.disabled||e.isCheck},on:{click:e.onDifficultPublish}},[e._v("\n      难例发布\n    ")]),e._v(" "),n("el-divider",{staticClass:"divider",attrs:{type:"vertical"}}),e._v(" "),n("el-tooltip",{attrs:{content:"标注统计","popper-class":"tip-db",placement:"bottom"}},[n("IconFont",{staticClass:"mr-10 f20 pointer",attrs:{type:"xinxitongji"},on:{click:e.openStatisticsModal}})],1),e._v(" "),n("el-tooltip",{attrs:{content:"文件筛选","popper-class":"tip-db",placement:"bottom"}},[n("IconFont",{staticClass:"f20 pointer",attrs:{type:"wenjianshaixuan"},on:{click:e.filterInfo}})],1)],1),e._v(" "),n("statistics-modal",{ref:"modalRef"}),e._v(" "),n("filter-modal",{ref:"filterModalRef"}),e._v(" "),n("dataset-modal",{ref:"datasetModalRef"})],1)},r=[],o=n("ed09"),a=n("5c96"),s=n("da2d"),c=n("438a"),l=n("1596"),u=n("4888"),f=n("2e5b"),d={components:{FilesAction:l["default"],StatisticsModal:u["default"],DatasetModal:c["default"],FilterModal:f["default"]},props:{disabled:Boolean,datasetInfo:{type:Object,default:function(){return{}}}},setup:function(e,t){var n=e.datasetInfo,i=t.root.$router,r=Object(o["e"])(s["editorSymbol"]),c=r.value.data,l=Object(o["o"])(null),u=Object(o["o"])(null),f=Object(o["o"])(null),d=Object(o["a"])((function(){return c.isCheck})),v=function(){return i.push({name:"PointCloud"})},h=function(){a["MessageBox"].confirm("您是否确认要发布这个数据集?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){c.onPublish()}))},p=function(){f.value.showModal("publish",{id:n.datasetId,difficultyCount:c.diffCount,dark:!0,labelGroupId:n.labelGroupId,labelGroupType:n.labelGroupType})},m=function(){u.value.showModal(r.value)},y=function(){l.value.showModal(c.labelInfo)};return{modalRef:l,datasetModalRef:f,filterModalRef:u,isCheck:d,goDataset:v,onPublish:h,filterInfo:m,onDifficultPublish:p,openStatisticsModal:y}}},v=d,h=(n("a311"),n("2877")),p=Object(h["a"])(v,i,r,!1,null,"69e1d9e6",null);t["default"]=p.exports},"3f7a":function(e,t,n){"use strict";n("d234")},"438a":function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("BaseModal",{class:{"el-modal__dark":e.state.dark},attrs:{visible:e.state.modalVisible,title:e.title,loading:e.state.confirmLoading,width:"700px",okText:"提交"},on:{"update:visible":function(t){return e.$set(e.state,"modalVisible",t)},cancel:function(t){e.state.modalVisible=!1},ok:e.onSubmit,close:e.onClose}},[n("el-form",{ref:"formRef",attrs:{model:e.modelState,rules:e.rules,"label-width":"100px"}},[e.state.difficultyCount?[n("el-form-item",{attrs:{label:"难例数量"}},[n("label",{staticStyle:{"font-size":"16px",color:"#abb9f2"}},[e._v(e._s(e.state.difficultyCount))])])]:e._e(),e._v(" "),n("el-form-item",{attrs:{label:"数据集名称",prop:"name"}},[n("el-input",{attrs:{placeholder:"请输入数据集名称","show-word-limit":""},model:{value:e.modelState.name,callback:function(t){e.$set(e.modelState,"name",t)},expression:"modelState.name"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"标签组",prop:"labelGroupId"}},[n("el-cascader",{staticStyle:{width:"100%","line-height":"32px"},attrs:{clearable:"",placeholder:"请选择标签组",options:e.labelGroupOptions,props:{expandTrigger:"hover"},"show-all-levels":!1,filterable:"",disabled:e.isDisabled},on:{change:e.handleGroupChange},model:{value:e.modelState.labelGroup,callback:function(t){e.$set(e.modelState,"labelGroup",t)},expression:"modelState.labelGroup"}})],1),e._v(" "),n("el-form-item",{attrs:{label:"描述"}},[n("el-input",{attrs:{type:"textarea",placeholder:"数据集描述长度不能超过100字",maxlength:"100",rows:"3","show-word-limit":""},model:{value:e.modelState.remark,callback:function(t){e.$set(e.modelState,"remark",t)},expression:"modelState.remark"}})],1),e._v(" "),n("div",{class:{"border-primary":e.state.isShow,"border-base":!e.state.isShow},staticStyle:{"border-radius":"4px"}},[n("div",{staticClass:"flex flex-vertical-align pointer",staticStyle:{padding:"10px 10px"},on:{click:e.handleShow}},[n("span",[e.state.isShow?n("label",{staticClass:"el-icon-arrow-down"}):n("label",{staticClass:"el-icon-arrow-right"})]),e._v(" "),n("label",{staticClass:"pl-5"},[e._v("高级设置")])]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.state.isShow,expression:"state.isShow"}],style:{padding:"4px 11px"}},[n("p",[n("span",{staticStyle:{"margin-left":"20px"}},[e._v("标注范围(m)")]),e._v(" "),n("el-tooltip",{attrs:{effect:"dark",placement:"top",content:"标注坐标范围，坐标轴负方向请填写负值"}},[n("i",{staticClass:"el-icon-question"})])],1),e._v(" "),n("el-form-item",{attrs:{"label-width":"10px",error:e.scopeRules}},[n("div",{staticClass:"flex flex-between"},e._l(e.deepPage,(function(t){return n("div",{key:t.key,staticClass:"flex flex-center ml-10"},[n("label",{staticStyle:{width:"110px"}},[e._v(e._s(t.label))]),e._v(" "),n("el-input",{model:{value:e.modelState[t.key],callback:function(n){e.$set(e.modelState,t.key,n)},expression:"modelState[deep.key]"}})],1)})),0)])],1)])],2)],1)},r=[],o=n("ed09"),a=n("5c96"),s=n("2ef0"),c=n("54d4"),l=n("fcbd"),u=n("f109"),f=n("61f7"),d=n("3da5"),v=n("da2d");function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t=b(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){var t=w(e,"string");return"symbol"===h(t)?t:String(t)}function w(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==h(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var g={create:{title:"创建",apiFunc:c["d"]},edit:{title:"编辑",apiFunc:c["j"]},publish:{title:"难例发布",apiFunc:c["h"]}},O=v["statusValueMap"].NOT_SAMPLED,x=v["statusValueMap"].IMPORTING,j=v["statusValueMap"].UNLABELLED,T={name:"",remark:"",labelGroupId:void 0,labelGroup:void 0,scopeFront:0,scopeBehind:0,scopeLeft:0,scopeRight:0},S={components:{BaseModal:u["a"]},setup:function(e,t){var n=t.emit,i=[{value:"custom",label:"自定义标签组",disabled:!1,children:[]},{value:"system",label:"预置标签组",disabled:!1,children:[]}],r={0:"custom",1:"system"},c=Object(o["o"])(i),u=Object(o["o"])(null),v=Object(o["n"])({modalVisible:!1,modalTitle:"create",confirmLoading:!1,difficultyCount:0,status:0,isShow:!1,datasetId:null,labelGroupType:void 0,dark:!1}),h=Object(o["n"])(m({},T)),p=Object(o["a"])((function(){return"publish"===v.modalTitle?g[v.modalTitle].title:"".concat(g[v.modalTitle].title,"数据集")})),b=Object(o["a"])((function(){return"publish"===v.modalTitle||!([O,x,j].includes(v.status)||!v.status)})),w=Object(o["a"])((function(){var e=h.scopeFront,t=h.scopeBehind,n=h.scopeLeft,i=h.scopeRight,r=[e,t,n,i],o=r.filter((function(e){return Object(s["isNil"])(e)||""===e})),a=r.filter((function(e){return!Object(s["isNumber"])(Number(e))||!(e>=-999&&e<=999)}));return o.length?"标注范围不能为空":a.length?"标注范围为数值型,区间范围为-999 - 999":""})),S=[{label:"前(maxX)",key:"scopeFront"},{label:"后(minX)",key:"scopeBehind"},{label:"左(maxY)",key:"scopeLeft"},{label:"右(minY)",key:"scopeRight"}],k={name:[{required:!0,message:"请输入数据集名称",trigger:["change","blur"]},{validator:f["p"],trigger:["change","blur"]}],labelGroupId:[{required:!0,message:"请选择标签组",trigger:"change"}]},E=Object.keys(h),C=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object.assign(h,m({},Object(s["pick"])(t,E))),Object.assign(v,{modalVisible:!0,modalTitle:e,status:(null===t||void 0===t?void 0:t.status)||0,datasetId:t.id,labelGroupType:r[null===t||void 0===t?void 0:t.labelGroupType],difficultyCount:"publish"===e?t.difficultyCount:0,dark:null===t||void 0===t?void 0:t.dark}),v.labelGroupType&&h.labelGroupId&&(h.labelGroup=[v.labelGroupType,h.labelGroupId])},P=function(){v.isShow=!v.isShow},V=function(e){Object.assign(h,{labelGroupId:null!==e&&void 0!==e&&e.length?e[1]:void 0,labelGroup:null!==e&&void 0!==e&&e.length?e:void 0})},I=function(){u.value.validate((function(e){if(e&&!w.value){var t,i;v.confirmLoading=!0;var r=Object(s["cloneDeep"])(h);Reflect.deleteProperty(r,"labelGroup");var o="create"===v.modalTitle?r:m(m({},r),{},y({},"edit"===v.modalTitle?"id":"datasetId",v.datasetId));null===(t=g[v.modalTitle])||void 0===t||null===(i=t.apiFunc)||void 0===i||i.call(t,o).then((function(){v.modalVisible=!1,a["Message"].success("".concat(g[v.modalTitle].title,"成功")),n("success")})).finally((function(){v.confirmLoading=!1}))}}))},N=function(){v.isShow=!1,u.value.resetFields(),Object.assign(h,T)},_=function(e){return e.map((function(e){return{value:e.id,label:e.name,disabled:!1}}))};return Object(o["k"])((function(){var e=[0,1];e.forEach((function(e){Object(l["g"])({type:e,dataType:d["labelGroupTypeMap"].POINT_CLOUD.value,annotateType:d["annotationMap"].ObjectDetection.code}).then((function(t){var n=_(t);c.value[e].children=n}))}))})),{formRef:u,state:v,modelState:h,title:p,isDisabled:b,labelGroupOptions:c,deepPage:S,rules:k,scopeRules:w,showModal:C,handleShow:P,handleGroupChange:V,onSubmit:I,onClose:N}}},k=S,E=(n("f2733"),n("2877")),C=Object(E["a"])(k,i,r,!1,null,"3acb325c",null);t["default"]=C.exports},"43a6":function(e,t,n){},4888:function(e,t,n){"use strict";n.r(t);var i=n("ed09"),r=n("c0ee"),o=n("f109"),a=n("da2d");n("6c31");t["default"]={name:"StatisticsModal",components:{BaseTable:r["a"],BaseModal:o["a"]},setup:function(){var e=Object(i["o"])(!1),t=Object(i["o"])([]),n=Object(i["a"])((function(){return Object(a["getStatisticsColumns"])()})),r=function(n){e.value=!0,t.value=n};return{visibleValue:e,dataSource:t,columns:n,showModal:r}},render:function(){var e=this,t=arguments[0];return t(o["a"],{attrs:{visible:this.visibleValue,title:"标注统计",width:"700px","ok-text":"确认","show-cancel":!1,"show-close":!1},class:"el-modal__dark",on:{ok:function(){e.visibleValue=!1}}},[t(r["a"],{attrs:{size:"small",columns:this.columns,data:this.dataSource,"row-key":"label"}})])}}},"4ea8":function(e,t,n){},"66e9":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return w}));var i=n("5c96"),r=n("6eb8"),o=n("6b42"),a=n("d0bd");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */u=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,i=Object.defineProperty||function(e,t,n){e[t]=n.value},r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",a=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function l(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(V){l=function(e,t,n){return e[t]=n}}function f(e,t,n,r){var o=t&&t.prototype instanceof h?t:h,a=Object.create(o.prototype),s=new E(r||[]);return i(a,"_invoke",{value:j(e,n,s)}),a}function d(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(V){return{type:"throw",arg:V}}}e.wrap=f;var v={};function h(){}function p(){}function m(){}var y={};l(y,o,(function(){return this}));var b=Object.getPrototypeOf,w=b&&b(b(C([])));w&&w!==t&&n.call(w,o)&&(y=w);var g=m.prototype=h.prototype=Object.create(y);function O(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function r(i,o,a,c){var l=d(e[i],e,o);if("throw"!==l.type){var u=l.arg,f=u.value;return f&&"object"==s(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){r("next",e,a,c)}),(function(e){r("throw",e,a,c)})):t.resolve(f).then((function(e){u.value=e,a(u)}),(function(e){return r("throw",e,a,c)}))}c(l.arg)}var o;i(this,"_invoke",{value:function(e,n){function i(){return new t((function(t,i){r(e,n,t,i)}))}return o=o?o.then(i,i):i()}})}function j(e,t,n){var i="suspendedStart";return function(r,o){if("executing"===i)throw new Error("Generator is already running");if("completed"===i){if("throw"===r)throw o;return P()}for(n.method=r,n.arg=o;;){var a=n.delegate;if(a){var s=T(a,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===i)throw i="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i="executing";var c=d(e,t,n);if("normal"===c.type){if(i=n.done?"completed":"suspendedYield",c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i="completed",n.method="throw",n.arg=c.arg)}}}function T(e,t){var n=t.method,i=e.iterator[n];if(void 0===i)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,T(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),v;var r=d(i,e.iterator,t.arg);if("throw"===r.type)return t.method="throw",t.arg=r.arg,t.delegate=null,v;var o=r.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,v):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,v)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function E(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(n.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=void 0,t.done=!0,t};return r.next=r}}return{next:P}}function P(){return{value:void 0,done:!0}}return p.prototype=m,i(g,"constructor",{value:m,configurable:!0}),i(m,"constructor",{value:p,configurable:!0}),p.displayName=l(m,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,l(e,c,"GeneratorFunction")),e.prototype=Object.create(g),e},e.awrap=function(e){return{__await:e}},O(x.prototype),l(x.prototype,a,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,i,r,o){void 0===o&&(o=Promise);var a=new x(f(t,n,i,r),o);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},O(g),l(g,c,"Generator"),l(g,o,(function(){return this})),l(g,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var i in t)n.push(i);return n.reverse(),function e(){for(;n.length;){var i=n.pop();if(i in t)return e.value=i,e.done=!1,e}return e.done=!0,e}},e.values=C,E.prototype={constructor:E,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(k),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(n,i){return a.type="throw",a.arg=e,t.next=n,i&&(t.method="next",t.arg=void 0),!!i}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],a=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var s=n.call(o,"catchLoc"),c=n.call(o,"finallyLoc");if(s&&c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(s){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i];if(r.tryLoc<=this.prev&&n.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var a=o?o.completion:{};return a.type=e,a.arg=t,o?(this.method="next",this.next=o.finallyLoc,v):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),v}},e}function f(e,t,n,i,r,o,a){try{var s=e[o](a),c=s.value}catch(l){return void n(l)}s.done?t(c):Promise.resolve(c).then(i,r)}function d(e){return function(){var t=this,n=arguments;return new Promise((function(i,r){var o=e.apply(t,n);function a(e){f(o,i,r,a,s,"next",e)}function s(e){f(o,i,r,a,s,"throw",e)}a(void 0)}))}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,y(i.key),i)}}function p(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function m(e,t,n){return t=y(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){var t=b(e,"string");return"symbol"===s(t)?t:String(t)}function b(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var w=function(){function e(){var t=this;v(this,e),m(this,"render",(function(){t.view.animationRender()})),this.data=new o["DataProcessing"],this.view=new r["PointCloudView"](this.data),this.storeFunction=null}return p(e,[{key:"html",value:function(){return this.view.canvasDom()}},{key:"loadPcd",value:function(){this.view.loadPointCloud()}},{key:"switchTools",value:function(){this.view.changeCameraContorl()}},{key:"resetEditor",value:function(){var e=d(u().mark((function e(){return u().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.data.resetState(),e.next=3,this.data.getAnnotatedInfo();case 3:this.view.resetView();case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"isAllVisible",get:function(){var e,t,n,i=null===(e=this.view.views.main.scene.children[0])||void 0===e||null===(t=e.children)||void 0===t||null===(n=t.filter((function(e){return!0===e.visible&&"virtual"!==e.name})))||void 0===n?void 0:n.length;return[0,void 0].includes(i)}},{key:"selectObject",get:function(){var e,t;return null===(e=this.view.selected)||void 0===e||null===(t=e.main)||void 0===t?void 0:t.name}},{key:"getVisible",value:function(e){var t,n;return null===(t=this.view.views.main.scene.children[0])||void 0===t||null===(n=t.children)||void 0===n?void 0:n.filter((function(t){var n,i;return(null===(n=t.userData)||void 0===n||null===(i=n.labelInfo)||void 0===i?void 0:i.name)===e&&t.visible})).length}},{key:"setMeshOpacity",value:function(e){var t,n=this;this.data.meshOpacity=e,null===(t=this.view.views.main.scene.children[0])||void 0===t||t.traverseVisible((function(t){var i,r=t.material,o=t.name,a=t.type;r&&o!==(null===(i=n.view.selected)||void 0===i?void 0:i.main.name)&&"Sprite"!==a&&(r.opacity=e/100)}))}},{key:"setAllVisible",value:function(e){var t,n;null===(t=this.view.views.main.scene.children[0])||void 0===t||null===(n=t.children)||void 0===n||n.forEach((function(t){"virtual"!==t.name&&(t.visible=e)})),this.view.selected&&this.view.selected.setOtherVisible(!1),this.view.setHelperVisible(!1),this.view.selected=null}},{key:"setVisibleObject",value:function(e){var t,n;this.view.views.main.scene.children[0].getObjectByName(e).visible=!this.view.views.main.scene.children[0].getObjectByName(e).visible,(null===(t=this.view.selected)||void 0===t||null===(n=t.main)||void 0===n?void 0:n.name)===e&&(this.view.selected.setOtherVisible(!1),this.view.setHelperVisible(!1),this.view.selected=null)}},{key:"setVisibleLabel",value:function(e,t){var n,i=this;null===(n=this.view.views.main.scene.children[0])||void 0===n||n.traverse((function(n){var r,o,a,s;(null===(r=n.userData)||void 0===r||null===(o=r.labelInfo)||void 0===o?void 0:o.name)===t&&(n.visible=e,(null===(a=i.view.selected)||void 0===a||null===(s=a.main)||void 0===s?void 0:s.name)===n.name&&(i.view.selected.setOtherVisible(!1),i.view.setHelperVisible(!1),i.view.selected=null))}))}},{key:"deleteObject",value:function(e){var t,n,r=this;Object.keys(this.view.views).forEach((function(t){var n,i;null===(n=r.view.views[t].scene)||void 0===n||n.children[0].remove(null===(i=r.view.views[t].scene)||void 0===i?void 0:i.children[0].getObjectByName(e))})),(null===(t=this.view.selected)||void 0===t||null===(n=t.main)||void 0===n?void 0:n.name)===e&&(this.view.setHelperVisible(!1),this.view.selected=null);var o=this.data.cuboidStroage.findIndex((function(t){return t.main.name===e}));-1!==o&&(this.data.cuboidStroage.splice(o,1),i["Message"].success("标注物体已删除"))}},{key:"onSaveObject",value:function(e,t){var n=this.data.cuboidStroage.find((function(e){return e.main.name===t}));if(n){Object.assign(n.main.userData.labelInfo,l({},e));var r=this.view.views.main.scene.children[0].getObjectByName(t);r.material.color.set(e.color),r.getObjectByName("mainLine").material.color.set(e.color),Object(a["setText"])(r),i["Message"].success("标签修改成功")}}}]),e}()},"6c31":function(e,t,n){},"6eb8":function(e,t,n){"use strict";n.r(t),n.d(t,"Planes",(function(){return x})),n.d(t,"PointCloudView",(function(){return S}));var i=n("ed09"),r=n("5a89"),o=n("edd4"),a=n("a550"),s=n("5c96"),c=n("2ef0"),l=n("88be"),u=n("d0bd"),f=n("6b42"),d=n("7966");function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function b(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function w(e,t,n){return t=g(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e){var t=O(e,"string");return"symbol"===v(t)?t:String(t)}function O(e,t){if("object"!==v(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==v(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var x={TOP:"topPlane",SIDE:"sidePlane",FRONT:"frontPlane",MAIN:"mainPlane"},j=7,T=window.innerWidth/window.innerHeight,S=function(){function e(t){var n=this;m(this,e),w(this,"renderRayCaster",(function(){if(n.state.toolType===f["ToolType"].ANNOTATION){var e=n.views.main.rayCaster.renderer.intersectObjects(n.views.main.scene.children,!1);if(e.length>0){n.views.main.scene.children[0].add(n.moveBox);var t=e[0];n.moveBox.position.copy(t.point)}}else if(n.views.main.scene.children[0].remove(n.moveBox),n.state.toolType===f["ToolType"].SELECT){if(!n.state.multiView)return;var i=n.views.main.scene.children[0].children,r=n.views.main.rayCaster.renderer,o=r.intersectObjects(i,!1);if(0!==o.length){if(!o[0].object.visible)return;var a=o[0].object.name;if(!a)return;n.changeSelected(a,!1)}}})),this.state=t,this.views={main:{renderer:new r["WebGLRenderer"]({antialias:!0}),scene:new r["Scene"],rayCaster:{renderer:new r["Raycaster"],mouseVector:new r["Vector2"]}},top:{renderer:new r["WebGLRenderer"]({antialias:!0}),scene:new r["Scene"],rayCaster:{renderer:new r["Raycaster"],mouseVector:new r["Vector2"]}},side:{renderer:new r["WebGLRenderer"]({antialias:!0}),scene:new r["Scene"],rayCaster:{renderer:new r["Raycaster"],mouseVector:new r["Vector2"]}},front:{renderer:new r["WebGLRenderer"]({antialias:!0}),scene:new r["Scene"],rayCaster:{renderer:new r["Raycaster"],mouseVector:new r["Vector2"]}}},this.loadSuccess=!1,this.selected=null,this.active={frameCoordinates:{x:0,y:0,z:0},scan:null,detachCam:!1,selectable:!0,detected:!1,translation:{status:!1,helper:null,coordinates:null,offset:new r["Vector3"],inverseMatrix:new r["Matrix4"]},rotation:{status:!1,helper:null,recentMouseVector:new r["Vector2"](0,0),screenInit:{x:0,y:0},screenMove:{x:0,y:0}},resize:{status:!1,helper:null,recentMouseVector:new r["Vector2"](0,0),initScales:{x:1,y:1,z:1},memScales:{x:1,y:1,z:1},resizeVector:new r["Vector3"](0,0,0)}},this.moveBox=e.createVirtualBox(),this.globalHelpers={top:{resize:[],rotate:[]},side:{resize:[],rotate:[]},front:{resize:[],rotate:[]}},this.clock=new r["Clock"],Object.keys(this.views).forEach((function(e){n.views[e].scene.background=new r["Color"](d["default"].MAIN_VIEW_BG)})),a["a"].install({THREE:r}),this.initCameraConfig(),this.initCameraContorl(),this.views.main.renderer.domElement.addEventListener("mousemove",(function(e){if(e.preventDefault(),n.state.toolType!==f["ToolType"].SHIFT){var t=n.views.main.renderer.domElement,i=t.getBoundingClientRect(),r=n.views.main.rayCaster.mouseVector;r.set((e.clientX-(t.offsetLeft+i.left))/t.clientWidth*2-1,-(e.clientY-(t.offsetTop+i.top))/t.clientHeight*2+1)}})),this.views.main.renderer.domElement.addEventListener("mousedown",(function(e){if(e.preventDefault(),n.state.toolType!==f["ToolType"].SHIFT&&!n.loadSuccess){if(n.state.toolType===f["ToolType"].ANNOTATION){var t=n.moveBox.clone(),i=t.position,r=i.x,o=i.y,a=i.z,s=t.scale,c=s.x,l=s.y,u=s.z,d=t.rotation.z,v=[0,0,0,0,0,0,0,u,l,c,r,o,a,d].join(" ");n.dispatchEvent(new CustomEvent("annodown",{bubbles:!1,cancelable:!0,detail:{boxInfo:v,clientX:e.clientX,clientY:e.clientY}}))}if(n.state.toolType===f["ToolType"].SELECT){var h=n.views.main;h.rayCaster.renderer.setFromCamera(h.rayCaster.mouseVector,h.camera);var p=h.rayCaster.renderer.intersectObjects(h.scene.children[0].children,!1);0===p.length&&(n.selected&&(n.selected.setOpacity(n.state.meshOpacity),n.selected.setOtherVisible(!1)),n.setHelperVisible(!1),n.selected=null)}}})),[f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].forEach((function(e){var t=n.views[e].renderer.domElement;t.addEventListener("mousedown",n.startAction.bind(n,e)),t.addEventListener("mousemove",n.moveAction.bind(n,e)),t.addEventListener("mouseup",n.completeActions.bind(n)),t.addEventListener("mouseleave",n.completeActions.bind(n)),t.addEventListener("wheel",(function(t){t.preventDefault();var i=n.views[e].camera;t.deltaY<d["default"].FOV_MIN&&i.zoom<d["default"].FOV_MAX?i.zoom+=d["default"].FOV_INC:t.deltaY>d["default"].FOV_MIN&&i.zoom>d["default"].FOV_MIN+.1&&(i.zoom-=d["default"].FOV_INC),n.setHelperSize(e)}),{passive:!1})}))}return b(e,[{key:"initCameraConfig",value:function(){this.views.main.camera=new r["PerspectiveCamera"](50,T,1,500),this.views.main.camera.position.set(-15,0,4),this.views.main.camera.up.set(0,0,1),this.views.main.camera.lookAt(0,0,10),this.views.main.camera.name="cameramain",this.views.top.camera=new r["OrthographicCamera"](-T*j/2-2,T*j/2+2,j/2+2,-j/2-2,-50,50),this.views.top.camera.position.set(0,0,5),this.views.top.camera.lookAt(0,0,0),this.views.top.camera.up.set(0,0,1),this.views.top.camera.name="cameraTop",this.views.side.camera=new r["OrthographicCamera"](-T*j/2,T*j/2,j/2,-j/2,-50,50),this.views.side.camera.position.set(0,5,0),this.views.side.camera.lookAt(0,0,0),this.views.side.camera.up.set(0,0,1),this.views.side.camera.name="cameraSide",this.views.front.camera=new r["OrthographicCamera"](-T*j/2,T*j/2,j/2,-j/2,-50,50),this.views.front.camera.position.set(3,0,0),this.views.front.camera.up.set(0,0,1),this.views.front.camera.lookAt(0,0,0),this.views.front.camera.name="cameraFront"}},{key:"initCameraContorl",value:function(){var e=this;Object.keys(this.views).forEach((function(t){var n=e.views[t];n.camera&&(t!==f["ViewType"].MAIN?(n.controls=new a["a"](n.camera,n.renderer.domElement),n.controls.mouseButtons.left=a["a"].ACTION.NONE,n.controls.mouseButtons.right=a["a"].ACTION.NONE,n.controls.enabled=!1):(n.controls=new a["a"](n.camera,n.renderer.domElement),n.controls.mouseButtons.left=a["a"].ACTION.NONE,n.controls.mouseButtons.right=a["a"].ACTION.NONE,n.controls.mouseButtons.wheel=a["a"].ACTION.NONE,n.controls.touches.one=a["a"].ACTION.NONE,n.controls.touches.two=a["a"].ACTION.NONE,n.controls.touches.three=a["a"].ACTION.NONE))}))}},{key:"dispatchEvent",value:function(e){this.views.main.renderer.domElement.dispatchEvent(e)}},{key:"resetView",value:function(){var e;null===(e=this.views.main.controls)||void 0===e||e.reset(!1),this.loadPointCloud(),this.changeCameraContorl(),this.resetActives(),this.selected=null}},{key:"startAction",value:function(e,t){if(1===t.detail&&this.state.toolType!==f["ToolType"].SHIFT&&!this.state.isCheck){var n=this.views[e].renderer.domElement,i=n.getBoundingClientRect(),r=this.views[e].rayCaster.mouseVector,o=t.clientX-i.left,a=t.clientY-i.top;r.x=o/n.clientWidth*2-1,r.y=-a/n.clientHeight*2+1,this.active.rotation.screenInit={x:o,y:a},this.active.rotation.screenMove={x:o,y:a},this.selected&&(this.active.scan=e,this.active.selectable=!1)}}},{key:"moveAction",value:function(e,t){if(t.preventDefault(),this.state.toolType!==f["ToolType"].SHIFT&&!this.state.isCheck){var n=this.views[e].renderer.domElement,i=n.getBoundingClientRect(),r=this.views[e].rayCaster.mouseVector,o=t.clientX-i.left,a=t.clientY-i.top;r.x=o/n.clientWidth*2-1,r.y=-a/n.clientHeight*2+1,this.active.rotation.screenMove={x:o,y:a}}}},{key:"completeActions",value:function(){var e=this.active,t=e.scan,n=e.detected;if(this.state.toolType!==f["ToolType"].SHIFT&&!this.state.isCheck)if(n){this.active.rotation.status&&this.detachCamera(t),this.adjustPerspectiveCameras();var i=this.selected[t].position,o=i.x,a=i.y,s=i.z;this.translateReferencePlane(new r["Vector3"](o,a,s)),this.resetActives()}else this.resetActives()}},{key:"resetActives",value:function(){this.active=p(p({},this.active),{},{scan:null,detected:!1,translation:{status:!1,helper:null},rotation:{status:!1,helper:null,recentMouseVector:new r["Vector2"](0,0)},resize:p(p({},this.active.resize),{},{status:!1,helper:null,recentMouseVector:new r["Vector2"](0,0)})}),this.active.selectable=!0}},{key:"adjustPerspectiveCameras",value:function(){var e=this.selected.getReferenceCoordinates(f["ViewType"].TOP),t=new r["Spherical"];t.setFromVector3(e),this.views.top.camera.position.setFromSpherical(t),this.views.top.camera.updateProjectionMatrix();var n=this.selected.getReferenceCoordinates(f["ViewType"].SIDE),i=new r["Spherical"];i.setFromVector3(n),this.views.side.camera.position.setFromSpherical(i),this.views.side.camera.updateProjectionMatrix();var o=this.selected.getReferenceCoordinates(f["ViewType"].FRONT),a=new r["Spherical"];a.setFromVector3(o),this.views.front.camera.position.setFromSpherical(a),this.views.front.camera.updateProjectionMatrix()}},{key:"loadPointCloud",value:function(){var e,t=this;if(this.clearScene(),this.loadSuccess=!1,null!==(e=this.state.currentFile)&&void 0!==e&&e.url){var n="".concat(l["b"].minioBaseUrl,"/").concat(this.state.currentFile.url),i=new o["a"];i.load(n,this.addScene.bind(this),(function(){}),(function(e){t.loadSuccess=!0,s["Notification"].error({title:"解析错误",message:e.message})}))}}},{key:"addScene",value:function(t){var n=this;t.material.size=.05,t.material.color.set("#fff");var i=t.material.clone(),o=t.geometry.boundingSphere.center,a=t.geometry.boundingSphere||{radius:0},s=a.radius;if(this.views.main.camera){var c=-s/2<this.views.main.camera.position.x-o.x&&s/2>this.views.main.camera.position.x-o.x,l=-s/2<this.views.main.camera.position.y-o.y&&s/2>this.views.main.camera.position.y-o.y,u=-s/2<this.views.main.camera.position.z-o.z&&s/2>this.views.main.camera.position.z-o.z,d=0,v=0,h=0;c||(d=o.x),l||(v=o.y),u||(h=o.z),(d||v||h)&&(this.active.frameCoordinates={x:d,y:v,z:h},this.positionAllViews(d,v,h,!1)),[f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].forEach((function(e){n.globalHelpers[e].resize=[],n.globalHelpers[e].rotation=[]})),this.views.main.scene.add(t.clone());var p=new r["Shape"],m=this.state.distanceRange,y=m.front,b=m.behind,w=m.left,g=m.right;p.moveTo(y,w,0),p.lineTo(y,g,0),p.lineTo(b,g,0),p.lineTo(b,w,0),p.autoClose=!0;var O=p.getPoints(),j=(new r["BufferGeometry"]).setFromPoints(O),T=new r["Line"](j,new r["LineBasicMaterial"]({color:13421772,linewidth:30}));this.views.main.scene.add(T);var S=new r["AxesHelper"];this.views.main.scene.add(S);var k=this.views.top.renderer.domElement,E=new r["Mesh"](new r["PlaneBufferGeometry"](k.offsetHeight,k.offsetWidth,k.offsetHeight,k.offsetWidth),new r["MeshBasicMaterial"]({color:16777215,alphaTest:0,visible:!1,transparent:!0,opacity:0}));E.position.set(0,0,0),E.name=x.TOP,E.material.side=r["DoubleSide"],E.verticesNeedUpdate=!0,t.material=i,i.size=.5,this.views.top.scene.add(t.clone()),this.views.top.scene.add(E);var C=e.setupRotationHelper();this.globalHelpers.top.rotation.push(C),this.views.top.scene.add(C),this.setupResizeHelper(f["ViewType"].TOP);var P=this.views.side.renderer.domElement,V=new r["Mesh"](new r["PlaneBufferGeometry"](P.offsetHeight,P.offsetWidth,P.offsetHeight,P.offsetWidth),new r["MeshBasicMaterial"]({color:16777215,alphaTest:0,visible:!1,transparent:!0,opacity:0}));V.position.set(0,0,0),V.rotation.set(-Math.PI/2,Math.PI/2e3,Math.PI),V.name=x.SIDE,V.material.side=r["DoubleSide"],V.verticesNeedUpdate=!0,this.views.side.scene.add(t.clone()),this.views.side.scene.add(V),this.setupResizeHelper(f["ViewType"].SIDE);var I=this.views.front.renderer.domElement,N=new r["Mesh"](new r["PlaneBufferGeometry"](I.offsetHeight,I.offsetWidth,I.offsetHeight,I.offsetWidth),new r["MeshBasicMaterial"]({color:16777215,alphaTest:0,visible:!1,transparent:!0,opacity:0}));N.position.set(0,0,0),N.rotation.set(0,Math.PI/2,0),N.name=x.FRONT,N.material.side=r["DoubleSide"],N.verticesNeedUpdate=!0,this.views.front.scene.add(t.clone()),this.views.front.scene.add(N),this.setupResizeHelper(f["ViewType"].FRONT),this.setHelperVisible(!1),Array.isArray(this.state.oldAnnotatedInfo)&&this.state.oldAnnotatedInfo.length&&this.createBoundingBoxs()}}},{key:"createBoundingBoxs",value:function(){var e,t=this;this.views.main.scene.children[0]&&(this.clearSceneObjects(),this.setHelperVisible(!1),null===(e=this.state.oldAnnotatedInfo)||void 0===e||e.forEach((function(e){t.createBoundingBox(e,!1)})))}},{key:"createBoundingBox",value:function(e,t){var n=this;this.selected&&this.selected.setOtherVisible(!1);var o=e.split(" ").map((function(e,t){return 0===t?e:parseFloat(e)})),a=new u["BoundingBox"],s=a.main.uuid;a.setName(s);var c=this.state.labelGroup.find((function(e){return o[0]===e.name})),l=c||{name:o[0],color:"#58d1c9"};a.setOriginalColor(l.color),a.setColor(l.color),a.setOpacity(this.state.meshOpacity),a.setMainLine(l.color),Object.assign(a.main.userData,{labelInfo:p({},l)}),Object(u["createRotationHelper"])(a.top,f["ViewType"].TOP),Object(u["setTranslationHelper"])(a.top),Object(u["setTranslationHelper"])(a.side),Object(u["setTranslationHelper"])(a.front),Object(u["setEdges"])(a.top),Object(u["setEdges"])(a.side),Object(u["setEdges"])(a.front),this.translateReferencePlane(new r["Vector3"](o[11],o[12],o[13])),a.setPosition(o[11],o[12],o[13]),a.setScale(o[10],o[9],o[8]),a.setRotation(o[14]),Object(u["setText"])(a.main),t?(this.selected=a,a.attachCameraReference(),Object(i["g"])((function(){return n.rotatePlane(0,null)})),this.active.detachCam=!0,this.setSelectedChildScale(1/a.top.scale.x,1/a.top.scale.y,1/a.top.scale.z),this.setHelperVisible(!0),this.updateRotationHelperPos(),this.updateResizeHelperPos()):(a.setOtherVisible(!1),this.setHelperVisible(!1)),this.addSceneChildren(a),this.state.cuboidStroage.push(a)}},{key:"addSceneChildren",value:function(e){this.views.main.scene.children[0].add(e.main),this.views.top.scene.children[0].add(e.top),this.views.side.scene.children[0].add(e.side),this.views.front.scene.children[0].add(e.front)}},{key:"clearScene",value:function(){var e=this;Object.keys(this.views).forEach((function(t){e.views[t].scene.children=[]}))}},{key:"clearSceneObjects",value:function(){var e=this;Object.keys(this.views).forEach((function(t){e.views[t].scene.children[0].children=[]}))}},{key:"changeCameraContorl",value:function(){var e=this.views.main.controls,t=this.state.toolType===f["ToolType"].SHIFT;e.mouseButtons.left=t?a["a"].ACTION.ROTATE:a["a"].ACTION.NONE,e.mouseButtons.right=t?a["a"].ACTION.TRUCK:a["a"].ACTION.NONE,e.mouseButtons.wheel=t?a["a"].ACTION.DOLLY:a["a"].ACTION.NONE}},{key:"positionAllViews",value:function(e,t,n,i){this.views.main.controls&&this.views.top.controls&&this.views.side.controls&&this.views.front.controls&&(this.views.main.controls.setLookAt(e-8,t-8,n+3,e,t,n,i),this.views.top.camera.position.set(e,t,n+8),this.views.top.camera.lookAt(e,t,n),this.views.top.camera.zoom=1,this.views.side.camera.position.set(e,t+8,n),this.views.side.camera.lookAt(e,t,n),this.views.side.camera.zoom=1,this.views.front.camera.position.set(e+8,t,n),this.views.front.camera.lookAt(e,t,n),this.views.front.camera.zoom=1)}},{key:"setDefaultZoom",value:function(){var e=this.views.top.renderer.domElement,t=(new r["Box3"]).setFromObject(this.selected.top),n=.4*Math.min(e.offsetWidth/(t.max.x-t.min.x),e.offsetHeight/(t.max.y-t.min.y));this.views.top.camera.zoom=n/100,this.views.top.camera.updateProjectionMatrix(),this.views.top.camera.updateMatrix(),this.setHelperSize(f["ViewType"].TOP);var i=this.views.front.renderer.domElement,o=(new r["Box3"]).setFromObject(this.selected.front),a=.4*Math.min(i.offsetWidth/(o.max.y-o.min.y),i.offsetHeight/(o.max.z-o.min.z));this.views.front.camera.zoom=a/100,this.views.front.camera.updateProjectionMatrix(),this.views.front.camera.updateMatrix(),this.setHelperSize(f["ViewType"].FRONT);var s=this.views.side.renderer.domElement,c=(new r["Box3"]).setFromObject(this.selected.side),l=.4*Math.min(s.offsetWidth/(c.max.x-c.min.x),s.offsetHeight/(c.max.z-c.min.z));this.views.side.camera.zoom=l/100,this.views.side.camera.updateProjectionMatrix(),this.views.side.camera.updateMatrix(),this.setHelperSize(f["ViewType"].SIDE)}},{key:"detachCamera",value:function(e){var t=this.selected.getReferenceCoordinates(f["ViewType"].TOP),n=new r["Spherical"];n.setFromVector3(t);var i=this.selected.getReferenceCoordinates(f["ViewType"].SIDE),o=new r["Spherical"];o.setFromVector3(i);var a=this.selected.getReferenceCoordinates(f["ViewType"].FRONT),s=new r["Spherical"];s.setFromVector3(a);var c=this.selected,l=c.side,u=c.front,d=c.top,v=this.views.side.camera,h=this.views.front.camera,p=this.views.top.camera;switch(e){case f["ViewType"].TOP:var m=l.getObjectByName("cameraSide").getWorldQuaternion(new r["Quaternion"]);l.remove(v),v.position.setFromSpherical(o),v.lookAt(l.position.x,l.position.y,l.position.z),v.setRotationFromQuaternion(m),v.scale.set(1,1,1);var y=u.getObjectByName("cameraFront").getWorldQuaternion(new r["Quaternion"]);u.remove(h),h.position.setFromSpherical(s),h.lookAt(u.position.x,u.position.y,u.position.z),h.setRotationFromQuaternion(y),h.scale.set(1,1,1);break;case f["ViewType"].SIDE:var b=u.getObjectByName("cameraFront").getWorldQuaternion(new r["Quaternion"]);u.remove(h),h.position.setFromSpherical(s),h.lookAt(u.position.x,u.position.y,u.position.z),h.setRotationFromQuaternion(b),h.scale.set(1,1,1),d.remove(p),p.position.setFromSpherical(n),p.lookAt(d.position.x,d.position.y,d.position.z),p.setRotationFromEuler(d.rotation),p.scale.set(1,1,1);break;case f["ViewType"].FRONT:var w=l.getObjectByName("cameraSide").getWorldQuaternion(new r["Quaternion"]);l.remove(v),v.position.setFromSpherical(o),v.lookAt(l.position.x,l.position.y,l.position.z),v.setRotationFromQuaternion(w),v.scale.set(1,1,1),d.remove(p),p.position.setFromSpherical(n),p.lookAt(d.position.x,d.position.y,d.position.z),p.setRotationFromEuler(d.rotation),p.scale.set(1,1,1);break;default:v.position.setFromSpherical(o),v.lookAt(l.position.x,l.position.y,l.position.z),v.rotation.z=this.views.side.scene.getObjectByName(x.SIDE).rotation.z,v.scale.set(1,1,1),p.position.setFromSpherical(n),p.lookAt(d.position.x,d.position.y,d.position.z),p.setRotationFromEuler(d.rotation),p.scale.set(1,1,1);var g=u.getObjectByName("camRefRot").getWorldQuaternion(new r["Quaternion"]);h.position.setFromSpherical(s),h.lookAt(u.position.x,u.position.y,u.position.z),h.setRotationFromQuaternion(g),h.scale.set(1,1,1)}}},{key:"attachCamera",value:function(e){switch(e){case f["ViewType"].TOP:this.selected.side.attach(this.views.side.camera),this.selected.front.attach(this.views.front.camera);break;case f["ViewType"].SIDE:this.selected.front.attach(this.views.front.camera),this.selected.top.attach(this.views.top.camera);break;case f["ViewType"].FRONT:this.selected.side.attach(this.views.side.camera),this.selected.top.attach(this.views.top.camera);break;default:}}},{key:"setupResizeHelper",value:function(e){for(var t=new r["SphereGeometry"](.15),n=new r["MeshBasicMaterial"]({color:"#ffffff",opacity:1,visible:!0}),i=[],o=0;o<8;o+=1)i[o]=new r["Mesh"](t.clone(),n.clone()),i[o].name="globalResizeHelper".concat(o),this.globalHelpers[e].resize.push(i[o]),this.views[e].scene.add(i[o])}},{key:"setHelperSize",value:function(e){if([f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].includes(e)){var t=this.views[e].camera;if(!t||t instanceof r["PerspectiveCamera"])return;var n=(t.top-t.bottom)/t.zoom,i=this.views[e].scene.getObjectByName("globalRotationHelper");i&&i.scale.set(1,1,1).multiplyScalar(n/10);for(var o=0;o<8;o+=1){var a=this.views[e].scene.getObjectByName("globalResizeHelper".concat(o));a&&a.scale.set(1,1,1).multiplyScalar(n/10)}}}},{key:"updateRotationHelperPos",value:function(){var e=new r["Vector3"](0,0,0);this.selected.top.getObjectByName("rotationHelper").getWorldPosition(e);var t=this.views.top.scene.getObjectByName("globalRotationHelper");t&&t.position.set(e.x,e.y,e.z)}},{key:"updateResizeHelperPos",value:function(){var e=this;[f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].forEach((function(t){var n=0;e.selected[t].children.forEach((function(i){if("resizeHelper"===i.name){var o=new r["Vector3"](0,0,0);i.getWorldPosition(o);var a="globalResizeHelper".concat(n),s=e.views[t].scene.getObjectByName(a);s&&s.position.set(o.x,o.y,o.z),n+=1}}))}))}},{key:"setHelperVisible",value:function(e){var t=this;[f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].forEach((function(n){var i=t.views[n].scene.getObjectByName("globalRotationHelper");i&&(i.visible=e);for(var r=0;r<8;r+=1){var o=t.views[n].scene.getObjectByName("globalResizeHelper".concat(r));o&&(o.visible=e)}}))}},{key:"setSelectedChildScale",value:function(e,t,n){var i=this;[f["ViewType"].TOP,f["ViewType"].SIDE,f["ViewType"].FRONT].forEach((function(r){i.selected[r].children.forEach((function(i){i.name!==d["default"].CUBOID_EDGE_NAME&&i.scale.set(null==e?i.scale.x:e,null==t?i.scale.y:t,null==n?i.scale.z:n)}))}))}},{key:"changeSelected",value:function(e,t){var n=this.state.cuboidStroage.find((function(t){return e===t.main.name})),i=null===n||void 0===n?void 0:n.main.position,r=i.x,o=i.y;if(!(Object(c["isNil"])(r)&&Object(c["isNil"])(o)||null===n||void 0===n)&&n.main.visible&&n){var a;if((null===(a=this.selected)||void 0===a?void 0:a.main.name)===n.main.name)return;this.selected&&(this.selected.setOpacity(this.state.meshOpacity),this.selected.setOtherVisible(!1)),this.selected=n;var s=this.state.meshOpacity;if(this.selected.setOpacity(s>50?s-30:s+30),this.selected.setOtherVisible(!0),this.selected.attachCameraReference(),this.setSelectedChildScale(1/this.selected.top.scale.x,1/this.selected.top.scale.y,1/this.selected.top.scale.z),this.rotatePlane(0,null),this.setHelperVisible(!0),this.updateRotationHelperPos(),this.updateResizeHelperPos(),this.active.detachCam=!0,t){var l=this.views.main.controls,u=this.selected.main.position,f=u.x,d=u.y,v=u.z;l.moveTo(f,d,v,!0)}}}},{key:"initiateAction",value:function(e,t){var n=t.rayCaster.renderer.intersectObjects(this.globalHelpers[e].resize,!1);if(0!==n.length){this.active.resize.helper=t.rayCaster.mouseVector.clone(),this.active.resize.status=!0,this.active.detected=!0;var i=this.selected[e].scale,o=i.x,a=i.y,s=i.z;return this.active.resize.initScales={x:o,y:a,z:s},this.active.resize.memScales={x:o,y:a,z:s},this.active.resize.frontBool=!1,void(this.active.resize.resizeVector=new r["Vector3"](0,0,0))}var c=t.rayCaster.renderer.intersectObjects(this.globalHelpers[e].rotation,!1);if(0!==c.length)return this.active.rotation.helper=t.rayCaster.mouseVector.clone(),this.active.rotation.status=!0,this.active.detected=!0,void this.attachCamera(e);var l,u,f=t.rayCaster.renderer.intersectObject(this.selected[e],!1),d=t.rayCaster.renderer.intersectObjects([t.scene.getObjectByName("".concat(e,"Plane"))]);0!==f.length&&(this.active.translation.helper=t.rayCaster.mouseVector.clone(),this.active.translation.inverseMatrix=f[0].object.parent.matrixWorld.invert(),this.active.translation.offset=null===(l=d[0])||void 0===l||null===(u=l.point)||void 0===u?void 0:u.sub((new r["Vector3"]).setFromMatrixPosition(f[0].object.matrixWorld)),this.active.translation.status=!0,this.active.detected=!0)}},{key:"renderTranslateAction",value:function(e,t){if(this.active.translation.helper.x!==this.views[e].rayCaster.mouseVector.x||this.active.translation.helper.y!==this.views[e].rayCaster.mouseVector.y){var n=t.rayCaster.renderer.intersectObjects([t.scene.getObjectByName("".concat(e,"Plane"))]);if(0!==n.length&&n[0].point){var i=n[0].point;this.active.translation.coordinates=i,this.moveObject(i)}}}},{key:"renderResizeAction",value:function(e,t){var n=t.rayCaster.renderer.intersectObjects([t.scene.getObjectByName("".concat(e,"Plane"))]);if(0!==n.length){var i=this.active.resize.initScales,r=i.x,o=i.y,a=i.z,s=this.active.resize.memScales,c=s.x,l=s.y,u=s.z,d=this.active.resize.helper,v=d.x,h=d.y,m=t.rayCaster.mouseVector,y=m.x,b=m.y,w=this.active.resize.resizeVector;if((this.active.resize.helper.x!==y||this.active.resize.helper.y!==b)&&(this.active.resize.recentMouseVector.x!==y||this.active.resize.recentMouseVector.y!==b)){switch(this.active.resize.recentMouseVector=t.rayCaster.mouseVector.clone(),e){case f["ViewType"].TOP:var g=r*(y/v),O=o*(b/h);O<0&&(O=.2),g<0&&(g=.2),this.selected.setScale(g,O,this.selected.top.scale.z),this.setSelectedChildScale(1/g,1/O,null);var x=g/2-c/2,j=O/2-l/2;y>0&&b<0?(w.x+=x,w.y-=j):y>0&&b>0?(w.x+=x,w.y+=j):y<0&&b<0?(w.x-=x,w.y-=j):y<0&&b>0&&(w.x-=x,w.y+=j),this.active.resize.memScales.x=g,this.active.resize.memScales.y=O;break;case f["ViewType"].SIDE:var T=r*(y/v),S=a*(b/h);T<0&&(T=.2),S<0&&(S=.2),this.selected.setScale(T,this.selected.top.scale.y,S),this.setSelectedChildScale(1/T,null,1/S);var k=T/2-c/2,E=S/2-u/2;y>0&&b<0?(w.x+=k,w.y-=E):y>0&&b>0?(w.x+=k,w.y+=E):y<0&&b<0?(w.x-=k,w.y-=E):y<0&&b>0&&(w.x-=k,w.y+=E),this.active.resize.memScales=p(p({},this.active.resize.memScales),{},{x:T,z:S});break;case f["ViewType"].FRONT:var C,P,V=o*(y/v),I=a*(b/h);V<0&&(V=.2),I<0&&(I=.2),this.selected.setScale(this.selected.top.scale.x,V,I),this.setSelectedChildScale(null,1/V,1/I),this.active.resize.frontBool?(C=I/2-l/2,P=V/2-u/2):(C=I/2-u/2,P=V/2-l/2,this.active.resize.frontBool=!0),y>0&&b<0?(w.x+=C,w.y+=P):y>0&&b>0?(w.x-=C,w.y+=P):y<0&&b<0?(w.x+=C,w.y-=P):y<0&&b>0&&(w.x-=C,w.y-=P),this.active.resize.memScales.y=I,this.active.resize.memScales.z=V;break;default:}var N=w.clone();n[0].object.localToWorld(N),this.moveObject(N),this.adjustPerspectiveCameras()}}}},{key:"renderRotateAction",value:function(t,n){var i=Math.PI/d["default"].ROTATION_SPEED,r=n.renderer,o=r.domElement;if(o){var a={x:o.offsetLeft+o.offsetWidth/2,y:o.offsetTop+o.offsetHeight/2};this.active.rotation.screenInit.x===this.active.rotation.screenMove.x&&this.active.rotation.screenInit.y===this.active.rotation.screenMove.y||this.active.rotation.recentMouseVector.x===this.views[t].rayCaster.mouseVector.x&&this.active.rotation.recentMouseVector.y===this.views[t].rayCaster.mouseVector.y||(this.active.rotation.recentMouseVector=this.views[t].rayCaster.mouseVector.clone(),e.isLeft(a,this.active.rotation.screenInit,this.active.rotation.screenMove)?(this.rotateCube(this.selected,-i,t),this.rotatePlane(-i,t)):(this.rotateCube(this.selected,i,t),this.rotatePlane(i,t)),this.active.rotation.screenInit.x=this.active.rotation.screenMove.x,this.active.rotation.screenInit.y=this.active.rotation.screenMove.y)}}},{key:"rotateCube",value:function(e,t,n){switch(n){case f["ViewType"].TOP:e.main.rotateZ(t),e.top.rotateZ(t),e.side.rotateZ(t),e.front.rotateZ(t),this.rotateCamera(t,n);break;case f["ViewType"].FRONT:e.main.rotateX(t),e.top.rotateX(t),e.side.rotateX(t),e.front.rotateX(t),this.rotateCamera(t,n);break;case f["ViewType"].SIDE:e.main.rotateY(t),e.top.rotateY(t),e.side.rotateY(t),e.front.rotateY(t),this.rotateCamera(t,n);break;default:}}},{key:"rotateCamera",value:function(e,t){switch(t){case f["ViewType"].TOP:this.views.top.camera.rotateZ(e);break;case f["ViewType"].FRONT:this.views.front.camera.rotateZ(e);break;case f["ViewType"].SIDE:this.views.side.camera.rotateZ(e);break;default:}}},{key:"rotatePlane",value:function(e,t){var n=this.views.top.scene.getObjectByName(x.TOP),i=this.views.side.scene.getObjectByName(x.SIDE),o=this.views.front.scene.getObjectByName(x.FRONT);switch(t){case f["ViewType"].TOP:n.rotateZ(e),i.rotateY(e),o.rotateX(-e);break;case f["ViewType"].SIDE:n.rotateY(e),i.rotateZ(e),o.rotateY(e);break;case f["ViewType"].FRONT:n.rotateX(e),i.rotateX(-e),o.rotateZ(e);break;default:var a=this.selected,s=a.top,c=a.side,l=a.front;s.add(n),c.add(i),l.add(o),s.getObjectByName(x.TOP).rotation.set(0,0,0),c.getObjectByName(x.SIDE).rotation.set(-Math.PI/2,Math.PI/2e3,Math.PI),l.getObjectByName(x.FRONT).rotation.set(0,Math.PI/2,0);var u=new r["Quaternion"];c.getObjectByName(x.SIDE).getWorldQuaternion(u);var d=new r["Euler"];d.setFromQuaternion(u);var v=new r["Quaternion"];l.getObjectByName(x.FRONT).getWorldQuaternion(v);var h=new r["Euler"];h.setFromQuaternion(v);var p=new r["Quaternion"];s.getObjectByName(x.TOP).getWorldQuaternion(p);var m=new r["Euler"];m.setFromQuaternion(p),s.remove(n),c.remove(i),l.remove(o);var y=this.views.top.renderer.domElement,b=new r["Mesh"](new r["PlaneBufferGeometry"](y.offsetHeight,y.offsetWidth),new r["MeshBasicMaterial"]({color:16711680,alphaTest:0,visible:!1,transparent:!0,opacity:.1}));b.name=x.TOP,b.material.side=r["DoubleSide"];var w=this.views.side.renderer.domElement,g=new r["Mesh"](new r["PlaneBufferGeometry"](w.offsetHeight,w.offsetWidth),new r["MeshBasicMaterial"]({color:65280,alphaTest:0,visible:!1,transparent:!0,opacity:.1}));g.name=x.SIDE,g.material.side=r["DoubleSide"];var O=this.views.front.renderer.domElement,j=new r["Mesh"](new r["PlaneBufferGeometry"](O.offsetHeight,O.offsetWidth),new r["MeshBasicMaterial"]({color:255,alphaTest:0,visible:!1,transparent:!0,opacity:.5}));j.name=x.FRONT,j.material.side=r["DoubleSide"];var T={x:s.position.x,y:s.position.y,z:s.position.z};b.rotation.set(m.x,m.y,m.z),g.rotation.set(d.x,d.y,d.z),j.rotation.set(h.x,h.y,h.z),this.views.top.scene.add(b),this.views.side.scene.add(g),this.views.front.scene.add(j),this.translateReferencePlane(T)}}},{key:"translateReferencePlane",value:function(e){var t=this.views.top.scene.getObjectByName(x.TOP);t&&(t.position.x=e.x,t.position.y=e.y,t.position.z=e.z);var n=this.views.side.scene.getObjectByName(x.SIDE);n&&(n.position.x=e.x,n.position.y=e.y,n.position.z=e.z);var i=this.views.front.scene.getObjectByName(x.FRONT);i&&(i.position.x=e.x,i.position.y=e.y,i.position.z=e.z)}},{key:"moveObject",value:function(e){var t=this.selected,n=t.main,i=t.top,r=t.side,o=t.front,a=e;this.active.translation.status&&(a=e.clone().sub(this.active.translation.offset).applyMatrix4(this.active.translation.inverseMatrix)),n.position.copy(a.clone()),i.position.copy(a.clone()),r.position.copy(a.clone()),o.position.copy(a.clone())}},{key:"animationRender",value:function(){var t=this;if(Object.keys(this.views).forEach((function(n){var i,r=t.views[n];r.controls&&r.camera&&r.rayCaster&&(r.rayCaster.renderer.setFromCamera(r.rayCaster.mouseVector,r.camera),e.resizeRendererSize(r),null!==(i=r.controls)&&void 0!==i&&i.enabled?r.controls.update(t.clock.getDelta()):r.camera.updateProjectionMatrix(),r.renderer.render(r.scene,r.camera),n===f["ViewType"].MAIN&&0!==r.scene.children.length&&t.renderRayCaster(),n!==f["ViewType"].MAIN&&t.active.scan===n&&(t.active.translation.status||t.active.resize.status||t.active.rotation.status||t.initiateAction(n,r),t.active.detected?(t.active.translation.status?t.renderTranslateAction(n,r):t.active.resize.status?t.renderResizeAction(n,r):t.renderRotateAction(n,r),t.updateResizeHelperPos(),t.updateRotationHelperPos()):t.resetActives()))})),this.active.detachCam)try{this.detachCamera(null)}finally{this.active.detachCam=!1}}},{key:"canvasDom",value:function(){return{main:this.views.main.renderer.domElement,top:this.views.top.renderer.domElement,side:this.views.side.renderer.domElement,front:this.views.front.renderer.domElement}}}],[{key:"setupRotationHelper",value:function(){var e=new r["SphereGeometry"](.15),t=new r["MeshBasicMaterial"]({color:"#ffffff",opacity:1,visible:!0}),n=new r["Mesh"](e,t);return n.name="globalRotationHelper",n}},{key:"resizeRendererSize",value:function(e){var t=e.camera,n=e.renderer,i=n.domElement;if(i.parentElement){var o=i.parentElement.clientWidth,a=i.parentElement.clientHeight,s=i.clientWidth!==o||i.clientHeight!==a;if(s&&t&&e.camera){if(t instanceof r["PerspectiveCamera"])t.aspect=o/a;else{var c=0,l=7,u=o/a;t instanceof r["PerspectiveCamera"]||(t.left=-u*l/2-c,t.right=u*l/2+c,t.top=l/2+c,t.bottom=-l/2-c),t.near=-50,t.far=50}e.renderer.setSize(o,a),e.camera.updateProjectionMatrix()}}}},{key:"createVirtualBox",value:function(){var e=new r["BoxGeometry"](1,1,1),t=new r["MeshBasicMaterial"]({color:d["default"].PRIMARY,wireframe:!1,transparent:!0,opacity:.4}),n=new r["Mesh"](e,t);n.name="virtual";var i=new r["LineSegments"](new r["EdgesGeometry"](n.geometry),new r["LineBasicMaterial"]({color:d["default"].PRIMARY,linewidth:3}));return i.computeLineDistances(),i.renderOrder=1,n.add(i),n}},{key:"isLeft",value:function(e,t,n){return(t.x-e.x)*(n.y-e.y)-(t.y-e.y)*(n.x-e.x)>0}}]),e}()},7462:function(e,t,n){},7966:function(e,t,n){"use strict";n.r(t),t["default"]={CAMERA_REFERENCE:"camRef",CUBOID_EDGE_NAME:"edges",ROTATION_HELPER:"rotationHelper",ROTATION_HELPER_OFFSET:.1,ROTATION_SPEED:80,FOV_MAX:2,FOV_MIN:0,FOV_INC:.08,MAIN_VIEW_BG:0,PRIMARY:5820873}},8047:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"tool pt-1",staticStyle:{width:"56px"}},e._l(e.toolList,(function(t){return n("el-tooltip",{key:t.key,attrs:{"popper-class":"tip-db","open-delay":300,placement:"right"},scopedSlots:e._u([{key:"content",fn:function(){return[n("h3",{staticStyle:{margin:"0 0 5px 0"}},[e._v(e._s(t.tip))]),e._v(" "),n("span",[e._v(e._s((1&t.key?"不可":"可以")+"调整三视图标注范围"))])]},proxy:!0}],null,!0)},[e._v(" "),n("el-button",{class:{"toolbar__button--selected":e.selectKey===t.key,"cursor-not":e.isCheck&&2===t.key},on:{click:function(n){return e.onToolChange(t.key)}}},[n("IconFont",{attrs:{type:t.icon}})],1)],1)})),1)},r=[],o=n("ed09"),a=n("da2d"),s={name:"ToolBar",setup:function(){var e=Object(o["e"])(a["editorSymbol"]),t=e.value.data,n=[{key:0,icon:"yidonggongju",tip:"物体拾取工具"},{key:1,icon:"shizigongju",tip:"视角控制工具"},{key:2,icon:"a-3Dgongju",tip:"标注工具"}],i=Object(o["a"])((function(){return t.toolType})),r=Object(o["a"])((function(){return t.isCheck})),s=function(n){r.value&&2===n||(t.setToolType(n),e.value.switchTools())};return{toolList:n,selectKey:i,isCheck:r,onToolChange:s}}},c=s,l=(n("9553"),n("2877")),u=Object(l["a"])(c,i,r,!1,null,"1a7296e2",null);t["default"]=u.exports},9553:function(e,t,n){"use strict";n("7462")},"9c43":function(e,t,n){},a311:function(e,t,n){"use strict";n("b399")},b399:function(e,t,n){},b8a2:function(e,t,n){"use strict";n.r(t);var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"scene flex flex-col"},[n("div",{ref:"main",staticClass:"main-view"},[n("IconFont",{staticClass:"axes",attrs:{type:"zuobiaozhou"}})],1),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isMultiView,expression:"isMultiView"}],staticClass:"multi-view flex"},[n("div",{ref:"top"},[n("el-tag",{attrs:{color:"#303030"}},[e._v("俯视图")])],1),e._v(" "),n("div",{ref:"side"},[n("el-tag",{attrs:{color:"#303030"}},[e._v("正视图")])],1),e._v(" "),n("div",{ref:"front"},[n("el-tag",{attrs:{color:"#303030"}},[e._v("侧视图")])],1)]),e._v(" "),n("el-dialog",{ref:"dialogRef",staticClass:"el-modal__dark",attrs:{visible:e.state.visible,title:void 0,"close-on-click-modal":!1,top:"0",width:"300px",modal:!1},on:{"update:visible":function(t){return e.$set(e.state,"visible",t)}}},[n("el-select",{staticStyle:{width:"100%"},attrs:{filterable:"",placeholder:"请选择标签"},on:{change:e.handleChange,close:function(t){e.selectValue=null}},model:{value:e.selectValue,callback:function(t){e.selectValue=t},expression:"selectValue"}},e._l(e.labelGroups,(function(e){return n("el-option",{key:e.id,attrs:{label:e.name,value:e.name}})})),1)],1)],1)},r=[],o=n("ed09"),a=n("da2d");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t=f(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e){var t=d(e,"string");return"symbol"===s(t)?t:String(t)}function d(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var v={name:"PointCloudView",setup:function(){var e=Object(o["e"])(a["editorSymbol"]),t=e.value,n=t.data,i=t.view,r=Object(o["o"])(null),s=Object(o["o"])(null),c=Object(o["o"])(),u=Object(o["n"])({visible:!1,info:null}),f=Object(o["n"])({main:null,top:null,side:null,front:null}),d=Object(o["a"])((function(){return n.multiView})),v=Object(o["a"])((function(){return n.labelGroup})),h=e.value.html(),p=function(e){Object.assign(s.value.$el.firstChild.style,{top:"".concat(e.detail.clientY,"px"),left:"".concat(e.detail.clientX,"px")}),u.visible=!0,u.info=e.detail.boxInfo},m=function t(){e.value.render(),r.value=requestAnimationFrame(t)},y=function(e){var t="".concat(e," ").concat(u.info);n.setMultiView(!0),i.createBoundingBox(t,!0),u.visible=!1,c.value=null};return Object(o["k"])((function(){Object.keys(f).forEach((function(e){f[e].appendChild(h[e])})),h.main.addEventListener("annodown",p),m()})),Object(o["j"])((function(){cancelAnimationFrame(r.value),h.main.removeEventListener("annodown",p)})),l(l({},Object(o["q"])(f)),{},{state:u,isMultiView:d,dialogRef:s,labelGroups:v,selectValue:c,handleChange:y})}},h=v,p=(n("e562"),n("2877")),m=Object(p["a"])(h,i,r,!1,null,"58f1f9b6",null);t["default"]=m.exports},be27:function(e,t,n){"use strict";n.r(t);n("6c31");t["default"]={name:"AnnotationItem",functional:!0,props:{radioType:{type:Number,default:0},record:{type:Object,default:function(){return{}}},border:{type:Boolean,default:!1},options:Array,itemId:Number,handleEditLabel:Function,onClickItem:{type:Function,default:function(){}}},render:function(e,t){var n=t.props,i=t.slots,r=n.radioType,o=n.itemId,a=n.record,s=n.options,c=n.handleEditLabel,l=n.border,u=n.onClickItem,f=e("span",[e("IconFont",{attrs:{type:"a-3Dgongju"}}),e("span",{class:"ml-10"},[a.name]),e("el-popover",{attrs:{placement:"bottom",width:"200",trigger:"click",title:"修改标签名称"}},[e("el-select",{attrs:{value:a.name,placeholder:"请选择"},on:{change:function(e){return c(e,a.nameKey)}}},[null===s||void 0===s?void 0:s.map((function(t){return e("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})}))]),e("i",{slot:"reference",class:"el-icon-edit cp dib ml-10",on:{click:function(e){return e.stopPropagation()}}})])]);return e("section",{class:"mb-10"},[e("div",{class:"annotation-item",style:l?{border:"1px solid ".concat(a.color),background:"".concat(a.color,"30")}:void 0,on:{click:function(){return u(a.nameKey)}}},[e("div",{class:"flex flex-center list-number",style:{background:a.color}},[o]),e("div",{class:"flex flex-between flex-vertical-align item-content__inner",style:{background:r?a.color:"transparent"}},[e("div",{class:"f14"},[r?a.name:f]),e("div",{class:"item-icon f16"},[i().icon])])])])}}},c9c4:function(e,t,n){"use strict";n("1333")},d0bd:function(e,t,n){"use strict";n.r(t),n.d(t,"BoundingBox",(function(){return x})),n.d(t,"setEdges",(function(){return j})),n.d(t,"setTranslationHelper",(function(){return T})),n.d(t,"createRotationHelper",(function(){return S})),n.d(t,"getTextCanvas",(function(){return E})),n.d(t,"setText",(function(){return C}));var i=n("5a89"),r=n("9037"),o=n("6b42"),a=n("7966");function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function c(e,t){return v(e)||d(e,t)||u(e,t)||l()}function l(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(e,t){if(e){if("string"===typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function d(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var i,r,o,a,s=[],c=!0,l=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(i=o.call(n)).done)&&(s.push(i.value),s.length!==t);c=!0);}catch(u){l=!0,r=u}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw r}}return s}}function v(e){if(Array.isArray(e))return e}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t=g(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g(i.key),i)}}function w(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e){var t=O(e,"string");return"symbol"===s(t)?t:String(t)}function O(e,t){if("object"!==s(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}var x=function(){function e(){y(this,e);var t=new i["BoxGeometry"](1,1,1),n=new i["MeshBasicMaterial"]({color:5820873,wireframe:!1,transparent:!0});this.main=new i["Mesh"](t,n),this.top=new i["Mesh"](t,n),this.side=new i["Mesh"](t,n),this.front=new i["Mesh"](t,n);var r=new i["Object3D"];r.translateX(-2),r.name="camRefRot",r.up=new i["Vector3"](0,0,1),r.lookAt(new i["Vector3"](0,0,0)),this.front.add(r.clone())}return w(e,[{key:"setMainLine",value:function(e){var t=new i["LineSegments"](new i["EdgesGeometry"](this.main.geometry),new i["LineBasicMaterial"]({color:e,linewidth:4}));t.computeLineDistances(),t.renderOrder=1,t.name="mainLine",this.main.add(t)}},{key:"setPosition",value:function(e,t,n){var i=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(r){i[r].position.set(e,t,n)}))}},{key:"setScale",value:function(e,t,n){var i=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(r){i[r].scale.set(e,t,n)}))}},{key:"setRotation",value:function(e){var t=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(n){t[n].rotation.set(0,0,e)}))}},{key:"attachCameraReference",value:function(){var e=new i["Object3D"];e.translateZ(2),e.name=a["default"].CAMERA_REFERENCE,this.top.add(e),this.top.userData=p(p({},this.top.userData),{},{camReference:e});var t=new i["Object3D"];t.translateY(2),t.name=a["default"].CAMERA_REFERENCE,this.side.add(t),this.side.userData=p(p({},this.side.userData),{},{camReference:t});var n=new i["Object3D"];n.translateX(2),n.name=a["default"].CAMERA_REFERENCE,this.front.add(n),this.front.userData=p(p({},this.front.userData),{},{camReference:n})}},{key:"setName",value:function(e){var t=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(n){t[n].name=e}))}},{key:"setOriginalColor",value:function(e){var t=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(n){t[n].originalColor=e}))}},{key:"setColor",value:function(e){var t=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(n){t[n].material.color.set(e)}))}},{key:"setOpacity",value:function(e){var t=this;[o["ViewType"].MAIN,o["ViewType"].TOP,o["ViewType"].SIDE,o["ViewType"].FRONT].forEach((function(n){t[n].material.opacity=e/100}))}},{key:"setOtherVisible",value:function(e){var t=new Array(3).fill(e),n=c(t,3);this.top.visible=n[0],this.front.visible=n[1],this.side.visible=n[2]}},{key:"getReferenceCoordinates",value:function(e){var t=this[e].getObjectByName(a["default"].CAMERA_REFERENCE).matrixWorld.elements;return new i["Vector3"](t[12],t[13],t[14])}}]),e}();function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16777215,n=new i["EdgesGeometry"](e.geometry),r=new i["LineSegments"](n,new i["LineBasicMaterial"]({color:t,linewidth:3}));return r.name=a["default"].CUBOID_EDGE_NAME,e.add(r),r}function T(e){var t=new i["SphereGeometry"](.1),n=new i["MeshBasicMaterial"]({color:"#ffffff",opacity:1});e.geometry.deleteAttribute("normal"),e.geometry.deleteAttribute("uv"),e.geometry=Object(r["a"])(e.geometry);for(var o=[],a=e.geometry.getAttribute("position"),s=0;s<a.count;s+=1){var c=new i["Vector3"];c.fromBufferAttribute(a,s),o.push(c)}for(var l=[],u=0;u<o.length;u+=1)l[u]=new i["Mesh"](t.clone(),n.clone()),l[u].position.set(o[u].x,o[u].y,o[u].z),l[u].up.set(0,0,1),l[u].name="resizeHelper",e.add(l[u]),l[u].scale.set(1/e.scale.x,1/e.scale.y,1/e.scale.z);e.userData=p(p({},e.userData),{},{resizeHelpers:l})}function S(e,t){var n=new i["SphereGeometry"](.1),r=new i["MeshBasicMaterial"]({color:"#ffffff",opacity:1}),s=new i["Mesh"](n,r);switch(s.name=a["default"].ROTATION_HELPER,t){case o["ViewType"].TOP:s.position.set(e.geometry.parameters.height/2+a["default"].ROTATION_HELPER_OFFSET,e.position.y,e.position.z),e.add(s.clone()),e.userData=p(p({},e.userData),{},{rotationHelpers:s.clone()});break;case o["ViewType"].SIDE:case o["ViewType"].FRONT:s.position.set(e.position.x,e.position.y,e.geometry.parameters.depth/2+a["default"].ROTATION_HELPER_OFFSET),e.add(s.clone()),e.userData=p(p({},e.userData),{},{rotationHelpers:s.clone()});break;default:break}}var k=function(e){var t=e.backingStorePixelRatio||e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/t},E=function(e,t){var n=document.createElement("canvas"),i=n.getContext("2d"),r=k(i);return n.width=80*r,n.height=30*r,i.scale(r,r),i.fillStyle=t,i.fillRect(1,1,78,28),i.fillStyle="white",i.font="normal 14px verdana",i.fillText(e,5,20),n};function C(e){var t=e.getObjectByName("mainLabel");t&&e.remove(t);var n=e.userData.labelInfo,r=new i["Texture"](E(n.name,n.color));r.needsUpdate=!0;var o=new i["SpriteMaterial"]({map:r}),a=new i["Sprite"](o);a.scale.set(.3,.15,.3);var s=e.geometry.attributes.position;a.position.set(s.getX(7),s.getY(7),s.getZ(7)+a.scale.y/2),e.add(a)}},d234:function(e,t,n){},df7b:function(e,t,n){},e382:function(e,t,n){"use strict";n("9c43")},e562:function(e,t,n){"use strict";n("43a6")},ea8b:function(e,t,n){"use strict";n("18ac")},eb3f:function(e,t,n){"use strict";n("df7b")},f2733:function(e,t,n){"use strict";n("4ea8")}}]);